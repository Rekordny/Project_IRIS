#爆发冲突！
DOC_Conflict_Broke_out= {
	news_event = { id = doc_news.7 days = 1 }
	country_lock_all_division_template = no
	#如果没有点“焚典”
	if = { 
		limit = { NOT = { has_country_flag = DOC_Operation_Burning_Scripture }}
		set_country_flag = DOC_No_Initiative_in_Conflict
		#给你加点料
		add_to_variable = {
			doc_civil_enemy_power = 10
		}
	}
	
	#法典
	if = {
		limit = { has_country_flag = DOC_No_Initiative_in_Conflict }
		hidden_effect = {
			OOS = {
			division_template = {
				name = "The armed forces of OOS"
				priority = 0
				#division_names_group =
				regiments = {
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
					infantry = { x = 0 y = 3 }
      			 	infantry = { x = 0 y = 4 }
				}
			}
		}
					45 = {
						limit = {
							is_owned_and_controlled_by = DOC
						}
						transfer_state_to = OOS
						create_unit = {
							division = "name = \"法典组织的武装力量\" division_template = \"The armed forces of OOS\" start_experience_factor = 0.2  start_equipment_factor = 0.7 "
							owner = OOS
						}
						create_unit = {
							division = "name = \"法典组织的武装力量\" division_template = \"The armed forces of OOS\" start_experience_factor = 0.2  start_equipment_factor = 0.7 "
							owner = OOS
						}
						create_unit = {
							division = "name = \"法典组织的武装力量\" division_template = \"The armed forces of OOS\" start_experience_factor = 0.2  start_equipment_factor = 0.7 "
							owner = OOS
						}
						create_unit = {
							division = "name = \"法典组织的武装力量\" division_template = \"The armed forces of OOS\" start_experience_factor = 0.2  start_equipment_factor = 0.7 "
							owner = OOS
						}

					}

					59 = {
						limit = {
							is_owned_and_controlled_by = DOC
						}
						transfer_state_to = OOS
						create_unit = {
							division = "name = \"法典组织的武装力量\" division_template = \"The armed forces of OOS\" start_experience_factor = 0.2  start_equipment_factor = 0.7 "
							owner = OOS
						}
						create_unit = {
							division = "name = \"法典组织的武装力量\" division_template = \"The armed forces of OOS\" start_experience_factor = 0.2  start_equipment_factor = 0.7 "
							owner = OOS
						}
						create_unit = {
							division = "name = \"法典组织的武装力量\" division_template = \"The armed forces of OOS\" start_experience_factor = 0.2  start_equipment_factor = 0.7 "
							owner = OOS
						}
						create_unit = {
							division = "name = \"法典组织的武装力量\" division_template = \"The armed forces of OOS\" start_experience_factor = 0.2  start_equipment_factor = 0.7 "
							owner = OOS
						}

					}

					60 = {
						limit = {
							is_owned_and_controlled_by = DOC
						}
						transfer_state_to = OOS
						create_unit = {
							division = "name = \"法典组织的武装力量\" division_template = \"The armed forces of OOS\" start_experience_factor = 0.2  start_equipment_factor = 0.7 "
							owner = OOS
						}
						create_unit = {
							division = "name = \"法典组织的武装力量\" division_template = \"The armed forces of OOS\" start_experience_factor = 0.2  start_equipment_factor = 0.7 "
							owner = OOS
						}
						create_unit = {
							division = "name = \"法典组织的武装力量\" division_template = \"The armed forces of OOS\" start_experience_factor = 0.2  start_equipment_factor = 0.7 "
							owner = OOS
						}
						create_unit = {
							division = "name = \"法典组织的武装力量\" division_template = \"The armed forces of OOS\" start_experience_factor = 0.2  start_equipment_factor = 0.7 "
							owner = OOS
						}
					}
					OOS= {declare_war_on = { target = DOC type = annex_everything } }
				}
				

	}

	
	else_if = {
		limit = { has_country_flag = DOC_Operation_Burning_Scripture }
		hidden_effect = {
			division_template = {
				name = "The armed forces of OOS"
				priority = 0
				#division_names_group =
				regiments = {
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
					infantry = { x = 0 y = 3 }
      			 	infantry = { x = 0 y = 4 }
				}
			}
					45 = {
						limit = {
							is_owned_and_controlled_by = DOC
						}
						transfer_state_to = OOS
						create_unit = {
							division = "name = \"法典组织的武装力量\" division_template = \"The armed forces of OOS\" start_experience_factor = 0.2  start_equipment_factor = 0.7 "
							owner = OOS
						}
						create_unit = {
							division = "name = \"法典组织的武装力量\" division_template = \"The armed forces of OOS\" start_experience_factor = 0.2  start_equipment_factor = 0.7 "
							owner = OOS
						}
						create_unit = {
							division = "name = \"法典组织的武装力量\" division_template = \"The armed forces of OOS\" start_experience_factor = 0.2  start_equipment_factor = 0.7 "
							owner = OOS
						}
						create_unit = {
							division = "name = \"法典组织的武装力量\" division_template = \"The armed forces of OOS\" start_experience_factor = 0.2  start_equipment_factor = 0.7 "
							owner = OOS
						}
						create_unit = {
							division = "name = \"法典组织的武装力量\" division_template = \"The armed forces of OOS\" start_experience_factor = 0.2  start_equipment_factor = 0.7 "
							owner = OOS
						}
						create_unit = {
							division = "name = \"法典组织的武装力量\" division_template = \"The armed forces of OOS\" start_experience_factor = 0.2  start_equipment_factor = 0.7 "
							owner = OOS
						}

			}

			OOS= {declare_war_on = { target = DOC type = annex_everything } }
		}
	}

	#关闭BOP
	remove_power_balance = {
		id = DOC_Scripture_Organization_Penetration 
	}
}

#重新计算省份逻辑
DOC_calculate_existing_parcel_logic = {
	DOC_province_classification = yes
	every_state = {
		limit = {
			is_controlled_by = DOC
			NOT = {
				has_state_flag = DOC_map_3
				has_state_flag = DOC_map_2
				has_state_flag = DOC_map_1
			}
		}
		random_list = {
			50 = {set_state_flag = DOC_map_2}
			50 = {set_state_flag = DOC_map_1}
		}
	}
}
#省份分类
DOC_province_classification = {
	DOC = {
		set_variable = { DOC_province_classification_b = 0 }
		set_variable = { DOC_province_classification_r = 0 }
		set_variable = { DOC_province_classification_w = 0 }
		set_variable = { DOC_province_classification_g = 0 }
		if = {
			limit = {
				DOC = {
				controls_state = 114
				}
				114 = {
				has_state_flag = DOC_map_1
				}
			}
			add_to_variable = { DOC_province_classification_w = 1 } 
		}
		else_if = {
			limit = {
				DOC = {
				controls_state = 114
				}
				114 = {
				has_state_flag = DOC_map_2
				}
			}
			add_to_variable = { DOC_province_classification_g = 1 } 
		}
		else_if = {
			limit = {
				DOC = {
				controls_state = 114
				}
				114 = {
				has_state_flag = DOC_map_3
				}
			}
			add_to_variable = { DOC_province_classification_b = 1 } 
		}
		else = {
			add_to_variable = { DOC_province_classification_r = 1 } 
		}

		if = {
			limit = {
				DOC = {
				controls_state = 85
				}
				85 = {
				has_state_flag = DOC_map_1
				}
			}
			add_to_variable = { DOC_province_classification_w = 1 } 
		}
		else_if = {
			limit = {
				DOC = {
				controls_state = 85
				}
				85 = {
				has_state_flag = DOC_map_2
				}
			}
			add_to_variable = { DOC_province_classification_g = 1 } 
		}
		else_if = {
			limit = {
				DOC = {
				controls_state = 85
				}
				85 = {
				has_state_flag = DOC_map_3
				}
			}
			add_to_variable = { DOC_province_classification_b = 1 } 
		}
		else = {
			add_to_variable = { DOC_province_classification_r = 1 } 
		}

		if = {
			limit = {
				DOC = {
				controls_state = 89
				}
				89 = {
				has_state_flag = DOC_map_1
				}
			}
			add_to_variable = { DOC_province_classification_w = 1 } 
		}
		else_if = {
			limit = {
				DOC = {
				controls_state = 89
				}
				89 = {
				has_state_flag = DOC_map_2
				}
			}
			add_to_variable = { DOC_province_classification_g = 1 } 
		}
		else_if = {
			limit = {
				DOC = {
				controls_state = 89
				}
				89 = {
				has_state_flag = DOC_map_3
				}
			}
			add_to_variable = { DOC_province_classification_b = 1 } 
		}
		else = {
			add_to_variable = { DOC_province_classification_r = 1 } 
		}

		if = {
			limit = {
				DOC = {
				controls_state = 74
				}
				74 = {
				has_state_flag = DOC_map_1
				}
			}
			add_to_variable = { DOC_province_classification_w = 1 } 
		}
		else_if = {
			limit = {
				DOC = {
				controls_state = 74
				}
				74 = {
				has_state_flag = DOC_map_2
				}
			}
			add_to_variable = { DOC_province_classification_g = 1 } 
		}
		else_if = {
			limit = {
				DOC = {
				controls_state = 74
				}
				74 = {
				has_state_flag = DOC_map_3
				}
			}
			add_to_variable = { DOC_province_classification_b = 1 } 
		}
		else = {
			add_to_variable = { DOC_province_classification_r = 1 } 
		}

		if = {
			limit = {
				DOC = {
				controls_state = 69
				}
				69 = {
				has_state_flag = DOC_map_1
				}
			}
			add_to_variable = { DOC_province_classification_w = 1 } 
		}
		else_if = {
			limit = {
				DOC = {
				controls_state = 69
				}
				69 = {
				has_state_flag = DOC_map_2
				}
			}
			add_to_variable = { DOC_province_classification_g = 1 } 
		}
		else_if = {
			limit = {
				DOC = {
				controls_state = 69
				}
				69 = {
				has_state_flag = DOC_map_3
				}
			}
			add_to_variable = { DOC_province_classification_b = 1 } 
		}
		else = {
			add_to_variable = { DOC_province_classification_r = 1 } 
		}

		if = {
			limit = {
				DOC = {
				controls_state = 59
				}
				59 = {
				has_state_flag = DOC_map_1
				}
			}
			add_to_variable = { DOC_province_classification_w = 1 } 
		}
		else_if = {
			limit = {
				DOC = {
				controls_state = 59
				}
				59 = {
				has_state_flag = DOC_map_2
				}
			}
			add_to_variable = { DOC_province_classification_g = 1 } 
		}
		else_if = {
			limit = {
				DOC = {
				controls_state = 59
				}
				59 = {
				has_state_flag = DOC_map_3
				}
			}
			add_to_variable = { DOC_province_classification_b = 1 } 
		}
		else = {
			add_to_variable = { DOC_province_classification_r = 1 } 
		}

		if = {
			limit = {
				DOC = {
				controls_state = 45
				}
				45 = {
				has_state_flag = DOC_map_1
				}
			}
			add_to_variable = { DOC_province_classification_w = 1 } 
		}
		else_if = {
			limit = {
				DOC = {
				controls_state = 45
				}
				45 = {
				has_state_flag = DOC_map_2
				}
			}
			add_to_variable = { DOC_province_classification_g = 1 } 
		}
		else_if = {
			limit = {
				DOC = {
				controls_state = 45
				}
				45 = {
				has_state_flag = DOC_map_3
				}
			}
			add_to_variable = { DOC_province_classification_b = 1 } 
		}
		else = {
			add_to_variable = { DOC_province_classification_r = 1 } 
		}

		if = {
			limit = {
				DOC = {
				controls_state = 97
				}
				97 = {
				has_state_flag = DOC_map_1
				}
			}
			add_to_variable = { DOC_province_classification_w = 1 } 
		}
		else_if = {
			limit = {
				DOC = {
				controls_state = 97
				}
				97 = {
				has_state_flag = DOC_map_2
				}
			}
			add_to_variable = { DOC_province_classification_g = 1 } 
		}
		else_if = {
			limit = {
				DOC = {
				controls_state = 97
				}
				97 = {
				has_state_flag = DOC_map_3
				}
			}
			add_to_variable = { DOC_province_classification_b = 1 } 
		}
		else = {
			add_to_variable = { DOC_province_classification_r = 1 } 
		}

		if = {
			limit = {
				DOC = {
				controls_state = 105
				}
				105 = {
				has_state_flag = DOC_map_1
				}
			}
			add_to_variable = { DOC_province_classification_w = 1 } 
		}
		else_if = {
			limit = {
				DOC = {
				controls_state = 105
				}
				105 = {
				has_state_flag = DOC_map_2
				}
			}
			add_to_variable = { DOC_province_classification_g = 1 } 
		}
		else_if = {
			limit = {
				DOC = {
				controls_state = 105
				}
				105 = {
				has_state_flag = DOC_map_3
				}
			}
			add_to_variable = { DOC_province_classification_b = 1 } 
		}
		else = {
			add_to_variable = { DOC_province_classification_r = 1 } 
		}

		if = {
			limit = {
				DOC = {
				controls_state = 75
				}
				75 = {
				has_state_flag = DOC_map_1
				}
			}
			add_to_variable = { DOC_province_classification_w = 1 } 
		}
		else_if = {
			limit = {
				DOC = {
				controls_state = 75
				}
				75 = {
				has_state_flag = DOC_map_2
				}
			}
			add_to_variable = { DOC_province_classification_g = 1 } 
		}
		else_if = {
			limit = {
				DOC = {
				controls_state = 75
				}
				75 = {
				has_state_flag = DOC_map_3
				}
			}
			add_to_variable = { DOC_province_classification_b = 1 } 
		}
		else = {
			add_to_variable = { DOC_province_classification_r = 1 } 
		}

		if = {
			limit = {
				DOC = {
				controls_state = 58
				}
				58 = {
				has_state_flag = DOC_map_1
				}
			}
			add_to_variable = { DOC_province_classification_w = 1 } 
		}
		else_if = {
			limit = {
				DOC = {
				controls_state = 58
				}
				58 = {
				has_state_flag = DOC_map_2
				}
			}
			add_to_variable = { DOC_province_classification_g = 1 } 
		}
		else_if = {
			limit = {
				DOC = {
				controls_state = 58
				}
				58 = {
				has_state_flag = DOC_map_3
				}
			}
			add_to_variable = { DOC_province_classification_b = 1 } 
		}
		else = {
			add_to_variable = { DOC_province_classification_r = 1 } 
		}

		if = {
			limit = {
				DOC = {
				controls_state = 70
				}
				70 = {
				has_state_flag = DOC_map_1
				}
			}
			add_to_variable = { DOC_province_classification_w = 1 } 
		}
		else_if = {
			limit = {
				DOC = {
				controls_state = 70
				}
				70 = {
				has_state_flag = DOC_map_2
				}
			}
			add_to_variable = { DOC_province_classification_g = 1 } 
		}
		else_if = {
			limit = {
				DOC = {
				controls_state = 70
				}
				70 = {
				has_state_flag = DOC_map_3
				}
			}
			add_to_variable = { DOC_province_classification_b = 1 } 
		}
		else = {
			add_to_variable = { DOC_province_classification_r = 1 } 
		}

		if = {
			limit = {
				DOC = {
				controls_state = 61
				}
				61 = {
				has_state_flag = DOC_map_1
				}
			}
			add_to_variable = { DOC_province_classification_w = 1 } 
		}
		else_if = {
			limit = {
				DOC = {
				controls_state = 61
				}
				61 = {
				has_state_flag = DOC_map_2
				}
			}
			add_to_variable = { DOC_province_classification_g = 1 } 
		}
		else_if = {
			limit = {
				DOC = {
				controls_state = 61
				}
				61 = {
				has_state_flag = DOC_map_3
				}
			}
			add_to_variable = { DOC_province_classification_b = 1 } 
		}
		else = {
			add_to_variable = { DOC_province_classification_r = 1 } 
		}

		if = {
			limit = {
				DOC = {
				controls_state = 51
				}
				51 = {
				has_state_flag = DOC_map_1
				}
			}
			add_to_variable = { DOC_province_classification_w = 1 } 
		}
		else_if = {
			limit = {
				DOC = {
				controls_state = 51
				}
				51 = {
				has_state_flag = DOC_map_2
				}
			}
			add_to_variable = { DOC_province_classification_g = 1 } 
		}
		else_if = {
			limit = {
				DOC = {
				controls_state = 51
				}
				51 = {
				has_state_flag = DOC_map_3
				}
			}
			add_to_variable = { DOC_province_classification_b = 1 } 
		}
		else = {
			add_to_variable = { DOC_province_classification_r = 1 } 
		}

		if = {
			limit = {
				DOC = {
				controls_state = 39
				}
				39 = {
				has_state_flag = DOC_map_1
				}
			}
			add_to_variable = { DOC_province_classification_w = 1 } 
		}
		else_if = {
			limit = {
				DOC = {
				controls_state = 39
				}
				39 = {
				has_state_flag = DOC_map_2
				}
			}
			add_to_variable = { DOC_province_classification_g = 1 } 
		}
		else_if = {
			limit = {
				DOC = {
				controls_state = 39
				}
				39 = {
				has_state_flag = DOC_map_3
				}
			}
			add_to_variable = { DOC_province_classification_b = 1 } 
		}
		else = {
			add_to_variable = { DOC_province_classification_r = 1 } 
		}

		if = {
			limit = {
				DOC = {
				controls_state = 60
				}
				60 = {
				has_state_flag = DOC_map_1
				}
			}
			add_to_variable = { DOC_province_classification_w = 1 } 
		}
		else_if = {
			limit = {
				DOC = {
				controls_state = 60
				}
				60 = {
				has_state_flag = DOC_map_2
				}
			}
			add_to_variable = { DOC_province_classification_g = 1 } 
		}
		else_if = {
			limit = {
				DOC = {
				controls_state = 60
				}
				60 = {
				has_state_flag = DOC_map_3
				}
			}
			add_to_variable = { DOC_province_classification_b = 1 } 
		}
		else = {
			add_to_variable = { DOC_province_classification_r = 1 } 
		}
	}
}

#随机白色省份变为绿色
DOC_Revised_feudal_contract_entries_change = {
	random_state = {
		limit = {
			is_controlled_by = DOC
			has_state_flag = DOC_map_1
		}
		add_extra_state_shared_building_slots = 1
		clr_state_flag = DOC_map_1
		set_state_flag = DOC_map_2
	}
	DOC_province_classification = yes
}

#随机绿色省份变为蓝色
DOC_promote_regional_land_reform_change = {
	random_state = {
		limit = {
			is_controlled_by = DOC
			has_state_flag = DOC_map_2
		}
		add_extra_state_shared_building_slots = 1
		clr_state_flag = DOC_map_2
		set_state_flag = DOC_map_3
	}
	DOC_province_classification = yes
}
#随机蓝色省份给工厂和建筑槽
DOC_Subsidies_for_regional_private_industries_change = {
	random_state = {
		limit = {
			is_controlled_by = DOC
			has_state_flag = DOC_map_3
		}
		add_extra_state_shared_building_slots = 1
		add_building_construction = {
			type = industrial_complex
			level = 1
			instant_build = yes
		}
	}
}

#随机蓝色绿色省份给资源
DOC_transfer_of_regional_strategic_resource_exploitation_rights_change = {
	random_state = {
		limit = {
			is_controlled_by = DOC
			OR = {
				has_state_flag = DOC_map_3
				has_state_flag = DOC_map_2
			}
		}
		random_list = {
			16 = {
                random_list = {
					33 = {
						add_resource = {
							type = raw_mana
							amount = 5
                		}
					}
					33 = {
						add_resource = {
							type = raw_mana
							amount = 4
                		}
					}
					33 = {
						add_resource = {
							type = raw_mana
							amount = 3
                		}
					}
				}
            }
			14 = {
                random_list = {
					33 = {
						add_resource = {
							type = oil
							amount = 5
                		}
					}
					33 = {
						add_resource = {
							type = oil
							amount = 4
                		}
					}
					33 = {
						add_resource = {
							type = oil
							amount = 3
                		}
					}
				}
            }
			14 = {
                random_list = {
					33 = {
						add_resource = {
							type = tungsten
							amount = 5
                		}
					}
					33 = {
						add_resource = {
							type = tungsten
							amount = 4
                		}
					}
					33 = {
						add_resource = {
							type = tungsten
							amount = 3
                		}
					}
				}
            }
			14 = {
                random_list = {
					33 = {
						add_resource = {
							type = chromium
							amount = 5
                		}
					}
					33 = {
						add_resource = {
							type = chromium
							amount = 4
                		}
					}
					33 = {
						add_resource = {
							type = chromium
							amount = 3
                		}
					}
				}
            }
			14 = {
                random_list = {
					33 = {
						add_resource = {
							type = aluminium
							amount = 5
                		}
					}
					33 = {
						add_resource = {
							type = aluminium
							amount = 4
                		}
					}
					33 = {
						add_resource = {
							type = aluminium
							amount = 3
                		}
					}
				}
            }
			14 = {
                random_list = {
					33 = {
						add_resource = {
							type = rubber
							amount = 5
                		}
					}
					33 = {
						add_resource = {
							type = rubber
							amount = 4
                		}
					}
					33 = {
						add_resource = {
							type = rubber
							amount = 3
                		}
					}
				}
            }
			14 = {
                random_list = {
					33 = {
						add_resource = {
							type = steel
							amount = 5
                		}
					}
					33 = {
						add_resource = {
							type = steel
							amount = 4
                		}
					}
					33 = {
						add_resource = {
							type = steel
							amount = 3
                		}
					}
				}
            }
		}
	}
}

#随机蓝色省份给军用工厂并删除民用
DOC_Subsidies_for_regional_private_industries_change = {
	random_state = {
		limit = {
			is_controlled_by = DOC
			has_state_flag = DOC_map_3
		}
		random_list = {
			25 = {
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			25 = {
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			25 = {
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
				remove_building = {
    				type = industrial_complex
    				level = 1
				}
			}
			25 = {
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
				remove_building = {
    				type = industrial_complex
    				level = 1
				}
			}
		}
	}
}