#提高贵族好感
BLA_increase_nobility_opinion = {
    custom_effect_tooltip = BLA_increase_nobility_opinion_desc
    hidden_effect = {
    BLA = {add_to_variable = {BLA_nobility_opinion = 5}}
    BLA_check_nobility_opinion = yes
    }
}
#提高贵族好感-大
BLA_increase_nobility_opinion_big = {
    custom_effect_tooltip = BLA_increase_nobility_opinion_big_desc
    hidden_effect = {
    BLA = {add_to_variable = {BLA_nobility_opinion = 10}}
    BLA_check_nobility_opinion = yes
    }
}
#降低贵族好感
BLA_decrease_nobility_opinion = {
    custom_effect_tooltip = BLA_decrease_nobility_opinion_desc
    hidden_effect = {
    BLA = {add_to_variable = {BLA_nobility_opinion = -5}}
    BLA_check_nobility_opinion = yes
    }
}
#降低贵族好感-大
BLA_decrease_nobility_opinion_big = {
    custom_effect_tooltip = BLA_decrease_nobility_opinion_big_desc
    hidden_effect = {
    BLA = {add_to_variable = {BLA_nobility_opinion = -10}}
    BLA_check_nobility_opinion = yes
    }
}
#提高教会好感
BLA_increase_church_opinion = {
    custom_effect_tooltip = BLA_increase_church_opinion_desc
    hidden_effect = {
    BLA = {add_to_variable = {BLA_church_opinion = 5}}
    BLA_check_church_opinion = yes
    }
}
#提高教会好感-大
BLA_increase_church_opinion_big = {
    custom_effect_tooltip = BLA_increase_church_opinion_big_desc
    hidden_effect = {
    BLA = {add_to_variable = {BLA_church_opinion = 10}}
    BLA_check_church_opinion = yes
    }
}
#降低教会好感
BLA_decrease_church_opinion = {
    custom_effect_tooltip = BLA_decrease_church_opinion_desc
    hidden_effect = {
    BLA = {add_to_variable = {BLA_church_opinion = -5}}
    BLA_check_church_opinion = yes
    }
}
#降低教会好感-大
BLA_decrease_church_opinion_big = {
    custom_effect_tooltip = BLA_decrease_church_opinion_big_desc
    hidden_effect = {
    BLA = {add_to_variable = {BLA_church_opinion = -10}}
    BLA_check_church_opinion = yes
    }
}
#提高军队好感
BLA_increase_army_opinion = {
    custom_effect_tooltip = BLA_increase_army_opinion_desc
    hidden_effect = {
    BLA = {add_to_variable = {BLA_army_opinion = 5}}
    BLA_check_army_opinion = yes
    }
}
#提高军队好感-大
BLA_increase_army_opinion_big = {
    custom_effect_tooltip = BLA_increase_army_opinion_big_desc
    hidden_effect = {
    BLA = {add_to_variable = {BLA_army_opinion = 10}}
    BLA_check_army_opinion = yes
    }
}
#降低军队好感
BLA_decrease_army_opinion = {
    custom_effect_tooltip = BLA_decrease_army_opinion_desc
    hidden_effect = {
    BLA = {add_to_variable = {BLA_army_opinion = -5}}
    BLA_check_army_opinion = yes
    }
}
#降低军队好感-大
BLA_decrease_army_opinion_big = {
    custom_effect_tooltip = BLA_decrease_army_opinion_big_desc
    hidden_effect = {
    BLA = {add_to_variable = {BLA_army_opinion = -10}}
    BLA_check_army_opinion = yes
    }
}
#提高实业家好感
BLA_increase_capitalist_opinion = {
    custom_effect_tooltip = BLA_increase_capitalist_opinion_desc
    hidden_effect = {
    BLA = {add_to_variable = {BLA_capitalist_opinion = 5}}
    BLA_check_capitalist_opinion = yes
    }
}
#提高实业家好感-大
BLA_increase_capitalist_opinion_big = {
    custom_effect_tooltip = BLA_increase_capitalist_opinion_big_desc
    hidden_effect = {
    BLA = {add_to_variable = {BLA_capitalist_opinion = 10}}
    BLA_check_capitalist_opinion = yes
    }
}
#降低实业家好感
BLA_decrease_capitalist_opinion = {
    custom_effect_tooltip = BLA_decrease_capitalist_opinion_desc
    hidden_effect = {
    BLA = {add_to_variable = {BLA_capitalist_opinion = -5}}
    BLA_check_capitalist_opinion = yes
    }
}
#降低实业家好感-大
BLA_decrease_capitalist_opinion_big = {
    custom_effect_tooltip = BLA_decrease_capitalist_opinion_big_desc
    hidden_effect = {
    BLA = {add_to_variable = {BLA_capitalist_opinion = -10}}
    BLA_check_capitalist_opinion = yes
    }
}
#提高自由民好感
BLA_increase_freeman_opinion = {
    custom_effect_tooltip = BLA_increase_freeman_opinion_desc
    hidden_effect = {
    BLA = {add_to_variable = {BLA_freeman_opinion = 5}}
    BLA_check_freeman_opinion = yes
    }
}
#提高自由民好感-大
BLA_increase_freeman_opinion_big = {
    custom_effect_tooltip = BLA_increase_freeman_opinion_big_desc
    hidden_effect = {
    BLA = {add_to_variable = {BLA_freeman_opinion = 10}}
    BLA_check_freeman_opinion = yes
    }
}
#降低自由民好感
BLA_decrease_freeman_opinion = {
    custom_effect_tooltip = BLA_decrease_freeman_opinion_desc
    hidden_effect = {
    BLA = {add_to_variable = {BLA_freeman_opinion = -5}}
    BLA_check_freeman_opinion = yes
    }
}
#降低自由民好感-大
BLA_decrease_freeman_opinion_big = {
    custom_effect_tooltip = BLA_decrease_freeman_opinion_big_desc
    hidden_effect = {
    BLA = {add_to_variable = {BLA_freeman_opinion = -10}}
    BLA_check_freeman_opinion = yes
    }
}
#提高农奴好感
BLA_increase_serf_opinion = {
    custom_effect_tooltip = BLA_increase_serf_opinion_desc
    hidden_effect = {
    BLA = {add_to_variable = {BLA_serf_opinion = 5}}
    BLA_check_serf_opinion = yes
    }
}
#提高农奴好感-大
BLA_increase_serf_opinion_big = {
    custom_effect_tooltip = BLA_increase_serf_opinion_big_desc
    hidden_effect = {
    BLA = {add_to_variable = {BLA_serf_opinion = 10}}
    BLA_check_serf_opinion = yes
    }
}
#降低农奴好感
BLA_decrease_serf_opinion = {
    custom_effect_tooltip = BLA_decrease_serf_opinion_desc
    hidden_effect = {
    BLA = {add_to_variable = {BLA_serf_opinion = -5}}
    BLA_check_serf_opinion = yes
    }
}
#降低农奴好感-大
BLA_decrease_serf_opinion_big = {
    custom_effect_tooltip = BLA_decrease_serf_opinion_big_desc
    hidden_effect = {
    BLA = {add_to_variable = {BLA_serf_opinion = -10}}
    BLA_check_serf_opinion = yes
    }
}
#提高所有好感
BLA_increase_all_opinion = {
    custom_effect_tooltip = BLA_increase_all_opinion_desc
    hidden_effect = {
    BLA = {add_to_variable = {BLA_nobility_opinion = 5}}
    BLA_check_nobility_opinion = yes
    BLA = {add_to_variable = {BLA_church_opinion = 5}}
    BLA_check_church_opinion = yes
    BLA = {add_to_variable = {BLA_army_opinion = 5}}
    BLA_check_army_opinion = yes
    BLA = {add_to_variable = {BLA_capitalist_opinion = 5}}
    BLA_check_capitalist_opinion = yes
    BLA = {add_to_variable = {BLA_freeman_opinion = 5}}
    BLA_check_freeman_opinion = yes
    BLA = {add_to_variable = {BLA_serf_opinion = 5}}
    BLA_check_serf_opinion = yes
    }
}
#降低所有好感
BLA_decrease_all_opinion = {
    custom_effect_tooltip = BLA_decrease_all_opinion_desc
    hidden_effect = {
        BLA_decrease_nobility_opinion = yes
        BLA_decrease_church_opinion = yes
        BLA_decrease_army_opinion = yes
        BLA_decrease_capitalist_opinion = yes
        BLA_decrease_freeman_opinion = yes
        BLA_decrease_serf_opinion = yes
    }
}
#检测贵族好感
BLA_check_nobility_opinion = {
    BLA = {
        clamp_variable = {
            var = BLA_nobility_opinion
            max = 100
            min = -100
        }
        if = {
            limit = {
                check_variable = {BLA_nobility_opinion < -75}
                NOT = {has_country_flag = BLA_nobility_plot_triggered}
            }   
            country_event = {id = BLA_pol.999}
            set_country_flag = BLA_nobility_plot_triggered
        }
    }
}
#检测教会好感
BLA_check_church_opinion = {
    BLA = {
        clamp_variable = {
            var = BLA_church_opinion
            max = 100
            min = -100
        }
    }
}
#检测军队好感
BLA_check_army_opinion = {
    BLA = {
        clamp_variable = {
            var = BLA_army_opinion
            max = 100
            min = -100
        }
    }
}
#检测实业家好感
BLA_check_capitalist_opinion = {
    BLA = {
        clamp_variable = {
            var = BLA_capitalist_opinion
            max = 100
            min = -100
        }
    }
}
#检测自由民好感
BLA_check_freeman_opinion = {
    BLA = {
        clamp_variable = {
            var = BLA_freeman_opinion
            max = 100
            min = -100
        }
    }
}
#检测农奴好感
BLA_check_serf_opinion = {
    BLA = {
        clamp_variable = {
            var = BLA_serf_opinion
            max = 100
            min = -100
        }
    }
}
#每周变化
BLA_opinion_weekly_change = {
    BLA = {
        set_variable = {BLA_nobility_opinion_change_t = 0}
        set_variable = {BLA_church_opinion_change_t = 0}
        set_variable = {BLA_army_opinion_change_t = 0}
        set_variable = {BLA_capitalist_opinion_change_t = 0}
        set_variable = {BLA_freeman_opinion_change_t = 0}
        set_variable = {BLA_serf_opinion_change_t = 0}
        add_to_variable = {BLA_nobility_opinion_change_t = modifier@BLA_nobility_opinion_modifier}
        add_to_variable = {BLA_church_opinion_change_t = modifier@BLA_church_opinion_modifier}
        add_to_variable = {BLA_army_opinion_change_t = modifier@BLA_army_opinion_modifier}
        add_to_variable = {BLA_capitalist_opinion_change_t = modifier@BLA_capitalist_opinion_modifier}
        add_to_variable = {BLA_freeman_opinion_change_t = modifier@BLA_freeman_opinion_modifier}
        add_to_variable = {BLA_serf_opinion_change_t = modifier@BLA_serf_opinion_modifier}
        add_to_variable = {BLA_nobility_opinion = BLA_nobility_opinion_change}
        add_to_variable = {BLA_nobility_opinion = BLA_nobility_opinion_change_t}
        add_to_variable = {BLA_church_opinion = BLA_church_opinion_change}
        add_to_variable = {BLA_church_opinion = BLA_church_opinion_change_t}
        add_to_variable = {BLA_army_opinion = BLA_army_opinion_change}
        add_to_variable = {BLA_army_opinion = BLA_army_opinion_change_t}
        add_to_variable = {BLA_capitalist_opinion = BLA_capitalist_opinion_change}
        add_to_variable = {BLA_capitalist_opinion = BLA_capitalist_opinion_change_t}
        add_to_variable = {BLA_freeman_opinion = BLA_freeman_opinion_change}
        add_to_variable = {BLA_freeman_opinion = BLA_freeman_opinion_change_t}
        add_to_variable = {BLA_serf_opinion = BLA_serf_opinion_change}
        add_to_variable = {BLA_serf_opinion = BLA_serf_opinion_change_t}
        BLA_check_nobility_opinion = yes
        BLA_check_church_opinion = yes
        BLA_check_army_opinion = yes
        BLA_check_capitalist_opinion = yes
        BLA_check_freeman_opinion = yes
        BLA_check_serf_opinion = yes
    }
}
#刷新动态修正
BLA_update_rot = {
    hidden_effect = {
        BLA = {
            set_variable = {BLA_dynamic_stability_factor = BLA_stability_factor}
			set_variable = {BLA_dynamic_political_power_gain = BLA_political_power_gain}
			set_variable = {BLA_dynamic_army_morale_factor = BLA_army_morale_factor}
			set_variable = {BLA_dynamic_army_attack_factor = BLA_army_attack_factor}
			set_variable = {BLA_dynamic_army_defence_factor = BLA_army_defence_factor}
			set_variable = {BLA_dynamic_consumer_goods_factor = BLA_consumer_goods_factor}
            set_variable = {BLA_dynamic_industrial_capacity_factory_2 = BLA_industrial_capacity_factory}
			set_variable = {BLA_dynamic_conscription_factor = BLA_conscription_factor}
			set_variable = {BLA_dynamic_communism_drift = BLA_communism_drift}
			set_variable = {BLA_dynamic_democratic_drift = BLA_democratic_drift}
			multiply_variable = { BLA_dynamic_stability_factor = BLA_nobility_opinion} #贵族
			multiply_variable = { BLA_dynamic_political_power_gain = BLA_church_opinion} #教会
			multiply_variable = { BLA_dynamic_army_morale_factor = BLA_church_opinion} #教会
			multiply_variable = { BLA_dynamic_army_attack_factor = BLA_army_opinion} #军队
			multiply_variable = { BLA_dynamic_army_defence_factor = BLA_army_opinion} #军队
			multiply_variable = { BLA_dynamic_consumer_goods_factor = BLA_capitalist_opinion} #实业家
            multiply_variable = { BLA_dynamic_industrial_capacity_factory_2 = BLA_capitalist_opinion} #实业家
			multiply_variable = { BLA_dynamic_conscription_factor = BLA_freeman_opinion} #自由民
			multiply_variable = { BLA_dynamic_democratic_drift = BLA_serf_opinion} #农奴
			multiply_variable = { BLA_dynamic_communism_drift = BLA_serf_opinion} #农奴
			multiply_variable = { BLA_dynamic_democratic_drift = 0.35} #农奴
			multiply_variable = { BLA_dynamic_communism_drift = 0.65} #农奴
            if = {
                limit = {
                    has_completed_focus = BLA_Anna_reform_7
                }
                add_to_variable = {BLA_dynamic_army_attack_factor = 0.05}
                add_to_variable = {BLA_dynamic_army_defence_factor = 0.05}
            }
        }
    }
}
#随机获得一个把柄
BLA_gain_random_secret = {
    custom_effect_tooltip = BLA_gain_random_secret_desc
    hidden_effect = {
        BLA = {
            random_list = {
                25 = {
                    add_to_variable = {BLA_nobility_secret = 1}
                }
                25 = {
                    add_to_variable = {BLA_church_secret = 1}
                }
                25 = {
                    add_to_variable = {BLA_army_secret = 1}
                }
                25 = {
                    add_to_variable = {BLA_capitalist_secret = 1}
                }
            }
        }
    }
}
BLA_change_fund = {
    custom_effect_tooltip = BLA_change_fund_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_industralization_fund = BLA_industralization_fund_temp}
            clamp_variable = {
                var = BLA_industralization_fund
                min = 0
            }
        }
    }
}
#计算贵族税收
BLA_calculate_nobility_tax = {
    if = {
        limit = {
            BLA = {check_variable = {BLA_nobility_opinion > 0}}
        }
        BLA = {
            set_variable = {BLA_nobility_tax = 0}
            set_variable = {BLA_nobility_tax = BLA_nobility_basic_tax}
            multiply_variable = {BLA_nobility_tax = BLA_nobility_opinion}
        }
    }
    if = {
        limit = {
            BLA = {check_variable = {BLA_nobility_tax < 5}}
        }
        BLA = {
            set_variable = {BLA_nobility_tax = 5}
        }
    }
}
#计算教会税收
BLA_calculate_church_tax = {
    if = {
        limit = {
            BLA = {check_variable = {BLA_church_opinion > 0}}
        }
        BLA = {
            set_variable = {BLA_church_tax = 0}
            set_variable = {BLA_church_tax = BLA_church_basic_tax}
            multiply_variable = {BLA_church_tax = BLA_church_opinion}
        }
    }
    else = {
        BLA = {set_variable = {BLA_church_tax = 0}}
    }
}
#计算资本家税收
BLA_calculate_capitalist_tax = {
    if = {
        limit = {
            BLA = {check_variable = {BLA_capitalist_opinion > 0}}
        }
        BLA = {
            set_variable = {BLA_capitalist_tax = 0}
            set_variable = {BLA_capitalist_tax = BLA_capitalist_basic_tax}
            multiply_variable = {BLA_capitalist_tax = BLA_capitalist_opinion}
        }
    }
    if = {
        limit = {
            BLA = {check_variable = {BLA_capitalist_tax < 5}}
        }
        BLA = {
            set_variable = {BLA_capitalist_tax = 5}
        }
    }
}
#结算再投资
BLA_calculate_reinvest = {
    BLA = {
        set_variable = {BLA_revenue = 0}
        set_variable = {BLA_revenue_c = num_of_civilian_factories}
		multiply_variable = {BLA_revenue_c = 0.6}
		set_variable = {BLA_revenue_m = num_of_military_factories}
		multiply_variable = {BLA_revenue_m = 0.2}
		set_variable = {BLA_revenue_d = num_of_naval_factories}
		multiply_variable = {BLA_revenue_d = 0.2}
		add_to_variable = {BLA_revenue = BLA_revenue_c}
		add_to_variable = {BLA_revenue = BLA_revenue_m}
		add_to_variable = {BLA_revenue = BLA_revenue_d}
    }
}
#计算总体债务
BLA_calculate_total_debt = {
    BLA = {
        set_variable = {BLA_debt = 0}
        clamp_variable = {
            var = BLA_other_debt
            min = 0
        }
        clamp_variable = {
            var = BLA_ELN_debt
            min = 0
        }
        clamp_variable = {
            var = BLA_ANZ_debt
            min = 0
        }
        clamp_variable = {
            var = BLA_USR_debt
            min = 0
        }
        clamp_variable = {
            var = BLA_USF_debt
            min = 0
        }
        clamp_variable = {
            var = BLA_STG_debt
            min = 0
        }
        clamp_variable = {
            var = BLA_UNG_debt
            min = 0
        }
        every_country = {
            limit = {
                OR = {
                    tag = ELN
                    tag = USF
                    tag = USR
                    tag = OCF
                    tag = STG
                    tag = ANZ
                    tag = UNG
                }
                OR = {
                    has_war_with = BLA
                    exists = no
                }
            }
            set_temp_variable = {target = THIS}
            BLA = {
                meta_effect = { 
                    text = {
                        set_variable = {BLA_[TARGET]_debt = 0}
                    }
                    TARGET = "[?target.GetTag]"
                }
            }
        }
        add_to_variable = {BLA_debt = BLA_other_debt}
        add_to_variable = {BLA_debt = BLA_ELN_debt}
        add_to_variable = {BLA_debt = BLA_ANZ_debt}
        add_to_variable = {BLA_debt = BLA_USR_debt}
        add_to_variable = {BLA_debt = BLA_USF_debt}
        add_to_variable = {BLA_debt = BLA_STG_debt}
        add_to_variable = {BLA_debt = BLA_UNG_debt}
        set_variable = {BLA_total_interest = BLA_debt}
		multiply_variable = {BLA_total_interest = 0.01}
    }

}
#计算总体收入
BLA_calculate_total_tax = {
    BLA = {
        set_variable = {BLA_industralization_fund_t = 0}
        add_to_variable = {BLA_industralization_fund_t = BLA_nobility_tax}
        add_to_variable = {BLA_industralization_fund_t = BLA_church_tax}
        add_to_variable = {BLA_industralization_fund_t = BLA_capitalist_tax}
        add_to_variable = {BLA_industralization_fund_t = BLA_freeman_tax}
        add_to_variable = {BLA_industralization_fund_t = BLA_serf_tax}
        add_to_variable = {BLA_industralization_fund_t = BLA_foreign_investment}
        add_to_variable = {BLA_industralization_fund_t = BLA_extra}
        add_to_variable = {BLA_industralization_fund_t = BLA_revenue}
        log = "[GetDateText]: [Root.GetName]: 修正前总和 [?BLA.BLA_industralization_fund_t] 税收效率 [?BLA.modifier@BLA_fund_gain_efficiency_modifier]"
        multiply_variable = {BLA_industralization_fund_t = modifier@BLA_fund_gain_efficiency_modifier}
        set_variable = {BLA_fund_gain_efficiency_factor_modifier_t = 1}
        add_to_variable = {BLA_fund_gain_efficiency_factor_modifier_t = modifier@BLA_fund_gain_efficiency_factor_modifier}
        multiply_variable = {BLA_industralization_fund_t = BLA_fund_gain_efficiency_factor_modifier_t}
        log = "[GetDateText]: [Root.GetName]: 修正后总和 [?BLA.BLA_industralization_fund_t] 税收效率 [?BLA.modifier@BLA_fund_gain_efficiency_modifier] 税收效率修正 [?BLA_fund_gain_efficiency_factor_modifier_t]"
        add_to_variable = {BLA_industralization_fund = BLA_industralization_fund_t}
        subtract_from_variable = {BLA_industralization_fund = BLA_total_interest}
    }
}
#检测工业化状况
BLA_check_industralization = {
    BLA = {
        if = {
            limit = {
                check_variable = {num_of_factories > BLA_industralization_target}
                check_variable = {BLA_industralization_status < 11}
            }
            BLA_upgrade_industralization = yes
            add_to_variable = {BLA_industralization_target = 10}
        }
    }
}
#提高工业化水平
BLA_upgrade_industralization = {
    BLA = {
        add_to_variable = {BLA_industralization_status = 1}
        add_to_variable = {BLA_dynamic_industrial_capacity_factory = 0.05}
        add_to_variable = {BLA_dynamic_industrial_capacity_dockyard = 0.05}
        add_to_variable = {BLA_dynamic_production_factory_max_efficiency_factor = 0.025}
        add_to_variable = {BLA_dynamic_production_speed_buildings_factor = 0.025}
        add_to_variable = {BLA_dynamic_local_resources_factor = 0.065}
        add_to_variable = {BLA_freeman_tax = 5}
        add_to_variable = {BLA_capitalist_basic_tax = 0.03}
        if = {
            limit = {
                check_variable = {BLA_industralization_status = 5}
            }
            country_event = {id = BLA_general.50}
        }
        if = {
            limit = {
                check_variable = {BLA_industralization_status = 10}
            }
            country_event = {id = BLA_general.51}
        }
    }
}
#大博弈的结果
Big_Game_result_effect = {
    custom_effect_tooltip = Big_Game_result_effect_desc
    hidden_effect = {
        #给懒狗准备的
        if = {
            limit = {
                NAC = {
                    AND = {
                        NOT = {
                            has_country_flag = Big_Game_E
                        }
                        NOT = {
                            has_country_flag = Big_Game_W
                        }
                        NOT = {
                            has_country_flag = Big_Game_S
                        }
                    }
                }
            }
            NAC = {
                random_list = {
                    33 = {
                        set_country_flag = Big_Game_E
                    }
                    33 = {
                        set_country_flag = Big_Game_W
                    }
                    33 = {
                        set_country_flag = Big_Game_S
                    }
                }
            }
        }
        if = {
            limit = {
                BLA = {
                    AND = {
                        NOT = {
                            has_country_flag = Big_Game_E
                        }
                        NOT = {
                            has_country_flag = Big_Game_W
                        }
                        NOT = {
                            has_country_flag = Big_Game_S
                        }
                    }
                }
            }
            BLA = {
                random_list = {
                    33 = {
                        set_country_flag = Big_Game_E
                    }
                    33 = {
                        set_country_flag = Big_Game_W
                    }
                    33 = {
                        set_country_flag = Big_Game_S
                    }
                }
            }
        }
        if = {
            limit = {
                NAC = {has_country_flag = Big_Game_E}
                BLA = {
                    NOT = {has_country_flag = Big_Game_E}
                }
            }
            every_country = {
                add_to_variable = {NAC_E_control_point = 1}
                add_to_variable = {NAC_E_control_point = NAC_Big_Game_Extra_Point}
            }
        }
        if = {
            limit = {
                NAC = {has_country_flag = Big_Game_S}
                BLA = {
                    NOT = {has_country_flag = Big_Game_S}
                }
            }
            every_country = {
                add_to_variable = {NAC_S_control_point = 1}
                add_to_variable = {NAC_S_control_point = NAC_Big_Game_Extra_Point}
            }
        }
        if = {
            limit = {
                NAC = {has_country_flag = Big_Game_W}
                BLA = {
                    NOT = {has_country_flag = Big_Game_W}
                }
            }
            every_country = {
                add_to_variable = {NAC_W_control_point = 1}
                add_to_variable = {NAC_W_control_point = NAC_Big_Game_Extra_Point}
            }
        }
        if = {
            limit = {
                BLA = {has_country_flag = Big_Game_E}
                NAC = {
                    NOT = {has_country_flag = Big_Game_E}
                }
            }
            every_country = {
                add_to_variable = {BLA_E_control_point = 1}
                add_to_variable = {BLA_E_control_point = BLA_Big_Game_Extra_Point}
            }
        }
        if = {
            limit = {
                BLA = {has_country_flag = Big_Game_S}
                NAC = {
                    NOT = {has_country_flag = Big_Game_S}
                }
            }
            every_country = {
                add_to_variable = {BLA_S_control_point = 1}
                add_to_variable = {BLA_S_control_point = BLA_Big_Game_Extra_Point}
            }
        }
        if = {
            limit = {
                BLA = {has_country_flag = Big_Game_W}
                NAC = {
                    NOT = {has_country_flag = Big_Game_W}
                }
            }
            every_country = {
                add_to_variable = {BLA_W_control_point = 1}
                add_to_variable = {BLA_W_control_point = BLA_Big_Game_Extra_Point}
            }
        }
        if = {
            limit = {
                BLA = {has_country_flag = Big_Game_W}
                NAC = {has_country_flag = Big_Game_W}
            }
            every_country = {
                random_list = {
                    25 = {
                        add_to_variable = {BLA_W_control_point = 2}
                    }
                    25 = {
                        add_to_variable = {BLA_W_control_point = 1}
                    }
                    25 = {
                        add_to_variable = {BLA_W_control_point = -1}
                    }
                    25 = {
                        add_to_variable = {BLA_W_control_point = -2}
                    }
                }
            }
            every_country = {
                random_list = {
                    25 = {
                        add_to_variable = {NAC_W_control_point = 2}
                    }
                    25 = {
                        add_to_variable = {NAC_W_control_point = 1}
                    }
                    25 = {
                        add_to_variable = {NAC_W_control_point = -1}
                    }
                    25 = {
                        add_to_variable = {NAC_W_control_point = -2}
                    }
                }
            }
        }
        if = {
            limit = {
                BLA = {has_country_flag = Big_Game_S}
                NAC = {has_country_flag = Big_Game_S}
            }
            every_country = {
                random_list = {
                    25 = {
                        add_to_variable = {BLA_S_control_point = 2}
                    }
                    25 = {
                        add_to_variable = {BLA_S_control_point = 1}
                    }
                    25 = {
                        add_to_variable = {BLA_S_control_point = -1}
                    }
                    25 = {
                        add_to_variable = {BLA_S_control_point = -2}
                    }
                }
            }
            every_country = {
                random_list = {
                    25 = {
                        add_to_variable = {NAC_S_control_point = 2}
                    }
                    25 = {
                        add_to_variable = {NAC_S_control_point = 1}
                    }
                    25 = {
                        add_to_variable = {NAC_S_control_point = -1}
                    }
                    25 = {
                        add_to_variable = {NAC_S_control_point = -2}
                    }
                }
            }
        }
        if = {
            limit = {
                BLA = {has_country_flag = Big_Game_S}
                NAC = {has_country_flag = Big_Game_S}
            }
            every_country = {
                random_list = {
                    25 = {
                        add_to_variable = {BLA_E_control_point = 2}
                    }
                    25 = {
                        add_to_variable = {BLA_E_control_point = 1}
                    }
                    25 = {
                        add_to_variable = {BLA_E_control_point = -1}
                    }
                    25 = {
                        add_to_variable = {BLA_E_control_point = -2}
                    }
                }
            }
            every_country = {
                random_list = {
                    25 = {
                        add_to_variable = {NAC_E_control_point = 2}
                    }
                    25 = {
                        add_to_variable = {NAC_E_control_point = 1}
                    }
                    25 = {
                        add_to_variable = {NAC_E_control_point = -1}
                    }
                    25 = {
                        add_to_variable = {NAC_E_control_point = -2}
                    }
                }
            }
        }
        if = {
            limit = {
                BLA = {
                    communism < 0.10
                }
            }
            every_country = {
                add_to_variable = {BLA_E_control_point = 0.15}
                add_to_variable = {BLA_W_control_point = 0.15}
                add_to_variable = {BLA_S_control_point = 0.15}
            }
        }
        else_if = {
            limit = {
                BLA = {
                    communism < 0.05
                }
            }
            every_country = {
                add_to_variable = {BLA_E_control_point = 0.20}
                add_to_variable = {BLA_W_control_point = 0.20}
                add_to_variable = {BLA_S_control_point = 0.20}
            }
        }
        if = {
            limit = {
                BLA = {
                    communism > 0.30
                }
            }
            every_country = {
                add_to_variable = {NAC_E_control_point = 0.5}
                add_to_variable = {NAC_W_control_point = 0.5}
                add_to_variable = {NAC_S_control_point = 0.5}
            }
        }
        else_if = {
            limit = {
                BLA = {
                    communism > 0.25
                }
            }
            every_country = {
                add_to_variable = {NAC_E_control_point = 0.25}
                add_to_variable = {NAC_W_control_point = 0.25}
                add_to_variable = {NAC_S_control_point = 0.25}
            }
        }
        else_if = {
            limit = {
                BLA = {
                    communism > 0.20
                }
            }
            every_country = {
                add_to_variable = {NAC_E_control_point = 0.20}
                add_to_variable = {NAC_W_control_point = 0.20}
                add_to_variable = {NAC_S_control_point = 0.20}
            }
        }
        else_if = {
            limit = {
                BLA = {
                    communism > 0.15
                }
            }
            every_country = {
                add_to_variable = {NAC_E_control_point = 0.15}
                add_to_variable = {NAC_W_control_point = 0.15}
                add_to_variable = {NAC_S_control_point = 0.15}
            }
        }
        else_if = {
            limit = {
                BLA = {
                    communism > 0.10
                }
            }
            every_country = {
                add_to_variable = {NAC_E_control_point = 0.10}
                add_to_variable = {NAC_W_control_point = 0.10}
                add_to_variable = {NAC_S_control_point = 0.10}
            }
        }
        every_country = {
            if = {
                limit = {
                    check_variable = {
                        NAC_W_control_point > 0
                    }
                }
                clamp_variable = {
                    var = NAC_W_control_point
                    min = 0
                }
            }
            if = {
                limit = {
                    check_variable = {
                        NAC_S_control_point > 0
                    }
                }
                clamp_variable = {
                    var = NAC_S_control_point
                    min = 0
                }
            }
            if = {
                limit = {
                    check_variable = {
                        NAC_E_control_point > 0
                    }
                }
                clamp_variable = {
                    var = NAC_E_control_point
                    min = 0
                }
            }
            clr_country_flag = Big_Game_W
            clr_country_flag = Big_Game_S
            clr_country_flag = Big_Game_E
            clr_country_flag = Extra_input_flag
            clr_country_flag = Made_a_choice_in_Big_Game
            set_variable = {NAC_Big_Game_Extra_Point = 0}
        }
        every_country = {
            if = {
                limit = {
                    check_variable = {
                        BLA_W_control_point > 0
                    }
                }
                clamp_variable = {
                    var = BLA_W_control_point
                    min = 0
                }
            }
            if = {
                limit = {
                    check_variable = {
                        BLA_S_control_point > 0
                    }
                }
                clamp_variable = {
                    var = BLA_S_control_point
                    min = 0
                }
            }
            if = {
                limit = {
                    check_variable = {
                        BLA_E_control_point > 0
                    }
                }
                clamp_variable = {
                    var = BLA_E_control_point
                    min = 0
                }
            }
            clr_country_flag = Big_Game_W
            clr_country_flag = Big_Game_S
            clr_country_flag = Big_Game_E
            clr_country_flag = Extra_input_flag
            clr_country_flag = Made_a_choice_in_Big_Game
            set_variable = {BLA_Big_Game_Extra_Point = 0}
        }
    }
}
Rossiya_Revolution_BLA_army_effect = {
    hidden_effect = {
        BLA = {
            if = {
                limit = {
                    NOT = {
                        has_template = "帝国征召军"
                    }
                }
                division_template = {
                    name = "帝国征召军"
                    is_locked = no
                    priority = 0
                    regiments = {
                        infantry = { x = 0 y = 0 }
                        infantry = { x = 0 y = 1 }
                        infantry = { x = 1 y = 0 }
                        infantry = { x = 1 y = 1 }
                        infantry = { x = 2 y = 0 }
                        infantry = { x = 2 y = 1 }
                    }
                    support = {
                        artillery = {x = 0 y = 0}
                    }
                }
            }
        }
        create_unit = {
            division = "name = \"帝国征召军\" division_template = \"帝国征召军\" start_experience_factor = 0.15"
            owner = BLA
        }
        create_unit = {
            division = "name = \"帝国征召军\" division_template = \"帝国征召军\" start_experience_factor = 0.15"
            owner = BLA
        }
        create_unit = {
            division = "name = \"帝国征召军\" division_template = \"帝国征召军\" start_experience_factor = 0.15"
            owner = BLA
        }
        create_unit = {
            division = "name = \"帝国征召军\" division_template = \"帝国征召军\" start_experience_factor = 0.15"
            owner = BLA
        }
        create_unit = {
            division = "name = \"帝国征召军\" division_template = \"帝国征召军\" start_experience_factor = 0.15"
            owner = BLA
        }
        create_unit = {
            division = "name = \"帝国征召军\" division_template = \"帝国征召军\" start_experience_factor = 0.15"
            owner = BLA
        }
    }
}
Rossiya_Revolution_NAC_army_effect = {
    hidden_effect = {
        NAC = {
            if = {
                limit = {
                    NOT = {
                        has_template = "真理解放军"
                    }
                }
                division_template = {
                    name = "真理解放军"
                    regiments = {
                        infantry = { x = 0 y = 0 }
                        infantry = { x = 0 y = 1 }
                        infantry = { x = 1 y = 0 }
                        infantry = { x = 1 y = 1 }
                        infantry = { x = 2 y = 0 }
                        infantry = { x = 2 y = 1 }
                    }
                    support = {
                        artillery = {x = 0 y = 0}
                    }
                }
            }
            if = {
                limit = {
                    NOT = {
                        has_template = "罗西亚红军"
                    }
                }
                division_template = {
                    name = "罗西亚红军"
                    regiments = {
                        infantry = { x = 0 y = 0 }
                        infantry = { x = 0 y = 1 }
                        infantry = { x = 0 y = 2 }
                        infantry = { x = 1 y = 0 }
                        infantry = { x = 1 y = 1 }
                        infantry = { x = 1 y = 2 }
                        artillery_brigade = { x = 2 y = 0 }
                    }
                }
            }
            if = {
                limit = {
                    NOT = {
                        has_template = "自由农民旅"
                    }
                }
                division_template = {
                    name = "自由农民旅"
                    is_locked = yes
                    regiments = {
                        militia = { x = 0 y = 0 }
                        militia = { x = 0 y = 1 }
                        militia = { x = 0 y = 2 }
                        militia = { x = 1 y = 0 }
                        militia = { x = 1 y = 1 }
                        militia = { x = 1 y = 2 }
                    }
                }
            }
        }
        create_unit = {
            division = "name = \"真理解放军\" division_template = \"真理解放军\" start_experience_factor = 0.15"
            owner = NAC
        }
        create_unit = {
            division = "name = \"真理解放军\" division_template = \"真理解放军\" start_experience_factor = 0.15"
            owner = NAC
        }
        create_unit = {
            division = "name = \"罗西亚红军\" division_template = \"罗西亚红军\" start_experience_factor = 0.25"
            owner = NAC
        }
		create_unit = {
            division = "name = \"罗西亚红军\" division_template = \"罗西亚红军\" start_experience_factor = 0.25"
            owner = NAC
        }
        create_unit = {
            division = "name = \"自由农民旅\" division_template = \"自由农民旅\" start_experience_factor = 0.25"
            owner = NAC
        }
        create_unit = {
            division = "name = \"自由农民旅\" division_template = \"自由农民旅\" start_experience_factor = 0.25"
            owner = NAC
        }
        if = {
            limit = {
                is_historical_focus_on = yes 
                NAC = {is_ai = yes}
            }
            create_unit = {
                division = "name = \"自由农民旅\" division_template = \"自由农民旅\" start_experience_factor = 0.25"
                owner = NAC
            }
        }
    }
}
Rossiya_Revolution_ORE_army_effect = {
    hidden_effect = {
        ORE = {
            if = {
                limit = {
                    NOT = {
                        has_template = "奥伦堡民兵"
                    }
                }
                division_template = {
                    name = "奥伦堡民兵"
                    regiments = {
                        infantry = { x = 0 y = 0 }
                        infantry = { x = 0 y = 1 }
                        infantry = { x = 0 y = 2 }
                        infantry = { x = 1 y = 0 }
                        infantry = { x = 1 y = 1 }
                        infantry = { x = 1 y = 2 }
                        artillery_brigade = {x = 2 y = 0}
                    }
                    support = {
                        engineer = {x = 0 y = 0}
                    }
                }
            }
            if = {
                limit = {
                    NOT = {
                        has_template = "自由农民旅"
                    }
                }
                division_template = {
                    name = "自由农民旅"
                    regiments = {
                        militia = { x = 0 y = 0 }
                        militia = { x = 0 y = 1 }
                        militia = { x = 0 y = 2 }
                        militia = { x = 1 y = 0 }
                        militia = { x = 1 y = 1 }
                        militia = { x = 1 y = 2 }
                    }
                }
            }
        }
        create_unit = {
            division = "name = \"奥伦堡民兵\" division_template = \"奥伦堡民兵\" start_experience_factor = 0.3"
            owner = ORE
        }
        create_unit = {
            division = "name = \"奥伦堡民兵\" division_template = \"奥伦堡民兵\" start_experience_factor = 0.3"
            owner = ORE
        }
        create_unit = {
            division = "name = \"奥伦堡民兵\" division_template = \"奥伦堡民兵\" start_experience_factor = 0.3"
            owner = ORE
        }
        create_unit = {
            division = "name = \"自由农民旅\" division_template = \"自由农民旅\" start_experience_factor = 0.15"
            owner = ORE
        }
        create_unit = {
            division = "name = \"自由农民旅\" division_template = \"自由农民旅\" start_experience_factor = 0.15"
            owner = ORE
        }
    }
}
Rossiya_Revolution_Map_effect = {
    custom_effect_tooltip = Big_GAME_END_DESC
    hidden_effect = {
        if = {
            limit = {
                is_historical_focus_on = yes
                BLA = {
                    is_ai = yes
                }
                NAC = {
                    is_ai = yes
                }
            }
            every_country = {
                add_to_variable = {NAC_E_control_point = 50}
                add_to_variable = {NAC_W_control_point = 50}
                add_to_variable = {NAC_S_control_point = 50}
            }
        }
        if = {
            limit = {
                BLA = {
                    has_idea = BLA_serfdom
                }
            }
            every_country = {
                add_to_variable = {NAC_E_control_point = 8}
                add_to_variable = {NAC_W_control_point = 8}
                add_to_variable = {NAC_S_control_point = 8}
            }
        }
        76 = {
            Rossiya_Revolution_NAC_army_effect = yes
        }
        if = {
            limit = {
                BLA = {
                    check_variable = {
                        var = NAC.NAC_W_control_point
                        value = BLA.BLA_W_control_point
                        compare = greater_than_or_equals
                    }
                }
            }
            146 = {
                transfer_state_to = NAC
                Rossiya_Revolution_NAC_army_effect = yes
            }
            194 = {
                transfer_state_to = NAC
                Rossiya_Revolution_NAC_army_effect = yes
            }
            123 = {
                transfer_state_to = NAC
                Rossiya_Revolution_NAC_army_effect = yes
            }
            208 = {
                transfer_state_to = NAC
                Rossiya_Revolution_NAC_army_effect = yes
            }
        }
        else = {
            146 = {
                transfer_state_to = NAC
                Rossiya_Revolution_NAC_army_effect = yes
            }
            194 = {
                transfer_state_to = NAC
                Rossiya_Revolution_NAC_army_effect = yes
            }
        }
        if = {
            limit = {
                BLA = {
                    check_variable = {
                        var = NAC.NAC_S_control_point
                        value = BLA.BLA_S_control_point
                        compare = greater_than_or_equals
                    }
                }
            }
            265 = {
                transfer_state_to = NAC
                Rossiya_Revolution_NAC_army_effect = yes
            }
            256 = {
                transfer_state_to = NAC
                Rossiya_Revolution_NAC_army_effect = yes
            }
            248 = {
                transfer_state_to = NAC
                Rossiya_Revolution_NAC_army_effect = yes
            }
            849 = {
                transfer_state_to = NAC
                Rossiya_Revolution_NAC_army_effect = yes
            }
        }
        else = {
            265 = {
                transfer_state_to = NAC
                Rossiya_Revolution_NAC_army_effect = yes
            }
            256 = {
                transfer_state_to = NAC
                Rossiya_Revolution_NAC_army_effect = yes
            }
            849 = {
                transfer_state_to = NAC
                Rossiya_Revolution_NAC_army_effect = yes
            }
        }
        if = {
            limit = {
                BLA = {
                    check_variable = {
                        var = NAC.NAC_E_control_point
                        value = BLA.BLA_E_control_point
                        compare = greater_than_or_equals
                    }
                }
            }
            854 = {
                transfer_state_to = ORE
                add_core_of = ORE
                add_core_of = PSK
                Rossiya_Revolution_ORE_army_effect = yes
                Rossiya_Revolution_ORE_army_effect = yes
            }
        }
        else = {
            854 = {
                transfer_state_to = ORE
                add_core_of = ORE
                add_core_of = PSK
                Rossiya_Revolution_ORE_army_effect = yes
            }
        }
        891 = {
            transfer_state_to = PSK
            add_core_of = PSK
            add_core_of = ORE
        }
        NAC = {
            country_lock_all_division_template = no
            if = {
                limit = {
                    BLA = {check_variable = {BLA_serf_opinion < -75}}
                }
                NAC = {add_to_variable = {NAC_morale = 5}}
            }
            if = {
                limit = {
                    BLA = {check_variable = {BLA_serf_opinion < -50}}                    
                }
                NAC = {add_to_variable = {NAC_morale = 5}}
            }
            if = {
                limit = {
                    BLA = {check_variable = {BLA_serf_opinion < -25}}
                }
                NAC = {add_to_variable = {NAC_morale = 5}}
            }
            if = {
                limit = {
                    BLA = {check_variable = {BLA_serf_opinion < 0}}
                }
                NAC = {add_to_variable = {NAC_morale = 5}}
            }
            if = {
                limit = {
                    BLA = {check_variable = {BLA_serf_opinion > 0}}
                }
                NAC = {add_to_variable = {NAC_morale = -20}}
            }
            if = {
                limit = {
                    BLA = {check_variable = {BLA_army_opinion < 25}}
                }
                NAC = {add_to_variable = {NAC_morale = 5}}
                }
            if = {
                limit = {
                    BLA = {check_variable = {BLA_army_opinion < 0}}
                }
                NAC = {add_to_variable = {NAC_morale = 10}}
            }
            if = {
                limit = {
                    BLA = {check_variable = {BLA_freeman_opinion < 25}}
                }
                NAC = {add_to_variable = {NAC_morale = 5}}
            }
            if = {
                limit = {
                    BLA = {check_variable = {BLA_freeman_opinion < 0}}
                }
                NAC = {add_to_variable = {NAC_morale = 10}}
            }
        }
        ORE = {
            add_ideas = ORE_revolution_in_city
            set_politics = {
                ruling_party = communism
            }
            set_political_party = {
                ideology = communism
                popularity = 100
            }
            promote_character = {
                character = ORE_Valeri
                ideology = sub_democratic_socialism
            }
        }
        PSK = {
            inherit_technology = BLA
            add_ideas = Rossiya_imperial_legion
            country_lock_all_division_template = yes
            set_politics = {
                ruling_party = neutrality
            }
            set_political_party = {
                ideology = neutrality
                popularity = 100
            }
            division_template = {
                name = "帝国步兵师"
                priority = 2
                regiments = {
                    infantry = { x = 0 y = 0 }
                    infantry = { x = 0 y = 1 }
                    infantry = { x = 0 y = 2 }
                    infantry = { x = 1 y = 0 }
                    infantry = { x = 1 y = 1 }
                    infantry = { x = 1 y = 2 }
                    infantry = { x = 2 y = 0 }
                    infantry = { x = 2 y = 1 }
                    infantry = { x = 2 y = 2 }
                    artillery_brigade = {x = 3 y = 0}
                    artillery_brigade = {x = 3 y = 1}
                }
                support = {
                    engineer = {x = 0 y = 0}
                }
            }
            for_loop_effect = {
                start = 0
                end = 12
                every_owned_state = {
                    create_unit = {
                        division = "name = \"帝国步兵师\" division_template = \"帝国步兵师\" start_experience_factor = 0.3"
                        owner = PSK
                    }
                }
            }
        }
    }
}
#大博弈的最终结果
End_Big_Game = {
    set_global_flag = End_Big_Game_flag
    if = {
        limit = {
            BLA = {
                check_variable = {
                    var = NAC.NAC_W_control_point
                    value = BLA.BLA_W_control_point
                    compare = greater_than_or_equals
                }
            }
        }
        every_country = {
            add_to_variable = {NAC_VP = 1}
        }
    }
    else = {
        every_country = {
            add_to_variable = {BLA_VP = 1}
        }
    }
    if = {
        limit = {
            BLA = {
                check_variable = {
                    var = NAC.NAC_E_control_point
                    value = BLA.BLA_E_control_point
                    compare = greater_than_or_equals
                }
            }
        }
        every_country = {
            add_to_variable = {NAC_VP = 1}
        }
    }
    else = {
        every_country = {
            add_to_variable = {BLA_VP = 1}
        }
    }
    if = {
        limit = {
            BLA = {
                check_variable = {
                    var = NAC.NAC_S_control_point
                    value = BLA.BLA_S_control_point
                    compare = greater_than_or_equals
                }
            }
        }
        every_country = {
            add_to_variable = {NAC_VP = 1}
        }
    }
    else = {
        every_country = {
            add_to_variable = {BLA_VP = 1}
        }
    }
    NAC = {
        if = {
            limit = {
                check_variable = {NAC_VP = 0}
            }
            add_ideas = Big_Game_Total_Loser
            add_equipment_to_stockpile = {
                type = infantry_equipment
                amount = 5000
                producer = BLA
            }
        }
        else_if = {
            limit = {
                check_variable = {NAC_VP = 1}
            }
            add_ideas = Big_Game_Loser
            add_equipment_to_stockpile = {
                type = infantry_equipment
                amount = 10000
                producer = BLA
            }
        }
        else_if = {
            limit = {
                check_variable = {NAC_VP = 2}
            }
            add_ideas = Big_Game_Winner
            add_equipment_to_stockpile = {
                type = infantry_equipment
                amount = 15000
                producer = BLA
            }
            capital_scope = {
                Rossiya_Revolution_NAC_army_effect = yes
            }
        }
        else = {
            add_ideas = Big_Game_Total_Winner
            add_equipment_to_stockpile = {
                type = infantry_equipment
                amount = 20000
                producer = BLA
            }
            capital_scope = {
                Rossiya_Revolution_NAC_army_effect = yes
            }
        }
    }
    BLA = {
        if = {
            limit = {
                NOT = {
                    has_template = "帝国步兵师"
                }
            }
            division_template = {
                name = "帝国步兵师"
                regiments = {
                    infantry = { x = 0 y = 0 }
                    infantry = { x = 0 y = 1 }
                    infantry = { x = 0 y = 2 }
                    infantry = { x = 1 y = 0 }
                    infantry = { x = 1 y = 1 }
                    infantry = { x = 1 y = 2 }
                    artillery_brigade = { x = 2 y = 0 }
                    artillery_brigade = { x = 2 y = 1 }
                }
            }
        }
        if = {
            limit = {
                check_variable = {BLA_VP = 0}
            }
            add_ideas = Big_Game_Total_Loser
            set_variable = {BLA_mobalise_cost = 40}
            for_loop_effect = {
                start = 0
                end = 6
                capital_scope = {
                    create_unit = {
                        division = "name = \"帝国步兵师\" division_template = \"帝国步兵师\" start_experience_factor = 0.30"
                        owner = BLA
                    }
                }
            }
        }
        else_if = {
            limit = {
                check_variable = {BLA_VP = 1}
            }
            add_ideas = Big_Game_Loser
            set_variable = {BLA_mobalise_cost = 30}
            for_loop_effect = {
                start = 0
                end = 12
                capital_scope = {
                    create_unit = {
                        division = "name = \"帝国步兵师\" division_template = \"帝国步兵师\" start_experience_factor = 0.30"
                        owner = BLA
                    }
                }
            }
        }
        else_if = {
            limit = {
                check_variable = {BLA_VP = 2}
            }
            add_ideas = Big_Game_Winner
            set_variable = {BLA_mobalise_cost = 20}
            for_loop_effect = {
                start = 0
                end = 18
                capital_scope = {
                    create_unit = {
                        division = "name = \"帝国步兵师\" division_template = \"帝国步兵师\" start_experience_factor = 0.30"
                        owner = BLA
                    }
                }
            }
        }
        else = {
            add_ideas = Big_Game_Total_Winner
            set_variable = {BLA_mobalise_cost = 10}
            for_loop_effect = {
                start = 0
                end = 24
                capital_scope = {
                    create_unit = {
                        division = "name = \"帝国步兵师\" division_template = \"帝国步兵师\" start_experience_factor = 0.30"
                        owner = BLA
                    }
                }
            }
        }
    }
}
Clear_Big_Game_ideas = {
    hidden_effect = {
        remove_ideas = Big_Game_Total_Loser
        remove_ideas = Big_Game_Loser
        remove_ideas = Big_Game_Winner
        remove_ideas = Big_Game_Total_Winner
    }
}
Big_Game_Test = {
    hidden_effect = {
        every_country = {
            add_to_variable = {NAC_S_control_point = 100}
            add_to_variable = {NAC_W_control_point = 100}
            add_to_variable = {NAC_E_control_point = 100}
        }
    }
}
Big_game_Propaganda_effect = {
    if = {
        limit = {
            BLA = {
                is_ai = yes
            }
        }
        if = {
            limit = {
                BLA = {
                    check_variable = {
                    var = NAC_propaganda_counter
                    value = BLA_propaganda_counter
                    compare = greater_than_or_equals
                    }
                }
            }
            NAC = {
                country_event = {id = Rossiya_Propaganda.9}
            }
            BLA = {
                country_event = {id = Rossiya_Propaganda.11}
            }
        }
        else = {
            NAC = {
                country_event = {id = Rossiya_Propaganda.10}
            }
            BLA = {
                country_event = {id = Rossiya_Propaganda.12}
            }
        }
    }
    else = {
        if = {
            limit = {
                BLA = {
                    check_variable = {
                        var = NAC_propaganda_counter
                        value = BLA_propaganda_counter
                        compare = greater_than_or_equals
                    }
                }
            }
            BLA = {
                country_event = {id = Rossiya_Propaganda.11}
            }
            NAC = {
                country_event = {id = Rossiya_Propaganda.9}
            }
        }
        else = {
            BLA = {
                country_event = {id = Rossiya_Propaganda.12}
            }
            NAC = {
                country_event = {id = Rossiya_Propaganda.10}
            }
        }
    }
}
BLA_bop_move_leftward = {
    add_power_balance_value = {
        id = BLA_legacy_of_August
        value = -0.05
        tooltip_side = BLA_voice_of_people
    }
}
BLA_bop_move_leftward_big = {
    add_power_balance_value = {
        id = BLA_legacy_of_August
        value = -0.10
        tooltip_side = BLA_voice_of_people
    }
}
BLA_bop_move_rightward = {
    add_power_balance_value = {
        id = BLA_legacy_of_August
        value = 0.05
        tooltip_side = BLA_ice_dream
    }
}
BLA_bop_move_rightward_big = {
    add_power_balance_value = {
        id = BLA_legacy_of_August
        value = 0.10
        tooltip_side = BLA_ice_dream
    }
}
BLA_update_revolution_dynamic_modifier = {
    BLA = {
        if = {
            limit = {
                has_war_with = NAC
                NOT = {check_variable = {BLA_morale < -99}}
            }
            add_to_variable = {BLA_morale = -1}
            if = {
                limit = {
                    check_variable = {BLA_nobility_opinion > 59}
                }
                add_to_variable = {BLA_morale = 0.1}
            }
            if = {
                limit = {
                    check_variable = {BLA_church_opinion > 59}
                }
                add_to_variable = {BLA_morale = 0.1}
            }
            if = {
                limit = {
                    check_variable = {BLA_army_opinion > 59}
                }
                add_to_variable = {BLA_morale = 0.1}
            }
            if = {
                limit = {
                    check_variable = {BLA_freeman_opinion > 59}
                }
                add_to_variable = {BLA_morale = 0.15}
            }
            if = {
                limit = {
                    check_variable = {BLA_capitalist_opinion > 59}
                }
                add_to_variable = {BLA_morale = 0.1}
            }
            if = {
                limit = {
                    check_variable = {BLA_serf_opinion > 0}
                }
                add_to_variable = {BLA_morale = 0.15}
            }
            if = {
                limit = {
                    check_variable = {BLA_serf_opinion < 0}
                }
                add_to_variable = {BLA_morale = -0.15}
            }
        }
        NAC = {
            if = {
                limit = {
                    surrender_progress > 0.79
                }
                BLA = {add_to_variable = {BLA_morale = 0.25}}
            }
            if = {
                limit = {
                    surrender_progress > 0.59
                }
                BLA = {add_to_variable = {BLA_morale = 0.25}}
            }
            if = {
                limit = {
                    surrender_progress > 0.39
                }
                BLA = {add_to_variable = {BLA_morale = 0.25}}
            }
            if = {
                limit = {
                    surrender_progress > 0.19
                }
                BLA = {add_to_variable = {BLA_morale = 0.25}}
            }
        }
        clamp_variable = {
            var = BLA_morale
            max = 120
            min = -100
        }
        set_variable = {BLA_revolution_dynamic_army_attack_factor = BLA_army_attack_factor}
        set_variable = {BLA_revolution_dynamic_army_defence_factor = BLA_army_defence_factor}
        set_variable = {BLA_revolution_dynamic_army_morale_factor = BLA_rev_army_morale_factor}
        set_variable = {BLA_revolution_dynamic_army_org_factor = BLA_army_org_factor}
        set_variable = {BLA_revolution_dynamic_equipment_capture_factor = BLA_equipment_capture_factor}
        set_variable = {BLA_revolution_dynamic_land_reinforce_rate = BLA_land_reinforce_rate}
        multiply_variable = {BLA_revolution_dynamic_army_attack_factor = BLA_morale}
        multiply_variable = {BLA_revolution_dynamic_army_defence_factor = BLA_morale}
        multiply_variable = {BLA_revolution_dynamic_army_morale_factor = BLA_morale}
        multiply_variable = {BLA_revolution_dynamic_army_org_factor = BLA_morale}
        multiply_variable = {BLA_revolution_dynamic_land_reinforce_rate = BLA_morale}
        multiply_variable = {BLA_revolution_dynamic_equipment_capture_factor = BLA_morale}
    }
}
BLA_calculate_youth_agenda = {
    BLA = {
        set_variable = {BLA_youth_unity_factor = 0}
        if = {
            limit = {
                check_variable = {BLA_freeman_opinion > 74}
            }
            add_to_variable = {BLA_youth_unity_factor = 0.1}
        }
        if = {
            limit = {
                check_variable = {BLA_freeman_opinion > 49}
            }
            add_to_variable = {BLA_youth_unity_factor = 0.1}
        }
        if = {
            limit = {
                check_variable = {BLA_freeman_opinion > 24}
            }
            add_to_variable = {BLA_youth_unity_factor = 0.1}
        }
        if = {
            limit = {
                check_variable = {BLA_freeman_opinion < 0}
            }
            add_to_variable = {BLA_youth_unity_factor = -0.1}
        }
        if = {
            limit = {
                check_variable = {BLA_freeman_opinion < -24}
            }
            add_to_variable = {BLA_youth_unity_factor = -0.1}
        }
        if = {
            limit = {
                check_variable = {BLA_freeman_opinion < -49}
            }
            add_to_variable = {BLA_youth_unity_factor = -0.1}
        }
        if = {
            limit = {
                check_variable = {BLA_freeman_opinion < -74}
            }
            add_to_variable = {BLA_youth_unity_factor = -0.1}
        }
        if = {
            limit = {
                has_country_flag = BLA_recent_arrest_flag
            }
            add_to_variable = {BLA_youth_unity_factor = -0.25}
        }
        if = {
            limit = {
                has_country_flag = BLA_recent_censorship_flag
            }
            add_to_variable = {BLA_youth_unity_factor = -0.25}
        }
        if = {
            limit = {
                has_country_flag = BLA_recent_loosen_censorship_flag
            }
            add_to_variable = {BLA_youth_unity_factor = 0.25}
        }
        if = {
            limit = {
                has_completed_focus = BLA_PM_Sanya_3
            }
            add_to_variable = {BLA_youth_unity_factor = 0.05}
        }
        if = {
            limit = {
                has_completed_focus = BLA_PM_Sanya_5
            }
            add_to_variable = {BLA_youth_unity_factor = 0.05}
        }
        if = {
            limit = {
                has_completed_focus = BLA_PM_Sanya_9
            }
            add_to_variable = {BLA_youth_unity_factor = 0.05}
        }
        if = {
            limit = {
                has_completed_focus = BLA_PM_Sanya_13
            }
            add_to_variable = {BLA_youth_unity_factor = 0.05}
        }
    }
}
BLA_calculate_labor_agenda = {
    BLA = {
        set_variable = {BLA_labor_unity_factor = 0}
        if = {
            limit = {
                has_completed_focus = BLA_Anna_industry_5
            }
            add_to_variable = {BLA_labor_unity_factor = -0.15}
        }
        if = {
            limit = {
                has_completed_focus = BLA_Anna_navy_1
            }
            add_to_variable = {BLA_labor_unity_factor = 0.05}
        }
        if = {
            limit = {
                has_completed_focus = BLA_Anna_industry_20
            }
            add_to_variable = {BLA_labor_unity_factor = 0.05}
        }
        if = {
            limit = {
                has_completed_focus = BLA_Anna_industry_23
            }
            add_to_variable = {BLA_labor_unity_factor = 0.05}
        }
        if = {
            limit = {
                has_completed_focus = BLA_Anna_pol_24
            }
            add_to_variable = {BLA_labor_unity_factor = 0.05}
        }
        if = {
            limit = {
                has_completed_focus = BLA_PM_Sanya_6
            }
            add_to_variable = {BLA_labor_unity_factor = 0.05}
        }
        if = {
            limit = {
                has_completed_focus = BLA_PM_Sanya_28
            }
            add_to_variable = {BLA_labor_unity_factor = 0.05}
        }
        if = {
            limit = {
                has_idea = xiaoshi12
            }
            add_to_variable = {BLA_labor_unity_factor = 0.05}
        }
        if = {
            limit = {
                NOT = {
                    has_idea = BLA_serfdom
                }
            }
            add_to_variable = {BLA_labor_unity_factor = 0.15}
        }
        if = {
            limit = {
                has_country_flag = BLA_serfdom_abolished
            }
            add_to_variable = {BLA_labor_unity_factor = 0.15}
        }
    }
}
BLA_calculate_officier_agenda = {
    BLA = {
        set_variable = {BLA_officier_unity_factor = 0}
        if = {
            limit = {
                has_war = no
            }
            if = {
                limit = {
                    has_stability > 0.74
                }
                add_to_variable = {BLA_officier_unity_factor = 0.1}
            }
            if = {
                limit = {
                    has_stability > 0.49
                }
                add_to_variable = {BLA_officier_unity_factor = 0.1}
            }
            if = {
                limit = {
                    has_stability > 0.24
                }
                add_to_variable = {BLA_officier_unity_factor = 0.1}
            }
            if = {
                limit = {
                    has_stability < 0
                }
                add_to_variable = {BLA_officier_unity_factor = -0.1}
            }
            if = {
                limit = {
                    has_stability < -0.25
                }
                add_to_variable = {BLA_officier_unity_factor = -0.1}
            }
            if = {
                limit = {
                    has_stability < 0.49
                }
                add_to_variable = {BLA_officier_unity_factor = -0.1}
            }
            if = {
                limit = {
                    has_stability < 0.74
                }
                add_to_variable = {BLA_officier_unity_factor = -0.1}
            }
        }
        if = {
            limit = {
                has_completed_focus = BLA_Anna_mil_21
            }
            add_to_variable = {BLA_officier_unity_factor = 0.05}
        }
        if = {
            limit = {
                has_completed_focus = BLA_PM_Sanya_12
            }
            add_to_variable = {BLA_officier_unity_factor = 0.05}
        }
        if = {
            limit = {
                has_completed_focus = BLA_Anna_industry_32
            }
            add_to_variable = {BLA_officier_unity_factor = 0.05}
        }
        if = {
            limit = {
                has_completed_focus = BLA_Anna_mil_2
            }
            add_to_variable = {BLA_officier_unity_factor = 0.05}
        }
        if = {
            limit = {
                has_completed_focus = BLA_Anna_mil_7
            }
            add_to_variable = {BLA_officier_unity_factor = 0.05}
        }
        if = {
            limit = {
                has_completed_focus = BLA_Anna_mil_10
            }
            add_to_variable = {BLA_officier_unity_factor = 0.05}
        }
        if = {
            limit = {
                has_completed_focus = BLA_Anna_mil_11
            }
            add_to_variable = {BLA_officier_unity_factor = 0.05}
        }
        if = {
            limit = {
                has_completed_focus = BLA_Anna_mil_30
            }
            add_to_variable = {BLA_officier_unity_factor = 0.05}
        }
        if = {
            limit = {
                has_idea = BLA_graveyard
            }
            add_to_variable = {BLA_officier_unity_factor = -0.10}
        }
        if = {
            limit = {
                has_idea = BLA_graveyard_2
            }
            add_to_variable = {BLA_officier_unity_factor = -0.10}
        }
        if = {
            limit = {
                has_idea = BLA_graveyard_3
            }
            add_to_variable = {BLA_officier_unity_factor = -0.10}
        }
    }
}
BLA_calculate_loyalist_agenda = {
    BLA = {
        set_variable = {BLA_loyalist_unity_factor = 0}
        if = {
            limit = {
                has_completed_focus = BLA_PM_Sanya_36
            }
            add_to_variable = {BLA_loyalist_unity_factor = 0.1}
        }
        if = {
            limit = {
                communism > 0.15
            }
            add_to_variable = {BLA_loyalist_unity_factor = -0.1}
        }
        if = {
            limit = {
                communism > 0.25
            }
            add_to_variable = {BLA_loyalist_unity_factor = -0.1}
        }
        if = {
            limit = {
                communism > 0.35
            }
            add_to_variable = {BLA_loyalist_unity_factor = -0.1}
        }
        if = {
            limit = {
                democratic > 0.25
            }
            add_to_variable = {BLA_loyalist_unity_factor = -0.05}
        }
        if = {
            limit = {
                democratic > 0.35
            }
            add_to_variable = {BLA_loyalist_unity_factor = -0.05}
        }
        if = {
            limit = {
                democratic > 0.45
            }
            add_to_variable = {BLA_loyalist_unity_factor = -0.05}
        }
        if = {
            limit = {
                communism < 0.05
            }
            add_to_variable = {BLA_loyalist_unity_factor = 0.1}
        }
    }
}
BLA_increase_unity = {
    custom_effect_tooltip = BLA_increase_unity_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_unity = 3}
        }
    }
}
BLA_increase_church_preference = {
    custom_effect_tooltip = BLA_increase_church_preference_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_church_preference = 1}
        }
    }
}
BLA_increase_army_preference = {
    custom_effect_tooltip = BLA_increase_army_preference_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_army_preference = 1}
        }
    }
}
BLA_increase_royal_guard_preference = {
    custom_effect_tooltip = BLA_increase_royal_guard_preference_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_royal_guard_preference = 1}
        }
    }
}
BLA_increase_navy_preference = {
    custom_effect_tooltip = BLA_increase_navy_preference_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_navy_preference = 1}
        }
    }
}
BLA_increase_sp_preference = {
    custom_effect_tooltip = BLA_increase_sp_preference_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_sp_preference = 1}
        }
    }
}
BLA_increase_army_preference_small = {
    custom_effect_tooltip = BLA_increase_army_preference_small_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_army_preference = 0.5}
        }
    }
}
BLA_increase_royal_guard_preference_small = {
    custom_effect_tooltip = BLA_increase_royal_guard_preference_small_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_royal_guard_preference = 0.5}
        }
    }
}
BLA_increase_navy_preference_small = {
    custom_effect_tooltip = BLA_increase_navy_preference_small_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_navy_preference = 0.5}
        }
    }
}
BLA_increase_sp_preference_small = {
    custom_effect_tooltip = BLA_increase_sp_preference_small_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_sp_preference = 0.5}
        }
    }
}
BLA_weaken_gov_sanya = {
    custom_effect_tooltip = BLA_weaken_gov_sanya_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_gov_sanya_strength = -2}
        }
    }
}
BLA_strengthen_gov_sanya = {
    custom_effect_tooltip = BLA_strengthen_gov_sanya_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_gov_sanya_strength = 2}
        }
    }
}
BLA_strengthen_gov_sanya_6 = {
    custom_effect_tooltip = BLA_strengthen_gov_sanya_6_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_gov_sanya_strength = 6}
        }
    }
}
BLA_sanya_power_setup = {
    BLA = {
        set_variable = {BLA_youth_power = 45}
        set_variable = {BLA_labor_power = 15}
        set_variable = {BLA_officier_power = 30}
        set_variable = {BLA_loyalist_power = 10}
    }
}
BLA_increase_youth_power = {
    custom_effect_tooltip = BLA_increase_youth_power_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_youth_power = 3}
            add_to_variable = {BLA_labor_power = -1}
            add_to_variable = {BLA_officier_power = -1}
            add_to_variable = {BLA_loyalist_power = -1}
        }
    }
}
BLA_decrease_youth_power = {
    custom_effect_tooltip = BLA_decrease_youth_power_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_youth_power = -3}
            add_to_variable = {BLA_labor_power = 1}
            add_to_variable = {BLA_officier_power = 1}
            add_to_variable = {BLA_loyalist_power = 1}
        }
    }
}
BLA_increase_labor_power = {
    custom_effect_tooltip = BLA_increase_labor_power_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_youth_power = -1}
            add_to_variable = {BLA_labor_power = 3}
            add_to_variable = {BLA_officier_power = -1}
            add_to_variable = {BLA_loyalist_power = -1}
        }
    }
}
BLA_decrease_labor_power = {
    custom_effect_tooltip = BLA_decrease_labor_power_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_youth_power = 1}
            add_to_variable = {BLA_labor_power = -3}
            add_to_variable = {BLA_officier_power = 1}
            add_to_variable = {BLA_loyalist_power = 1}
        }
    }
}
BLA_increase_officier_power = {
    custom_effect_tooltip = BLA_increase_officier_power_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_youth_power = -1}
            add_to_variable = {BLA_labor_power = -1}
            add_to_variable = {BLA_officier_power = 3}
            add_to_variable = {BLA_loyalist_power = -1}
        }
    }
}
BLA_decrease_officier_power = {
    custom_effect_tooltip = BLA_decrease_officier_power_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_youth_power = 1}
            add_to_variable = {BLA_labor_power = 1}
            add_to_variable = {BLA_officier_power = -3}
            add_to_variable = {BLA_loyalist_power = 1}
        }
    }
}
BLA_increase_loyalist_power = {
    custom_effect_tooltip = BLA_increase_loyalist_power_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_youth_power = -1}
            add_to_variable = {BLA_labor_power = -1}
            add_to_variable = {BLA_officier_power = -1}
            add_to_variable = {BLA_loyalist_power = 3}
        }
    }
}
BLA_decrease_loyalist_power = {
    custom_effect_tooltip = BLA_decrease_loyalist_power_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_youth_power = 1}
            add_to_variable = {BLA_labor_power = 1}
            add_to_variable = {BLA_officier_power = 1}
            add_to_variable = {BLA_loyalist_power = -3}
        }
    }
}
BLA_update_unity_modifier = {
    BLA = {
        set_variable = {BLA_nobility_opinion_modifier_basic = 0.001}
        set_variable = {BLA_army_opinion_modifier_basic = 0.001}
        set_variable = {BLA_freeman_opinion_modifier_basic = 0.001}
        set_variable = {BLA_political_power_factor_basic = 0.001}
        set_variable = {BLA_stability_factor_basic = 0.002}
        set_variable = {BLA_nobility_opinion_modifier_dynamic = BLA_nobility_opinion_modifier_basic}
        set_variable = {BLA_army_opinion_modifier_dynamic = BLA_army_opinion_modifier_basic}
        set_variable = {BLA_freeman_opinion_modifier_dynamic = BLA_freeman_opinion_modifier_basic}
        set_variable = {BLA_political_power_factor_dynamic = BLA_political_power_factor_basic}
        set_variable = {BLA_stability_factor_dynamic = BLA_stability_factor_basic}
        multiply_variable = {BLA_nobility_opinion_modifier_dynamic = BLA_loyalist_power}
        multiply_variable = {BLA_army_opinion_modifier_dynamic = BLA_officier_power}
        multiply_variable = {BLA_freeman_opinion_modifier_dynamic = BLA_labor_power}
        multiply_variable = {BLA_political_power_factor_dynamic = BLA_youth_power}
        multiply_variable = {BLA_stability_factor_dynamic = BLA_unity}
    }
}
BLA_add_negotiation_progress = {
    custom_effect_tooltip = BLA_add_negotiation_progress_t
    hidden_effect = {
        add_to_variable = {BLA_negotiation_progress = BLA_negotiation_progress_temp}
    }
}
BLA_add_negotiation_barrier = {
    custom_effect_tooltip = BLA_add_negotiation_barrier_t
    hidden_effect = {
        add_to_variable = {BLA_negotiation_barrier = BLA_negotiation_barrier_temp}
    }
}
BLA_HEL_crisis_event_trigger = {
    BLA = {
        add_to_variable = {BLA_HEL_crisis_var = 1}
        if = {
            limit = {
                check_variable = {BLA_HEL_crisis_var = 20}
            }
            country_event = {id = BLA_sanya_crisis.2}
        }
        if = {
            limit = {
                check_variable = {BLA_HEL_crisis_var = 50}
            }
            country_event = {id = BLA_sanya_crisis.3}
        }
        if = {
            limit = {
                check_variable = {BLA_HEL_crisis_var = 80}
            }
            country_event = {id = BLA_sanya_crisis.4}
        }
    }
}
#一键开启罗西亚吃鸡大赛
BLA_katyusha_civ_war_setup = {
    BLA = {
        dismantle_faction = yes
        end_puppet = KAM
        end_puppet = SVI
        end_puppet = OPA
        end_puppet = HBR
        delete_unit = {}
        delete_unit_template_and_units = {
            division_template = "圣墓骑士"
            disband = yes
        }
        delete_unit_template_and_units = {
            division_template = "护教圣军"
            disband = yes
        }
        delete_unit_template_and_units = {
            division_template = "军区卫戍师"
            disband = yes
        }
        load_oob = "BLA_civ_war"
        set_politics = {
            ruling_party = communism
        }
        add_popularity = {
            ideology = communism
            popularity = 0.50
        }
    }
    3 = {
        transfer_state_to = NWT
        add_core_of = NWT
    }
    4= {
        transfer_state_to = NWT
        add_core_of = NWT
    }
    5 = {
        transfer_state_to = NWT
        add_core_of = NWT
    }
    19 = {
        transfer_state_to = NWT
        add_core_of = NWT
    }
    63 = {
        transfer_state_to = NWT
        add_core_of = NWT
    }
    NWT = {
        set_country_flag = has_Unmanned_area_flag
    }
    217 = {
        transfer_state_to = WAR
        add_core_of = WAR
    }
    194 = {
        transfer_state_to = WAR
        add_core_of = WAR
    }
    208 = {
        transfer_state_to = WAR
        add_core_of = WAR
    }
    198 = {
        transfer_state_to = WAR
        add_core_of = WAR
    }
    232 = {
        transfer_state_to = WAR
        add_core_of = WAR
    }
    126 = {
        add_core_of = HEL
        transfer_state_to = HEL
    }
    87 = {
        add_core_of = HEL
        transfer_state_to = HEL
    }
    123 = {
        add_core_of = HEL
        transfer_state_to = HEL
    }
    146 = {
        add_core_of = HEL
        transfer_state_to = HEL
    }
    191 = {
        transfer_state_to = BLB
        add_core_of = BLB
    }
    184 = {
        transfer_state_to = BLB
        add_core_of = BLB
    }
    215 = {
        transfer_state_to = BLB
        add_core_of = BLB
    }
    154 = {
        transfer_state_to = BLB
        add_core_of = BLB
    }
    158 = {
        transfer_state_to = BLB
        add_core_of = BLB
    }
    183 = {
        transfer_state_to = BLB
        add_core_of = BLB
    }
    265 = {
        transfer_state_to = HBF
        add_core_of = HBF
    }
    256 = {
        transfer_state_to = HBF
        add_core_of = HBF
    }
    118 = {
        transfer_state_to = BLO
        add_core_of = BLO
    }
    98 = {
        transfer_state_to = BLO
        add_core_of = BLO
    }
    41 = {
        transfer_state_to = IRC
        add_core_of = IRC
    }
    90 = {
        transfer_state_to = IRC
        add_core_of = IRC
    }
    94 = {
        transfer_state_to = IRC
        add_core_of = IRC
    }
    55 = {
        transfer_state_to = IRC
        add_core_of = IRC
    }
    37 = {
        transfer_state_to = NVI
        add_core_of = NVI
    }
    2 = {
        transfer_state_to = NVI
        add_core_of = NVI
    }
    32 = {
        transfer_state_to = NVI
        add_core_of = NVI
    }
    37 = {
        transfer_state_to = NVI
        add_core_of = NVI
    }
    54 = {
        transfer_state_to = NVI
        add_core_of = NVI
    }
    HEL = {
        set_politics = {
            ruling_party = democratic
        }
        set_cosmetic_tag = HEL_republic
        create_country_leader = {
            name = HEL_Nikitich
            picture = GFX_HEL_Nikitich
            expire = "3200.1.1.1"
            ideology = sub_Universalism
        }
        set_popularities = {
            democratic = 70
            neutrality = 15
            fascism = 0
            communism = 15
            reactionism = 0
        }
    }
    OPA = {
        set_politics = {
            ruling_party = communism
        }
        promote_character = {
            character = OPA_Murmansk
            ideology = sub_Military_socialism
        }
        remove_ideas = OPA_Murmansk_leader
        set_cosmetic_tag = OPA_red_army
        load_focus_tree = {
            tree = NO
        }
        set_popularities = {
            democratic = 10
            neutrality = 15
            fascism = 0
            communism = 65
            reactionism = 10
        }
    }
    BLO = {
        set_politics = {
            ruling_party = reactionism
        }
        create_country_leader = {
            name = OPA_Rasputin
            picture = GFX_BLA_Rasputin
            expire = "3200.1.1.1"
            ideology = sub_reactionism_manaism
        }
    }
    HBF = {
        set_politics = {
            ruling_party = communism
        }
        set_popularities = {
            democratic = 10
            neutrality = 15
            fascism = 0
            communism = 75
            reactionism = 0
        }
    }
    BLB = {
        set_politics = {
            ruling_party = neutrality
        }
        set_popularities = {
            democratic = 0
            neutrality = 80
            fascism = 10
            communism = 0
            reactionism = 10
        }
    }
    IRC = {
        set_politics = {
            ruling_party = neutrality
        }
        set_popularities = {
            democratic = 0
            neutrality = 80
            fascism = 10
            communism = 0
            reactionism = 10
        }
    }
    NVI = {
        set_politics = {
            ruling_party = neutrality
        }
        set_popularities = {
            democratic = 0
            neutrality = 100
            fascism = 0
            communism = 0
            reactionism = 0
        }
    }
    BLA = {
        create_faction = BLA_rev_faction
        add_to_faction = HBF
    }
    BLB = {
        create_faction = BLB_rev_faction
        add_to_faction = BLO
        add_to_faction = HBR
        add_to_faction = NVI
        add_to_faction = IRC
        add_to_faction = SVI
    }
    HBF = {
        BLA_katyusha_civ_war_unit_creation = yes
    }
    HEL = {
        BLA_katyusha_civ_war_unit_creation = yes
    }
    BLB = {
        BLA_katyusha_civ_war_unit_creation = yes
    }
    BLO = {
        BLA_katyusha_civ_war_unit_creation = yes
    }
    NVI = {
        BLA_katyusha_civ_war_unit_creation = yes
    }
    IRC = {
        BLA_katyusha_civ_war_unit_creation = yes
    }
    BLA = {
        BLA_katyusha_civ_war_unit_creation = yes
    }
}
BLA_katyusha_civ_war_unit_creation = {
    country_lock_all_division_template = yes
    if = {
        limit = {
            NOT = {
                has_template = "罗西亚军团"
            }
        }
        division_template = {
            name = "罗西亚军团"
            is_locked = no
            priority = 0
            regiments = {
                infantry = { x = 0 y = 0 }
                infantry = { x = 0 y = 1 }
                infantry = { x = 1 y = 0 }
                infantry = { x = 1 y = 1 }
                infantry = { x = 2 y = 0 }
                infantry = { x = 2 y = 1 }
            }
        }
    }
    if = {
        limit = {
            NOT = {
                has_template = "罗西亚卫队"
            }
        }
        division_template = {
            name = "罗西亚卫队"
            regiments = {
                infantry = { x = 0 y = 0 }
                infantry = { x = 0 y = 1 }
                infantry = { x = 0 y = 2 }
                infantry = { x = 1 y = 0 }
                infantry = { x = 1 y = 1 }
                infantry = { x = 1 y = 2 }
                artillery_brigade = { x = 2 y = 0 }
                artillery_brigade = { x = 2 y = 1 }
            }
        }
    }
    if = {
        limit = {
            OR = {
                tag = BLB
                tag = BLO
                tag = IRC
                tag = NVI
            }
            NOT = {
                has_template = "农奴辅助军"
            }
        }
        division_template = {
            name = "农奴辅助军"
            is_locked = no
            priority = 0
            template_counter = 0
            regiments = {
                irregular_infantry= { x = 0 y = 0 }
                irregular_infantry = { x = 0 y = 1 }
                irregular_infantry = { x = 0 y = 2 }
                irregular_infantry = { x = 1 y = 0 }
            }
        }
    }
    if = {
        limit = {
            OR = {
                tag = HEL
                tag = HBF
                tag = BLA
            }
            NOT = {
                has_template = "自由民辅助军"
            }
        }
        division_template = {
            name = "自由民辅助军"
            is_locked = no
            priority = 0
            template_counter = 0
            regiments = {
                militia= { x = 0 y = 0 }
                militia = { x = 0 y = 1 }
                militia = { x = 0 y = 2 }
                militia = { x = 1 y = 0 }
            }
        }
    }
    if = {
        limit = {
            OR = {
                tag = BLB
                tag = BLO
                tag = IRC
                tag = NVI
            }
        }
        every_owned_state = {
            create_unit = {
                division = "name = \"罗西亚军团\" division_template = \"罗西亚军团\" start_experience_factor = 0.20"
                owner = PREV
            }
            create_unit = {
                division = "name = \"罗西亚军团\" division_template = \"罗西亚军团\" start_experience_factor = 0.20"
                owner = PREV
            }
            create_unit = {
                division = "name = \"罗西亚军团\" division_template = \"罗西亚军团\" start_experience_factor = 0.20"
                owner = PREV
            }
            create_unit = {
                division = "name = \"罗西亚卫队\" division_template = \"罗西亚卫队\" start_experience_factor = 0.30"
                owner = PREV
            }
            create_unit = {
                division = "name = \"农奴辅助军\" division_template = \"农奴辅助军\" start_experience_factor = 0.10"
                owner = PREV
            }
            create_unit = {
                division = "name = \"农奴辅助军\" division_template = \"农奴辅助军\" start_experience_factor = 0.10"
                owner = PREV
            }
            create_unit = {
                division = "name = \"农奴辅助军\" division_template = \"农奴辅助军\" start_experience_factor = 0.10"
                owner = PREV
            }
        }
    }
    if = {
        limit = {
            OR = {
                tag = HEL
                tag = HBF
            }
        }
        every_owned_state = {
            create_unit = {
                division = "name = \"罗西亚军团\" division_template = \"罗西亚军团\" start_experience_factor = 0.20"
                owner = PREV
            }
            create_unit = {
                division = "name = \"罗西亚军团\" division_template = \"罗西亚军团\" start_experience_factor = 0.20"
                owner = PREV
            }
            create_unit = {
                division = "name = \"罗西亚军团\" division_template = \"罗西亚军团\" start_experience_factor = 0.20"
                owner = PREV
            }
            create_unit = {
                division = "name = \"罗西亚军团\" division_template = \"罗西亚军团\" start_experience_factor = 0.20"
                owner = PREV
            }
            create_unit = {
                division = "name = \"罗西亚卫队\" division_template = \"罗西亚卫队\" start_experience_factor = 0.30"
                owner = PREV
            }
            create_unit = {
                division = "name = \"自由民辅助军\" division_template = \"自由民辅助军\" start_experience_factor = 0.10"
                owner = PREV
            }
            create_unit = {
                division = "name = \"自由民辅助军\" division_template = \"自由民辅助军\" start_experience_factor = 0.10"
                owner = PREV
            }
            create_unit = {
                division = "name = \"自由民辅助军\" division_template = \"自由民辅助军\" start_experience_factor = 0.10"
                owner = PREV
            }
            create_unit = {
                division = "name = \"自由民辅助军\" division_template = \"自由民辅助军\" start_experience_factor = 0.10"
                owner = PREV
            }
        }
    }
    if = {
        limit = {
            tag = BLA
        }
        every_owned_state = {
            create_unit = {
                division = "name = \"罗西亚军团\" division_template = \"罗西亚军团\" start_experience_factor = 0.20"
                owner = PREV
            }
            create_unit = {
                division = "name = \"罗西亚军团\" division_template = \"罗西亚军团\" start_experience_factor = 0.20"
                owner = PREV
            }
            create_unit = {
                division = "name = \"自由民辅助军\" division_template = \"自由民辅助军\" start_experience_factor = 0.10"
                owner = PREV
            }
            create_unit = {
                division = "name = \"自由民辅助军\" division_template = \"自由民辅助军\" start_experience_factor = 0.10"
                owner = PREV
            }
        }
    }
}
#每月土改进度检测
BLA_land_reform_monthly_check = {
    BLA = {
        if = {
            limit = {
                has_country_flag = BLA_land_reform_radical_flag
            }
            add_to_variable = {BLA_land_reform_progress = 8}
            add_stability = -0.01
            add_to_variable = {BLA_nobility_opinion = -2}
            add_to_variable = {BLA_church_opinion = -2}
        }
        if = {
            limit = {
                has_country_flag = BLA_land_reform_moderate_flag
            }
            add_to_variable = {BLA_land_reform_progress = 4}
            add_stability = -0.005
        }
        if = {
            limit = {
                has_country_flag = BLA_land_reform_purchase
            }
            add_to_variable = {BLA_land_reform_progress = 5}
            add_political_power = -30
        }
        if = {
            limit = {
                check_variable = {BLA_land_reform_progress > 99}
            }
            add_to_variable = {BLA_land_reform_progress = -100}
            add_to_variable = {BLA_land_reform_stage = 1}
            BLA_check_land_reform_progress = yes
        }
        BLA_land_reform_random_event = yes
    }
}
#土改进度+5
BLA_land_reform_progress_increase_5 = {
    custom_effect_tooltip = BLA_land_reform_progress_increase_5_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_land_reform_progress = 5}
            BLA_check_land_reform_progress = yes
        }
    }
}
#土改进度+5
BLA_land_reform_progress_increase_15 = {
    custom_effect_tooltip = BLA_land_reform_progress_increase_15_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_land_reform_progress = 15}
            BLA_check_land_reform_progress = yes
        }
    }
}
#土改进度-5
BLA_land_reform_progress_decrease_5 = {
    custom_effect_tooltip = BLA_land_reform_progress_decrease_5_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_land_reform_progress = -5}
            BLA_check_land_reform_progress = yes
        }
    }
}
#检测进度
BLA_check_land_reform_progress = {
    BLA = {
        clamp_variable = {
            var = BLA_land_reform_progress
            min = 0
        }
    }
}
#土地改革事件发牌器
BLA_land_reform_random_event = {
    BLA = {
        set_variable_to_random = {
            var = BLA_lr_event_num
            min = 1
            max = 10
            integer = yes
        }
        if = {
            limit = {
                check_variable = {BLA_lr_event_num = 1}
            }
            country_event = {id = BLA_lr.1}
        }
        if = {
            limit = {
                check_variable = {BLA_lr_event_num = 2}
            }
            country_event = {id = BLA_lr.2}
        }
        if = {
            limit = {
                check_variable = {BLA_lr_event_num = 3}
            }
            country_event = {id = BLA_lr.3}
        }
        if = {
            limit = {
                check_variable = {BLA_lr_event_num = 4}
            }
            country_event = {id = BLA_lr.4}
        }
        if = {
            limit = {
                NOT = {
                    has_country_flag = BLA_no_bad_event_flag
                }
            }
            if = {
                limit = {
                    check_variable = {BLA_lr_event_num = 5}
                }
                country_event = {id = BLA_lr.5}
            }
            if = {
                limit = {
                    check_variable = {BLA_lr_event_num = 6}
                }
                country_event = {id = BLA_lr.6}
            }
            if = {
                limit = {
                    check_variable = {BLA_lr_event_num = 7}
                }
                country_event = {id = BLA_lr.7}
            }
            if = {
                limit = {
                    check_variable = {BLA_lr_event_num = 8}
                }
                country_event = {id = BLA_lr.8}
            }
            if = {
                limit = {
                    check_variable = {BLA_lr_event_num = 9}
                }
                country_event = {id = BLA_lr.9}
            }
            if = {
                limit = {
                    check_variable = {BLA_lr_event_num = 10}
                }
                country_event = {id = BLA_lr.10}
            }
        }
    }
}
#赫尔曼革命初始化
BLA_Hermann_revolution_monthly_setup = {
    hidden_effect = {
        BLA = {
            set_variable = {BLA_cooperate_with_August_cost = 10}
            set_variable = {BLA_pol_rev = 10}
            set_variable = {BLA_mil_rev = 10}
            set_variable = {BLA_cul_rev = 10}
            set_variable = {BLA_corruption_rev = 75}
            set_variable = {BLA_rev_change = BLA_corruption_rev}
            multiply_variable = {BLA_rev_change = -0.02}
            BLA_update_Hermann_revolution_modifier = yes
        }
    }
}
#赫尔曼革命月度变化
BLA_Hermann_revolution_monthly_change = {
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_corruption_rev = 3}
            add_to_variable = {BLA_corruption_rev = modifier@BLA_corruption_rev_modifier}
            set_variable = {BLA_rev_change = BLA_corruption_rev}
            multiply_variable = {BLA_rev_change = -0.02}
            add_to_variable = {BLA_pol_rev = BLA_rev_change}
            add_to_variable = {BLA_mil_rev = BLA_rev_change}
            add_to_variable = {BLA_cul_rev = BLA_rev_change}
            clamp_variable = {
                var = BLA_cul_rev
                max = 100
                min = 0
            }
            clamp_variable = {
                var = BLA_mil_rev
                max = 100
                min = 0
            }
            clamp_variable = {
                var = BLA_pol_rev
                max = 100
                min = 0
            }
            clamp_variable = {
                var = BLA_corruption_rev
                max = 100
                min = 0
            }
        }
    }
}
BLA_rev_check = {
    hidden_effect = {
        BLA = {
            clamp_variable = {
                var = BLA_cul_rev
                max = 100
                min = 0
            }
            clamp_variable = {
                var = BLA_mil_rev
                max = 100
                min = 0
            }
            clamp_variable = {
                var = BLA_pol_rev
                max = 100
                min = 0
            }
            clamp_variable = {
                var = BLA_corruption_rev
                max = 100
                min = 0
            }
            if = {
                limit = {
                    NOT = {has_country_flag = BLA_cul_rev_successed}
                    check_variable = {BLA_cul_rev > 79}
                }
                country_event = {id = BLA_siera.24}
                set_country_flag = BLA_cul_rev_successed
            }
            if = {
                limit = {
                    NOT = {has_country_flag = BLA_mil_rev_successed}
                    check_variable = {BLA_mil_rev > 79}
                }
                country_event = {id = BLA_siera.23}
                set_country_flag = BLA_mil_rev_successed
            }
            if = {
                limit = {
                    NOT = {has_country_flag = BLA_pol_rev_successed}
                    check_variable = {BLA_pol_rev > 79}
                }
                country_event = {id = BLA_siera.22}
                set_country_flag = BLA_pol_rev_successed
            }
        }
    }
}
#赫尔曼革命修正
BLA_update_Hermann_revolution_modifier = {
    hidden_effect = {
        BLA = {
            BLA_rev_check = yes
            set_variable = {BLA_political_power_factor_rev_basic = 0.002}
            set_variable = {BLA_stability_factor_rev_basic = 0.003}
            set_variable = {BLA_army_opinion_modifier_rev_basic = 0.003}
            set_variable = {BLA_army_org_factor_rev_basic = 0.002}
            set_variable = {BLA_army_morale_factor_rev_basic = 0.002}
            set_variable = {BLA_political_power_factor_rev = BLA_political_power_factor_rev_basic}
            set_variable = {BLA_stability_factor_rev = BLA_stability_factor_rev_basic}
            set_variable = {BLA_army_opinion_modifier_rev = BLA_army_opinion_modifier_rev_basic}
            set_variable = {BLA_army_org_factor_rev = BLA_army_org_factor_rev_basic}
            set_variable = {BLA_army_morale_factor_rev = BLA_army_morale_factor_rev_basic}
            multiply_variable = {BLA_political_power_factor_rev = BLA_pol_rev}
            multiply_variable = {BLA_stability_factor_rev = BLA_cul_rev}
            multiply_variable = {BLA_army_opinion_modifier_rev = BLA_mil_rev}
            multiply_variable = {BLA_army_org_factor_rev = BLA_mil_rev}
            multiply_variable = {BLA_army_morale_factor_rev = BLA_mil_rev}
        }
    }
}
BLA_add_corrupt_3 = {
    custom_effect_tooltip = BLA_add_corrupt_3_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_corruption_rev = 3}
            BLA_rev_check = yes
        }
    }
}
BLA_reduce_corrupt_3 = {
    custom_effect_tooltip = BLA_reduce_corrupt_3_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_corruption_rev = -3}
            BLA_rev_check = yes
        }
    }
}
BLA_reduce_corrupt_5 = {
    custom_effect_tooltip = BLA_reduce_corrupt_5_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_corruption_rev = -5}
            BLA_rev_check = yes
        }
    }
}
BLA_reduce_corrupt_10 = {
    custom_effect_tooltip = BLA_reduce_corrupt_10_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_corruption_rev = -10}
            BLA_rev_check = yes
        }
    }
}
BLA_decrease_pol_4 = {
    custom_effect_tooltip = BLA_decrease_pol_4_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_pol_rev = -4}
            BLA_update_Hermann_revolution_modifier = yes
        }
    }
}
BLA_increase_pol_4 = {
    custom_effect_tooltip = BLA_increase_pol_4_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_pol_rev = 4}
            BLA_update_Hermann_revolution_modifier = yes
        }
    }
}
BLA_increase_pol_10 = {
    custom_effect_tooltip = BLA_increase_pol_10_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_pol_rev = 10}
            BLA_update_Hermann_revolution_modifier = yes
        }
    }
}
BLA_decrease_mil_4 = {
    custom_effect_tooltip = BLA_decrease_mil_4_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_mil_rev = -4}
            BLA_update_Hermann_revolution_modifier = yes
        }
    }
}
BLA_increase_mil_4 = {
    custom_effect_tooltip = BLA_increase_mil_4_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_mil_rev = 4}
            BLA_update_Hermann_revolution_modifier = yes
        }
    }
}
BLA_increase_mil_10 = {
    custom_effect_tooltip = BLA_increase_mil_10_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_mil_rev = 10}
            BLA_update_Hermann_revolution_modifier = yes
        }
    }
}
BLA_decrease_cul_4 = {
    custom_effect_tooltip = BLA_decrease_cul_4_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_cul_rev = -4}
            BLA_update_Hermann_revolution_modifier = yes
        }
    }
}
BLA_increase_cul_4 = {
    custom_effect_tooltip = BLA_increase_cul_4_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_cul_rev = 4}
            BLA_update_Hermann_revolution_modifier = yes
        }
    }
}
BLA_increase_cul_10 = {
    custom_effect_tooltip = BLA_increase_cul_10_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_cul_rev = 10}
            BLA_update_Hermann_revolution_modifier = yes
        }
    }
}
BLA_reduce_aug_opinion = {
    custom_effect_tooltip = BLA_reduce_aug_opinion_desc
    hidden_effect = {
        BLA = {add_to_variable = {BLA_cooperate_with_August_cost = 5}}
    }
}
BLA_increase_aug_opinion = {
    custom_effect_tooltip = BLA_increase_aug_opinion_desc
    hidden_effect = {
        BLA = {add_to_variable = {BLA_cooperate_with_August_cost = -5}}
    }
}
BLA_increase_Sanya_opinion = {
    custom_effect_tooltip = BLA_increase_Sanya_opinion_desc
    hidden_effect = {
        BLA = {add_to_variable = {BLA_Sanya_opinion = 1}}
    }
}
BLA_decrease_Sanya_opinion = {
    custom_effect_tooltip = BLA_decrease_Sanya_opinion_desc
    if = {
        limit = {
            BLA = {check_variable = {BLA_Sanya_opinion < 2}}
        }
        custom_effect_tooltip = BLA_low_Sanya_opinion_warning_tt
    }
    hidden_effect = {
        BLA = {add_to_variable = {BLA_Sanya_opinion = -1}}
    }
}
BLA_Siera_random_event_trigger = {
    BLA = {
        set_variable_to_random = {
            var = BLA_siera_random_var
            max = 31
            min = 1
            integer = yes
        }
        set_variable_to_random = {
            var = BLA_siera_random_time_var
            max = 20
            min = 1
            integer = yes
        }
        log = "[GetDateText]: [Root.GetName]: BLA_siera_random_var:[?BLA_siera_random_var]"
        if = {
            limit = {
                OR = {
                    AND = {
                        check_variable = {BLA_siera_random_var = 4}
                        check_variable = {BLA_num_of_mil_focus_completed < 10} #完成军事国策少于10个不触发，下逻辑同
                    }
                    AND = {
                        check_variable = {BLA_siera_random_var = 5}
                        check_variable = {BLA_num_of_mil_focus_completed > 14}
                    }
                    check_variable = {BLA_siera_random_var = BLA_last_event_var} #大概能防止重复触发？
                }
            }
            #无效果
        }
        else = {
            meta_effect = {
                text = {
                    country_event = {id = BLA_random.[BLA_SIERA_RANDOM_VAR] days = [BLA_SIERA_RANDOM_TIME_VAR]}
                    set_variable = {BLA_last_event_var = [BLA_SIERA_RANDOM_VAR]}
                }
                BLA_SIERA_RANDOM_VAR = "[?BLA_siera_random_var]"
                BLA_SIERA_RANDOM_TIME_VAR = "[?BLA_siera_random_time_var]"
            }
        }
        set_country_flag = {flag = BLA_Siera_random_event_triggered value = 1 days = 200}
    }
}
BLA_check_tsar_order = {
    BLA = {
        clamp_variable = {
            var = BLA_tsar_order
            max = BLA_tsar_order_limit
            min = 0
        }
        if = {
            limit = {
                NOT = {
                    has_country_flag = BLA_tsar_order_recovered
                }
            }
            add_to_variable = {BLA_tsar_order = 1}
            set_country_flag = {flag = BLA_tsar_order_recovered days = 200 value = 1}
        }
        clamp_variable = {
            var = BLA_tsar_order
            max = BLA_tsar_order_limit
            min = 0
        }
    }
}
#沙皇政令：军事动员
BLA_tsar_order_mil_effect = {
    THIS = {
        add_dynamic_modifier = {modifier = BLA_tsar_order_mil_modifier days = 180 scope = BLA}
        create_unit = {
            division = "name = \"帝国独立军团\" division_template = \"帝国独立军团\" start_experience_factor = 0.30"
            owner = BLA
        }
        create_unit = {
            division = "name = \"帝国独立军团\" division_template = \"帝国独立军团\" start_experience_factor = 0.50"
            owner = BLA
        }
        owner = {
            army_experience = 25
            hidden_effect = {
                add_to_variable = {BLA_tsar_order = -1}
                BLA_check_tsar_order = yes
            }
        }
    }
}
#沙皇政令：工业建设
BLA_tsar_order_industry_effect = {
    THIS = {
        add_dynamic_modifier = {modifier = BLA_tsar_order_industry_modifier days = 180 scope = BLA}
        random_list = {
            70 = {
                add_extra_state_shared_building_slots = 1
            }
            10 = {
                add_extra_state_shared_building_slots = 1
                add_building_construction = {
				    type = industrial_complex
				    level = 1
				    instant_build = yes
			    }
            }
            10 = {
                add_extra_state_shared_building_slots = 1
                add_building_construction = {
				    type = arms_factory
				    level = 1
				    instant_build = yes
			    }
            }
            10 = {
                add_extra_state_shared_building_slots = 1
                add_building_construction = {
				    type = infrastructure
				    level = 1
				    instant_build = yes
			    }
            }
        }
        if = {
            limit = {
                BLA = {
                    has_completed_focus = BLA_Anna_industry_34
                }
                NOT = {
                    has_state_flag = extra_slot_gained
                }
                num_of_factories > 7
            }
            add_extra_state_shared_building_slots = 2
            set_state_flag = extra_slot_gained
        }
        if = {
            limit = {
                NOT = {has_state_flag = BLA_had_tsar_order}
            }
            set_state_flag = BLA_had_tsar_order
        }
        owner = {
            hidden_effect = {
                add_to_variable = {BLA_tsar_order = -1}
                BLA_check_tsar_order = yes
            }
        }
    }
}
#获得沙皇政令
BLA_gain_tsar_order = {
    custom_effect_tooltip = BLA_gain_tsar_order_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_tsar_order = 1}
        }
    }
}
#获得沙皇政令上限
BLA_gain_tsar_order_limit = {
    custom_effect_tooltip = BLA_gain_tsar_order_limit_desc
    hidden_effect = {
        BLA = {
            add_to_variable = {BLA_tsar_order_limit = 1}
        }
    }
}
BLA_upgrade_bureaucracy = {
    custom_effect_tooltip = BLA_upgrade_bureaucracy_desc
    hidden_effect = {
        if = {
            limit = {
                has_idea = BLA_bureaucracy_5
            }
            swap_ideas = {
                remove_idea = BLA_bureaucracy_5
                add_idea = BLA_bureaucracy_4
            }
        }
        else_if = {
            limit = {
                has_idea = BLA_bureaucracy_4
            }
            swap_ideas = {
                remove_idea = BLA_bureaucracy_4
                add_idea = BLA_bureaucracy_3
            }
        }
        else_if = {
            limit = {
                has_idea = BLA_bureaucracy_3
            }
            swap_ideas = {
                remove_idea = BLA_bureaucracy_3
                add_idea = BLA_bureaucracy_2
            }
        }
        else_if = {
            limit = {
                has_idea = BLA_bureaucracy_2
            }
            swap_ideas = {
                remove_idea = BLA_bureaucracy_2
                add_idea = BLA_bureaucracy_1
            }
        }
        else_if = {
            limit = {
                has_idea = BLA_bureaucracy_1
            }
            swap_ideas = {
                remove_idea = BLA_bureaucracy_1
                add_idea = BLA_bureaucracy_reformed_1
            }
        }
        else_if = {
            limit = {
                has_idea = BLA_bureaucracy_reformed_1
            }
            swap_ideas = {
                remove_idea = BLA_bureaucracy_reformed_1
                add_idea = BLA_bureaucracy_reformed_2
            }
        }
        else_if = {
            limit = {
                has_idea = BLA_bureaucracy_reformed_2
            }
            swap_ideas = {
                remove_idea = BLA_bureaucracy_reformed_2
                add_idea = BLA_bureaucracy_reformed_3
            }
        }
    }
}
BLA_PM_Elina_work_on_focus_start = {
    if = {
        limit = {
            NOT = {has_completed_focus = BLA_Elina_1}
        }
        activate_shine_on_focus = BLA_Elina_1
    }
    else_if = {
        limit = {
            NOT = {has_completed_focus = BLA_Elina_2}
        }
        activate_shine_on_focus = BLA_Elina_2
    }
    else_if = {
        limit = {
            NOT = {has_completed_focus = BLA_Elina_3}
        }
        activate_shine_on_focus = BLA_Elina_3
    }
    else_if = {
        limit = {
            NOT = {has_completed_focus = BLA_Elina_4}
        }
        activate_shine_on_focus = BLA_Elina_4
    }
}
BLA_PM_Elina_work_on_focus_end = {
    if = {
        limit = {
			has_shine_effect_on_focus = BLA_Elina_1
		}
		complete_national_focus = {
			focus = BLA_Elina_1
			use_side_message = yes
			originator_name = BLA_Elina
		}
    }
    else_if = {
        limit = {
			has_shine_effect_on_focus = BLA_Elina_2
		}
		complete_national_focus = {
			focus = BLA_Elina_2
			use_side_message = yes
			originator_name = BLA_Elina
		}
    }
    else_if = {
        limit = {
			has_shine_effect_on_focus = BLA_Elina_3
		}
		complete_national_focus = {
			focus = BLA_Elina_3
			use_side_message = yes
			originator_name = BLA_Elina
		}
    }
    else_if = {
        limit = {
			has_shine_effect_on_focus = BLA_Elina_4
		}
		complete_national_focus = {
			focus = BLA_Elina_4
			use_side_message = yes
			originator_name = BLA_Elina
		}
    }
}
BLA_add_minister = {
	add_to_array = { BLA_ministers_Array = BLA_temp_minister }
	custom_effect_tooltip = BLA_add_minister_tt
}
BLA_remove_minister = {
	remove_from_array = { BLA_ministers_Array = BLA_temp_minister }
	custom_effect_tooltip = BLA_remove_minister_tt
}
frozen_war_add_core = {
    add_core_of = KNI
    add_core_of = BLW
    add_core_of = BLF
    add_core_of = NAD
}
frozen_war_remove_core = {
    remove_core_of = KNI
    remove_core_of = BLW
    remove_core_of = BLF
    remove_core_of = NAD
}
BLA_frozen_war_set_up = {
    hidden_effect = {
        893 = {
            transfer_state_to = KNI
            frozen_war_add_core = yes
        }
        if = {
            limit = {
                BLA = {NOT = {has_country_flag = BLA_weaken_KNI}}
            }
            894 = {
                transfer_state_to = KNI
                frozen_war_add_core = yes
            }
        }
        else = {
            894 = {
                transfer_state_to = BLF
                frozen_war_add_core = yes
            }
        }
        46 = {
            transfer_state_to = BLF
            frozen_war_add_core = yes
        }
        68 = {
            transfer_state_to = BLW
            frozen_war_add_core = yes
        }
        if = {
            limit = {
                BLA = {NOT = {has_country_flag = BLA_weaken_NAD}}
            }
            41 = {
                transfer_state_to = NAD
                frozen_war_add_core = yes
            }
        }
        else = {
            41 = {
                transfer_state_to = BLW
                frozen_war_add_core = yes
            }
        }
        94 = {
            transfer_state_to = NAD
            frozen_war_add_core = yes
        }
        90 = {
            transfer_state_to = NAD
            frozen_war_add_core = yes
        }
        KNI = {
            inherit_technology = OPA
            add_ideas = mana_priority
            add_ideas = Rossiya_frozen_war
            add_ideas = Rossiya_holy_knights
            set_politics = {
                ruling_party = reactionism
            }
            set_popularities = {
                democratic = 0
                neutrality = 1
                fascism = 0
                communism = 0
                reactionism = 99
            }
            create_country_leader = {
                name = KNI_HQ
                picture = GFX_KNI_HQ
                ideology = sub_reactionism_manaism
            }
            country_lock_all_division_template = yes
            division_template = {
                name = "圣墓兄弟会"
                priority = 2
                regiments = {
                    Arcane_Knights_Camp = { x = 0 y = 0 }
                    Arcane_Knights_Camp = { x = 0 y = 1 }
                    Arcane_Knights_Camp = { x = 1 y = 0 }
                    Arcane_Knights_Camp = { x = 0 y = 4 }
                    infantry = { x = 2 y = 0 }
                    infantry = { x = 2 y = 1 }
                }
            }
            division_template = {
                name = "罗西亚民兵"
                regiments = {
                    militia = { x = 0 y = 0 }
                    militia = { x = 0 y = 1 }
                    militia = { x = 1 y = 1 }
                    militia = { x = 2 y = 0 }
                }
            }
            capital_scope = {
                create_unit = {
                    division = "name = \"圣墓兄弟会\" division_template = \"圣墓兄弟会\" start_experience_factor = 0.3"
                    owner = KNI
                }
                create_unit = {
                    division = "name = \"圣墓兄弟会\" division_template = \"圣墓兄弟会\" start_experience_factor = 0.3"
                    owner = KNI
                }
                create_unit = {
                    division = "name = \"圣墓兄弟会\" division_template = \"圣墓兄弟会\" start_experience_factor = 0.3"
                    owner = KNI
                }
                create_unit = {
                    division = "name = \"圣墓兄弟会\" division_template = \"圣墓兄弟会\" start_experience_factor = 0.3"
                    owner = KNI
                }
            }
            for_loop_effect = {
                start = 0
                end = 4
                every_owned_state = {
                    create_unit = {
                        division = "name = \"罗西亚民兵\" division_template = \"罗西亚民兵\" start_experience_factor = 0.1"
                        owner = KNI
                    }
                }
            }
        }
        BLW = {
            inherit_technology = BLA
            add_ideas = industrial_priority
            add_ideas = Rossiya_frozen_war
            add_ideas = Rossiya_imperial_legion
            set_politics = {
                ruling_party = neutrality
            }
            set_popularities = {
                democratic = 0
                neutrality = 100
                fascism = 0
                communism = 0
                reactionism = 0
            }
            create_country_leader = {
                name = BLW_HQ
                picture = GFX_BLW_HQ
                ideology = sub_Junta
            }
            country_lock_all_division_template = yes
            division_template = {
                name = "帝国步兵师"
                priority = 2
                regiments = {
                    infantry = { x = 0 y = 0 }
                    infantry = { x = 0 y = 1 }
                    infantry = { x = 0 y = 2 }
                    infantry = { x = 1 y = 0 }
                    infantry = { x = 1 y = 1 }
                    infantry = { x = 1 y = 2 }
                    infantry = { x = 2 y = 0 }
                    infantry = { x = 2 y = 1 }
                    infantry = { x = 2 y = 2 }
                    artillery_brigade = {x = 3 y = 0}
                }
            }
            division_template = {
                name = "罗西亚民兵"
                regiments = {
                    militia = { x = 0 y = 0 }
                    militia = { x = 0 y = 1 }
                    militia = { x = 1 y = 1 }
                    militia = { x = 2 y = 0 }
                }
            }
            capital_scope = {
                create_unit = {
                    division = "name = \"帝国步兵师\" division_template = \"帝国步兵师\" start_experience_factor = 0.3"
                    owner = BLW
                }
                create_unit = {
                    division = "name = \"帝国步兵师\" division_template = \"帝国步兵师\" start_experience_factor = 0.3"
                    owner = BLW
                }
                create_unit = {
                    division = "name = \"帝国步兵师\" division_template = \"帝国步兵师\" start_experience_factor = 0.3"
                    owner = BLW
                }
                create_unit = {
                    division = "name = \"帝国步兵师\" division_template = \"帝国步兵师\" start_experience_factor = 0.3"
                    owner = BLW
                }
                create_unit = {
                    division = "name = \"帝国步兵师\" division_template = \"帝国步兵师\" start_experience_factor = 0.3"
                    owner = BLW
                }
                create_unit = {
                    division = "name = \"帝国步兵师\" division_template = \"帝国步兵师\" start_experience_factor = 0.3"
                    owner = BLW
                }
            }
            for_loop_effect = {
                start = 0
                end = 4
                every_owned_state = {
                    create_unit = {
                        division = "name = \"罗西亚民兵\" division_template = \"罗西亚民兵\" start_experience_factor = 0.1"
                        owner = BLW
                    }
                }
            }
        }
        BLF = {
            inherit_technology = BLA
            add_ideas = industrial_priority
            add_ideas = Rossiya_frozen_war
            add_ideas = Rossiya_free_legion
            set_politics = {
                ruling_party = neutrality
            }
            set_popularities = {
                democratic = 25
                neutrality = 35
                fascism = 22
                communism = 8
                reactionism = 0
            }
            create_country_leader = {
                name = BLF_HQ
                picture = GFX_BLF_HQ
                ideology = sub_National_Conservatism
            }
            country_lock_all_division_template = yes
            division_template = {
                name = "自由军"
                priority = 2
                regiments = {
                    infantry = { x = 0 y = 0 }
                    infantry = { x = 0 y = 1 }
                    infantry = { x = 0 y = 2 }
                    infantry = { x = 1 y = 0 }
                    infantry = { x = 1 y = 1 }
                    infantry = { x = 1 y = 2 }
                    infantry = { x = 2 y = 0 }
                    infantry = { x = 2 y = 1 }
                    infantry = { x = 2 y = 2 }
                }
            }
            division_template = {
                name = "罗西亚民兵"
                regiments = {
                    militia = { x = 0 y = 0 }
                    militia = { x = 0 y = 1 }
                    militia = { x = 1 y = 1 }
                    militia = { x = 2 y = 0 }
                }
            }
            capital_scope = {
                create_unit = {
                    division = "name = \"自由军\" division_template = \"帝国步兵师\" start_experience_factor = 0.3"
                    owner = BLF
                }
                create_unit = {
                    division = "name = \"自由军\" division_template = \"帝国步兵师\" start_experience_factor = 0.3"
                    owner = BLF
                }
                create_unit = {
                    division = "name = \"自由军\" division_template = \"帝国步兵师\" start_experience_factor = 0.3"
                    owner = BLF
                }
                create_unit = {
                    division = "name = \"自由军\" division_template = \"帝国步兵师\" start_experience_factor = 0.3"
                    owner = BLF
                }
            }
            for_loop_effect = {
                start = 0
                end = 4
                every_owned_state = {
                    create_unit = {
                        division = "name = \"罗西亚民兵\" division_template = \"罗西亚民兵\" start_experience_factor = 0.1"
                        owner = BLF
                    }
                }
            }
        }
        NAD = {
            inherit_technology = BLA
            add_ideas = industrial_priority
            add_ideas = Rossiya_frozen_war
            add_ideas = Rossiya_red_guerrilla
            set_politics = {
                ruling_party = communism
            }
            set_popularities = {
                democratic = 28
                neutrality = 0
                fascism = 0
                communism = 72
                reactionism = 0
            }
            create_country_leader = {
                name = NAD_HQ
                picture = GFX_NAD_HQ
                ideology = sub_Military_socialism
            }
            country_lock_all_division_template = yes
            division_template = {
                name = "红军"
                priority = 2
                regiments = {
                    infantry = { x = 0 y = 0 }
                    infantry = { x = 0 y = 1 }
                    infantry = { x = 0 y = 2 }
                    infantry = { x = 1 y = 0 }
                    infantry = { x = 1 y = 1 }
                    infantry = { x = 1 y = 2 }
                    infantry = { x = 2 y = 0 }
                    infantry = { x = 2 y = 1 }
                    infantry = { x = 2 y = 2 }
                }
            }
            division_template = {
                name = "罗西亚民兵"
                regiments = {
                    militia = { x = 0 y = 0 }
                    militia = { x = 0 y = 1 }
                    militia = { x = 1 y = 1 }
                    militia = { x = 2 y = 0 }
                }
            }
            capital_scope = {
                create_unit = {
                    division = "name = \"红军\" division_template = \"红军\" start_experience_factor = 0.3"
                    owner = NAD
                }
                create_unit = {
                    division = "name = \"红军\" division_template = \"红军\" start_experience_factor = 0.3"
                    owner = NAD
                }
                create_unit = {
                    division = "name = \"红军\" division_template = \"红军\" start_experience_factor = 0.3"
                    owner = NAD
                }
            }
            for_loop_effect = {
                start = 0
                end = 4
                every_owned_state = {
                    create_unit = {
                        division = "name = \"罗西亚民兵\" division_template = \"罗西亚民兵\" start_experience_factor = 0.1"
                        owner = NAD
                    }
                }
            }
        }
        BLW = {
            create_faction = Rossiya_frozen_war_faction
            add_to_faction = KNI
        }
        KNI = {
            declare_war_on = {
                target = BLF
                type = annex_everything
            }
            declare_war_on = {
                target = NAD
                type = annex_everything
            }
        }
        BLW = {
            declare_war_on = {
                target = BLF
                type = annex_everything
            }
            declare_war_on = {
                target = NAD
                type = annex_everything
            }
        }
        BLF = {
            declare_war_on = {
                target = NAD
                type = annex_everything
            }
        }
    }
}