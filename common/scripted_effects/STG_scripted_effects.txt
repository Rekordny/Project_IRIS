#检测政府稳定
STG_check_unrest = {
    if = {
        limit = {
            STG = {
                check_variable = {STG_global_unrest > 80}
            }
        }
        STG = {
            if = {
                limit = {
                    has_idea = STG_unrest_1
                }
                remove_ideas = STG_unrest_1
            }
            if = {
                limit = {
                    has_idea = STG_unrest_2
                }
                remove_ideas = STG_unrest_2
            }
            if = {
                limit = {
                    has_idea = STG_unrest_3
                }
                remove_ideas = STG_unrest_3
            }
            if = {
                limit = {
                    has_idea = STG_unrest_4
                }
                remove_ideas = STG_unrest_4
            }
            if = {
                limit = {
                    has_idea = STG_unrest_5
                }
                remove_ideas = STG_unrest_5
            }
            if = {
                NOT = {
                    has_idea = STG_unrest_6
                }
                add_ideas = STG_unrest_6
            }
        }
    }
    else_if = {
        limit = {
            STG = {
                check_variable = {STG_global_unrest > 60}
            }
        }
        STG = {
            if = {
                limit = {
                    has_idea = STG_unrest_1
                }
                remove_ideas = STG_unrest_1
            }
            if = {
                limit = {
                    has_idea = STG_unrest_2
                }
                remove_ideas = STG_unrest_2
            }
            if = {
                limit = {
                    has_idea = STG_unrest_3
                }
                remove_ideas = STG_unrest_3
            }
            if = {
                limit = {
                    has_idea = STG_unrest_4
                }
                remove_ideas = STG_unrest_4
            }
            if = {
                limit = {
                    has_idea = STG_unrest_6
                }
                remove_ideas = STG_unrest_6
            }
            if = {
                NOT = {
                    has_idea = STG_unrest_5
                }
                add_ideas = STG_unrest_5
            }
        }
    }
    else_if = {
        limit = {
            STG = {
                check_variable = {STG_global_unrest > 40}
            }
        }
        STG = {
            if = {
                limit = {
                    has_idea = STG_unrest_1
                }
                remove_ideas = STG_unrest_1
            }
            if = {
                limit = {
                    has_idea = STG_unrest_2
                }
                remove_ideas = STG_unrest_2
            }
            if = {
                limit = {
                    has_idea = STG_unrest_3
                }
                remove_ideas = STG_unrest_3
            }
            if = {
                limit = {
                    has_idea = STG_unrest_5
                }
                remove_ideas = STG_unrest_5
            }
            if = {
                limit = {
                    has_idea = STG_unrest_6
                }
                remove_ideas = STG_unrest_6
            }
            if = {
                NOT = {
                    has_idea = STG_unrest_4
                }
                add_ideas = STG_unrest_4
            }
        }
    }
    else_if = {
        limit = {
            STG = {
                check_variable = {STG_global_unrest > 25}
            }
        }
        STG = {
            if = {
                limit = {
                    has_idea = STG_unrest_1
                }
                remove_ideas = STG_unrest_1
            }
            if = {
                limit = {
                    has_idea = STG_unrest_2
                }
                remove_ideas = STG_unrest_2
            }
            if = {
                limit = {
                    has_idea = STG_unrest_4
                }
                remove_ideas = STG_unrest_4
            }
            if = {
                limit = {
                    has_idea = STG_unrest_5
                }
                remove_ideas = STG_unrest_5
            }
            if = {
                limit = {
                    has_idea = STG_unrest_6
                }
                remove_ideas = STG_unrest_6
            }
            if = {
                NOT = {
                    has_idea = STG_unrest_3
                }
                add_ideas = STG_unrest_3
            }
        }
    }
    else_if = {
        limit = {
            STG = {
                check_variable = {STG_global_unrest > 10}
            }
        }
        STG = {
            if = {
                limit = {
                    has_idea = STG_unrest_1
                }
                remove_ideas = STG_unrest_1
            }
            if = {
                limit = {
                    has_idea = STG_unrest_3
                }
                remove_ideas = STG_unrest_3
            }
            if = {
                limit = {
                    has_idea = STG_unrest_4
                }
                remove_ideas = STG_unrest_4
            }
            if = {
                limit = {
                    has_idea = STG_unrest_5
                }
                remove_ideas = STG_unrest_5
            }
            if = {
                limit = {
                    has_idea = STG_unrest_6
                }
                remove_ideas = STG_unrest_6
            }
            if = {
                NOT = {
                    has_idea = STG_unrest_2
                }
                add_ideas = STG_unrest_2
            }
        }
    }
    else_if = {
        limit = {
            STG = {
                check_variable = {STG_global_unrest <= 0}
            }
        }
        STG = {
            if = {
                limit = {
                    has_idea = STG_unrest_2
                }
                remove_ideas = STG_unrest_2
            }
            if = {
                limit = {
                    has_idea = STG_unrest_3
                }
                remove_ideas = STG_unrest_3
            }
            if = {
                limit = {
                    has_idea = STG_unrest_4
                }
                remove_ideas = STG_unrest_4
            }
            if = {
                limit = {
                    has_idea = STG_unrest_5
                }
                remove_ideas = STG_unrest_5
            }
            if = {
                limit = {
                    has_idea = STG_unrest_6
                }
                remove_ideas = STG_unrest_6
            }
            if = {
                NOT = {
                    has_idea = STG_unrest_1
                }
                add_ideas = STG_unrest_1
            }
        }
    }     
}
#检测卡美洛派威胁
STG_check_cam_unrest = {
    if = {
        limit = {
            STG = {
                check_variable = {STG_cam_unrest < 10}
            }
        }
        STG = {
            remove_ideas = STG_cam_discontent_middle
            remove_ideas = STG_cam_discontent_high
            remove_ideas = STG_cam_discontent_very_high
            add_ideas = STG_cam_discontent_low
        }
    }
    else_if = {
        limit = {
            STG = {
                check_variable = {STG_cam_unrest > 20}
            }
        }
        STG = {
            remove_ideas = STG_cam_discontent_low
            remove_ideas = STG_cam_discontent_high
            remove_ideas = STG_cam_discontent_very_high
            add_ideas = STG_cam_discontent_middle
        }
    }
    else_if = {
        limit = {
            STG = {
                check_variable = {STG_cam_unrest > 40}
            }
        }
        STG = {
            remove_ideas = STG_cam_discontent_low
            remove_ideas = STG_cam_discontent_middle
            remove_ideas = STG_cam_discontent_very_high
            add_ideas = STG_cam_discontent_high
        }
    }
    else_if = {
        limit = {
            STG = {
                check_variable = {STG_cam_unrest > 60}
            }
        }
        STG = {
            remove_ideas = STG_cam_discontent_low
            remove_ideas = STG_cam_discontent_middle
            remove_ideas = STG_cam_discontent_high
            add_ideas = STG_cam_discontent_very_high
        }
    }
}
#检测乌斯拉尔裔威胁
STG_check_usr_unrest = {
    if = {
        limit = {
            STG = {
                check_variable = {STG_usr_unrest < 10}
            }
        }
        STG = {
            remove_ideas = STG_usr_discontent_middle
            remove_ideas = STG_usr_discontent_high
            remove_ideas = STG_usr_discontent_very_high
            add_ideas = STG_usr_discontent_low
        }
    }
    else_if = {
        limit = {
            STG = {
                check_variable = {STG_usr_unrest > 20}
            }
        }
        STG = {
            remove_ideas = STG_usr_discontent_low
            remove_ideas = STG_usr_discontent_high
            remove_ideas = STG_usr_discontent_very_high
            add_ideas = STG_usr_discontent_middle
        }
    }
    else_if = {
        limit = {
            STG = {
                check_variable = {STG_usr_unrest > 40}
            }
        }
        STG = {
            remove_ideas = STG_usr_discontent_low
            remove_ideas = STG_usr_discontent_middle
            remove_ideas = STG_usr_discontent_very_high
            add_ideas = STG_usr_discontent_high
        }
    }
    else_if = {
        limit = {
            STG = {
                check_variable = {STG_usr_unrest > 60}
            }
        }
        STG = {
            remove_ideas = STG_usr_discontent_low
            remove_ideas = STG_usr_discontent_middle
            remove_ideas = STG_usr_discontent_high
            add_ideas = STG_usr_discontent_very_high
        }
    }
}
#安抚乌斯拉尔裔
STG_reduce_usr_unrest = {
    custom_effect_tooltip = STG_reduce_usr_unrest_desc
    hidden_effect = {
    STG = {add_to_variable = {STG_usr_unrest = -5}}
    STG_check_usr_unrest = yes
    }
}
#安抚乌斯拉尔裔-大
STG_reduce_usr_unrest_big = {
    custom_effect_tooltip = STG_reduce_usr_unrest_big_desc
    hidden_effect = {
    STG = {add_to_variable = {STG_usr_unrest = -10}}
    STG_check_usr_unrest = yes
    }
}
#激怒乌斯拉尔裔
STG_increase_usr_unrest = {
    custom_effect_tooltip = STG_increase_usr_unrest_desc
    hidden_effect = {
    STG = {add_to_variable = {STG_usr_unrest = 5}}
    STG_check_usr_unrest = yes
    }
}
#激怒乌斯拉尔裔-大
STG_increase_usr_unrest_big = {
    custom_effect_tooltip = STG_increase_usr_unrest_big_desc
    hidden_effect = {
    STG = {add_to_variable = {STG_usr_unrest = 10}}
    STG_check_usr_unrest = yes
    }
}
#打击卡美洛派
STG_reduce_cam_unrest = {
    custom_effect_tooltip = STG_reduce_cam_unrest_desc
    hidden_effect = {
    STG = {add_to_variable = {STG_cam_unrest = -5}}
    STG_check_cam_unrest = yes
    }
}
#打击卡美洛派-大
STG_reduce_cam_unrest_big = {
    custom_effect_tooltip = STG_reduce_cam_unrest_big_desc
    hidden_effect = {
    STG = {add_to_variable = {STG_cam_unrest = -10}}
    STG_check_cam_unrest = yes
    }
}
#激怒卡美洛派
STG_increase_cam_unrest = {
    custom_effect_tooltip = STG_increase_cam_unrest_desc
    hidden_effect = {
    STG = {add_to_variable = {STG_cam_unrest = 5}}
    STG_check_cam_unrest = yes
    }
}
#激怒卡美洛派-大
STG_increase_cam_unrest_big = {
    custom_effect_tooltip = STG_increase_cam_unrest_big_desc
    hidden_effect = {
    STG = {add_to_variable = {STG_cam_unrest = 10}}
    STG_check_cam_unrest = yes
    }
}
#提高稳定度
STG_decrease_global_unrest = {
    custom_effect_tooltip = STG_decrease_global_unrest_desc
    hidden_effect = {
    STG = {add_to_variable = {STG_global_unrest = -5}}
    STG_check_unrest = yes
    }
}
#提高稳定度-大
STG_decrease_global_unrest_big = {
    custom_effect_tooltip = STG_decrease_global_unrest_big_desc
    hidden_effect = {
    STG = {add_to_variable = {STG_global_unrest = -10}}
    STG_check_unrest = yes
    }
}
#降低稳定度
STG_increase_global_unrest = {
    custom_effect_tooltip = STG_increase_global_unrest_big_desc
    hidden_effect = {
    STG = {add_to_variable = {STG_global_unrest = 5}}
    STG_check_unrest = yes
    }
}
#降低稳定度-大
STG_increase_global_unrest_big = {
    custom_effect_tooltip = STG_increase_global_unrest_big_desc
    hidden_effect = {
    STG = {add_to_variable = {STG_global_unrest = 10}}
    STG_check_unrest = yes
    }
}
#降低稳定度-极大
STG_increase_global_unrest_very_big = {
    custom_effect_tooltip = STG_increase_global_unrest_very_big_desc
    hidden_effect = {
    STG = {add_to_variable = {STG_global_unrest = 20}}
    STG_check_unrest = yes
    }
}
#议会支持加一
STG_add_one_supporter = {
    custom_effect_tooltip = STG_add_one_supporter_desc
    hidden_effect = {
        STG = {add_to_variable = {STG_supporter = 1}}
        if = {
            limit = {
                has_country_flag = STG_ilya_issue_1_passed
                }
                clamp_temp_variable = {
                    var = STG_supporter
                    max = 33
                    min = 0
                }
            }
        else = {
            clamp_temp_variable = {
                var = STG_supporter
                max = 30
                min = 0
            }
        }
    }
}
#议会支持加二
STG_add_two_supporters = {
    custom_effect_tooltip = STG_add_two_supporters_desc
    hidden_effect = {
        STG = {add_to_variable = {STG_supporter = 2}}
        if = {
            limit = {
                has_country_flag = STG_ilya_issue_1_passed
                }
                clamp_temp_variable = {
                    var = STG_supporter
                    max = 33
                    min = 0
                }
            }
        else = {
            clamp_temp_variable = {
                var = STG_supporter
                max = 30
                min = 0
            }
        }
    }
}
#议会支持加三
STG_add_three_supporters = {
    custom_effect_tooltip = STG_add_three_supporters_desc
    hidden_effect = {
        STG = {add_to_variable = {STG_supporter = 3}}
        if = {
            limit = {
                has_country_flag = STG_ilya_issue_1_passed
                }
                clamp_temp_variable = {
                    var = STG_supporter
                    max = 33
                    min = 0
                }
            }
        else = {
            clamp_temp_variable = {
                var = STG_supporter
                max = 30
                min = 0
            }
        }
    }
}
#议会支持加四
STG_add_four_supporters = {
    custom_effect_tooltip = STG_add_four_supporters_desc
    hidden_effect = {
        STG = {add_to_variable = {STG_supporter = 4}}
        if = {
            limit = {
                has_country_flag = STG_ilya_issue_1_passed
                }
                clamp_temp_variable = {
                    var = STG_supporter
                    max = 33
                    min = 0
                }
            }
        else = {
            clamp_temp_variable = {
                var = STG_supporter
                max = 30
                min = 0
            }
        }
    }
}
#议会支持减一
STG_reduce_one_supporter = {
    custom_effect_tooltip = STG_reduce_one_supporter_desc
    hidden_effect = {
        STG = {add_to_variable = {STG_supporter = -1}}
        if = {
            limit = {
                has_country_flag = STG_ilya_issue_1_passed
                }
                clamp_temp_variable = {
                    var = STG_supporter
                    max = 33
                    min = 0
                }
            }
        else = {
            clamp_temp_variable = {
                var = STG_supporter
                max = 30
                min = 0
            }
        }
    }
}

#议会支持减二
STG_reduce_two_supporters = {
    custom_effect_tooltip = STG_reduce_two_supporters_desc
    hidden_effect = {
        STG = {add_to_variable = {STG_supporter = -2}}
        if = {
            limit = {
                has_country_flag = STG_ilya_issue_1_passed
                }
                clamp_temp_variable = {
                    var = STG_supporter
                    max = 33
                    min = 0
                }
            }
        else = {
            clamp_temp_variable = {
                var = STG_supporter
                max = 30
                min = 0
            }
        }
    }
}
#议会支持减三
STG_reduce_three_supporters = {
    custom_effect_tooltip = STG_reduce_three_supporters_desc
    hidden_effect = {
        STG = {add_to_variable = {STG_supporter = -3}}
        if = {
            limit = {
                has_country_flag = STG_ilya_issue_1_passed
                }
                clamp_temp_variable = {
                    var = STG_supporter
                    max = 33
                    min = 0
                }
            }
        else = {
            clamp_temp_variable = {
                var = STG_supporter
                max = 30
                min = 0
            }
        }
    }
}
#议会支持减四
STG_reduce_four_supporters = {
    custom_effect_tooltip = STG_reduce_four_supporters_desc
    hidden_effect = {
        STG = {add_to_variable = {STG_supporter = -4}}
        if = {
            limit = {
                has_country_flag = STG_ilya_issue_1_passed
                }
                clamp_temp_variable = {
                    var = STG_supporter
                    max = 33
                    min = 0
                }
            }
        else = {
            clamp_temp_variable = {
                var = STG_supporter
                max = 30
                min = 0
            }
        }
    }
}
#议会支持减五
STG_reduce_five_supporters = {
    custom_effect_tooltip = STG_reduce_five_supporters_desc
    hidden_effect = {
        STG = {add_to_variable = {STG_supporter = -5}}
        if = {
            limit = {
                has_country_flag = STG_ilya_issue_1_passed
                }
                clamp_temp_variable = {
                    var = STG_supporter
                    max = 33
                    min = 0
                }
            }
        else = {
            clamp_temp_variable = {
                var = STG_supporter
                max = 30
                min = 0
            }
        }
    }
}
#议会支持减八
STG_reduce_eight_supporters = {
    custom_effect_tooltip = STG_reduce_eight_supporters_desc
    hidden_effect = {
        STG = {add_to_variable = {STG_supporter = -8}}
        if = {
            limit = {
                has_country_flag = STG_ilya_issue_1_passed
                }
                clamp_temp_variable = {
                    var = STG_supporter
                    max = 33
                    min = 0
                }
            }
        else = {
            clamp_temp_variable = {
                var = STG_supporter
                max = 30
                min = 0
            }
        }
    }
}
#减少军队不满
STG_reduce_army_discontent = {
    custom_effect_tooltip = STG_reduce_army_discontent_desc
    hidden_effect = {
        STG = {add_to_variable = {STG_army_discontent = -5}}
        clamp_temp_variable = {
            var = STG_army_discontent
            max = 100
            min = 0
        }
    }
}
#减少军队不满-大
STG_reduce_army_discontent_big = {
    custom_effect_tooltip = STG_reduce_army_discontent_big_desc
    hidden_effect = {
        STG = {add_to_variable = {STG_army_discontent = -8}}
        clamp_temp_variable = {
            var = STG_army_discontent
            max = 100
            min = 0
        }
    }
}
#增加军队不满
STG_increase_army_discontent = {
    custom_effect_tooltip = STG_increase_army_discontent_desc
    hidden_effect = {
        STG = {add_to_variable = {STG_army_discontent = 5}}
        clamp_temp_variable = {
            var = STG_army_discontent
            max = 100
            min = 0
        }
    }
}
#增加军队不满-大
STG_increase_army_discontent_big = {
    custom_effect_tooltip = STG_increase_army_discontent_big_desc
    hidden_effect = {
        STG = {add_to_variable = {STG_army_discontent = 10}}
        clamp_temp_variable = {
            var = STG_army_discontent
            max = 100
            min = 0
        }
    }
}
#设定为USR傀儡
STG_became_USR_puppet = {
    STG = {
        country_event = {id = STG_civ_war.1 days = 200}
        add_stability = -0.20
        add_war_support = -0.20
        set_politics = {
            ruling_party = fascism
        }
        promote_character = {
            character = STG_BF109
            ideology = sub_Facism
        }
        add_popularity = {
            ideology = fascism
            popularity = 0.15
        }
        set_country_flag = STG_is_usr_puppet
        set_cosmetic_tag = STG_usr_subject_fascism
        remove_ideas = STG_darjeeling_3
        remove_ideas = STG_paradox
        remove_ideas = STG_senshado_state
        remove_ideas = STG_Empty_Throne
        remove_ideas = STG_Graceful_Army
        remove_ideas = STG_Graceful_Army_attack
        remove_ideas = STG_Graceful_Army_defence
        remove_ideas = STG_Hold_Your_Gun
        remove_ideas = STG_Nervous_Army
        remove_ideas = STG_controlled_Army
        remove_ideas = STG_usr_discontent_low
        remove_ideas = STG_usr_discontent_middle
        remove_ideas = STG_usr_discontent_high
        remove_ideas = STG_usr_discontent_very_high
        remove_ideas = STG_usr_unrest_end
        remove_ideas = STG_cam_discontent_low
        remove_ideas = STG_cam_discontent_middle
        remove_ideas = STG_cam_discontent_high
        remove_ideas = STG_cam_discontent_very_high
        remove_ideas = STG_watch_our_border
        remove_ideas = STG_neutrality_idea
        remove_ideas = STG_unrest_1
        remove_ideas = STG_unrest_2
        remove_ideas = STG_unrest_3
        remove_ideas = STG_unrest_4
        remove_ideas = STG_unrest_5
        remove_ideas = STG_unrest_6
        remove_ideas = STG_ilya_storm
        remove_ideas = STG_ilya_mana
        remove_ideas = STG_rearmament
        remove_ideas = STG_army_reorganization
        remove_ideas = STG_neurtrality_act
        remove_ideas = STG_industrialization_committe
        remove_ideas = STG_controlled_labor_union
        remove_ideas = STG_national_senshado
        remove_ideas = STG_call_of_duty
        remove_ideas = STG_call_of_duty_2
        remove_ideas = STG_cut_mil_cost
        remove_ideas = STG_for_the_emperor
        retire_character = STG_darjeeling
        retire_character = STG_darjeeling_1
        retire_character = STG_darjeeling_2
        retire_character = STG_darjeeling_3
        retire_character = STG_Lynette_Bishop
        retire_character = STG_parliament
        retire_character = STG_junta_parliament
        retire_character = STG_ilya
        retire_character = STG_grey
        retire_character = STG_orange_pekoe
        retire_character = STG_assam
        retire_character = STG_rosehip
        add_ideas = STG_puppet_of_usr
        add_ideas = STG_voice_of_rebellion
        add_ideas = STG_DrI
        country_lock_all_division_template = no
        delete_unit_template_and_units = {
            division_template = "St. Gloriana Tank Division"
            disband = no
        }
        delete_unit_template_and_units = {
            division_template = "National Guard"
            disband = no
        }
    }
    hidden_effect = {
		USR = { 
			add_ai_strategy = {
			    type = alliance
			    id = STG
			    value = 2000
			}
		}
		STG = {
			add_ai_strategy = {
			    type = alliance
			    id = USR
			    value = 2000
			}
		}
    }
}

