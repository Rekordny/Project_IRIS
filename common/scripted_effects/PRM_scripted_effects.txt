#燃烧书籍
PRM_burning_books = {
    add_to_variable = {
        PRM_book = -1
    }
    random_list = {
        7 = {
            add_to_variable = {
                PRM_book_stability_factor = 0.01
            }
            custom_effect_tooltip = PRM_book_stability_factor1.TXT
        }
        7 = {
            add_to_variable = {
                PRM_book_war_support_factor = 0.01
            }
            custom_effect_tooltip = PRM_book_war_support_factor1.TXT
        }
        7 = {
            add_to_variable = {
                PRM_book_land_reinforce_rate = 0.005
            }
            custom_effect_tooltip = PRM_book_land_reinforce_rate1.TXT
        }
        7 = {
            add_to_variable = {
                PRM_book_army_attack_factor = 0.01
            }
            custom_effect_tooltip = PRM_book_army_attack_factor1.TXT
        }
        7 = {
            add_to_variable = {
                PRM_book_army_defence_factor = 0.01
            }
            custom_effect_tooltip = PRM_book_army_defence_factor1.TXT
        }
        7 = {
            add_to_variable = {
                PRM_book_army_morale_factor = 0.05
            }
            custom_effect_tooltip = PRM_book_army_morale_factor1.TXT
        }
        7 = {
            add_to_variable = {
                PRM_book_army_org_factor = 0.05
            }
            custom_effect_tooltip = PRM_book_army_org_factor1.TXT
        }
        7 = {
            add_to_variable = {
                PRM_book_attrition = -0.05
            }
            custom_effect_tooltip = PRM_book_attrition1.TXT
        }
        7 = {
            add_to_variable = {
                PRM_book_breakthrough_factor = 0.05
            }
            custom_effect_tooltip = PRM_book_breakthrough_factor1.TXT
        }
        7 = {
            add_to_variable = {
                PRM_book_army_speed_factor = 0.01
            }
            custom_effect_tooltip = PRM_book_army_speed_factor1.TXT
        }
        7 = {
            add_to_variable = {
                PRM_book_max_planning_factor = 0.03
            }
            custom_effect_tooltip = PRM_book_max_planning_factor1.TXT
        }
        7 = {
            add_to_variable = {
                PRM_book_terrain_penalty_reduction = 0.05
            }
            custom_effect_tooltip = PRM_book_terrain_penalty_reduction1.TXT
        }
        7 = {
            add_to_variable = {
                PRM_book_political_power_factor = 0.03
            }
            custom_effect_tooltip = PRM_book_political_power_factor1.TXT
        }
        7 = {
            custom_effect_tooltip = PRM_book_bad.TXT
        }
        2 = {
            custom_effect_tooltip = PRM_book_big.TXT
            add_to_variable = {
                PRM_book_stability_factor = 0.01
            }
            add_to_variable = {
                PRM_book_war_support_factor = 0.01
            }
            add_to_variable = {
                PRM_book_land_reinforce_rate = 0.005
            }
            add_to_variable = {
                PRM_book_army_attack_factor = 0.01
            }
            add_to_variable = {
                PRM_book_army_defence_factor = 0.01
            }
            add_to_variable = {
                PRM_book_army_morale_factor = 0.05
            }
            add_to_variable = {
                PRM_book_army_org_factor = 0.05
            }
            add_to_variable = {
                PRM_book_attrition = -0.05
            }
            add_to_variable = {
                PRM_book_breakthrough_factor = 0.05
            }
            add_to_variable = {
                PRM_book_army_speed_factor = 0.01
            }
            add_to_variable = {
                PRM_book_max_planning_factor = 0.03
            }
            add_to_variable = {
                PRM_book_terrain_penalty_reduction = 0.05
            }
            add_to_variable = {
                PRM_book_terrain_penalty_reduction = 0.05
            }
            add_to_variable = {
                PRM_book_political_power_factor = 0.03
            }
        }
    }
}

#开启/关闭卡组界面
open_card_group_interface = {
    if = {
        limit = {
            TAG = PRM
        }
        if = {
            limit = {
                has_country_flag = PRM_invited_guests_flag
            }
            clr_country_flag = PRM_invited_guests_flag
        }
        else = {
            set_country_flag = PRM_invited_guests_flag
            PRM_load_character_set_book_manager = yes
            PRM_show_all_book_pages = yes
        }
    }
    else = {
        if = {
            limit = {
                has_country_flag = PRM_becoming_guest_flag
            }
            clr_country_flag = PRM_becoming_guest_flag
        }
        else = {
            set_country_flag = PRM_becoming_guest_flag
            PRM_select_characterset_book_manager_guest = yes
            PRM_show_all_book_pages_guest = yes
        }
    }
}

#展示所有书页-司书
PRM_show_all_book_pages = {
    clear_array = global.show_all_book_pages_array
    add_to_array = {
        global.show_all_book_pages_array = 1
    }
    add_to_array = {
        global.show_all_book_pages_array = 2
    }
    add_to_array = {
        global.show_all_book_pages_array = 3
    }
    add_to_array = {
        global.show_all_book_pages_array = 4
    }
    add_to_array = {
        global.show_all_book_pages_array = 5
    }
    add_to_array = {
        global.show_all_book_pages_array = 100001
    }
    add_to_array = {
        global.show_all_book_pages_array = 100002
    }
    add_to_array = {
        global.show_all_book_pages_array = 100003
    }
    add_to_array = {
        global.show_all_book_pages_array = 100004
    }
    add_to_array = {
        global.show_all_book_pages_array = 100005
    }
    add_to_array = {
        global.show_all_book_pages_array = 23301
    }
}
#展示所有书页-来宾
PRM_show_all_book_pages_guest = {
    clear_array = global.show_all_book_pages_array_guest
    add_to_array = {
        global.show_all_book_pages_array_guest = 1
    }
    add_to_array = {
        global.show_all_book_pages_array_guest = 2
    }
    add_to_array = {
        global.show_all_book_pages_array_guest = 3
    }
    add_to_array = {
        global.show_all_book_pages_array_guest = 4
    }
    add_to_array = {
        global.show_all_book_pages_array_guest = 5
    }
    add_to_array = {
        global.show_all_book_pages_array_guest = 100001
    }
    add_to_array = {
        global.show_all_book_pages_array_guest = 100002
    }
    add_to_array = {
        global.show_all_book_pages_array_guest = 100003
    }
    add_to_array = {
        global.show_all_book_pages_array_guest = 100004
    }
    add_to_array = {
        global.show_all_book_pages_array_guest = 100005
    }
    add_to_array = {
        global.show_all_book_pages_array_guest = 23301
    }
}

#载入角色-司书
#0为上锁
#1为可选
#2为选中
PRM_load_character_set_book_manager = {
    clear_array = global.current_role_array
    add_to_array = {
        global.current_role_array = 2
    }
    add_to_array = {
        global.current_role_array = 1
    }
    add_to_array = {
        global.current_role_array = 1
    }
    add_to_array = {
        global.current_role_array = 0
    }
    add_to_array = {
        global.current_role_array = 0
    }
    #设置默认选择第1位人物
    set_variable = {
        currently_selected_role_set_book_manager = 0
    }
}


#载入角色-来宾
#0为上锁
#1为可选
#2为选中
PRM_load_character_set_guest = {
    clear_array = global.current_role_array_guest
    add_to_array = {
        global.current_role_array_guest = 2
    }
    add_to_array = {
        global.current_role_array_guest = 1
    }
    add_to_array = {
        global.current_role_array_guest = 1
    }
    add_to_array = {
        global.current_role_array_guest = 0
    }
    add_to_array = {
        global.current_role_array_guest = 0
    }
    #设置默认选择第1位人物
    set_variable = {
        currently_selected_role_set_book_manager = 0
    }
}
#选择角色-司书
PRM_select_characterset_book_manager = {
    #如果是解锁的角色框（1 2 3）
    if = {
        limit = {
            OR = {
                check_variable = {
                    current_role_array_i = 0
                }
                check_variable = {
                    current_role_array_i = 1
                }
                check_variable = {
                    current_role_array_i = 2
                }
            }
        }
        #清除左侧展示框
        clear_array = global.selected_card_set_secretary_array_0
        #刷新当前选择的角色框（清除重新载入）
        clear_array = global.current_role_array
        #如果当前选择第一个
        if = {
            limit = {
                check_variable = {
                    current_role_array_i = 0
                }
            }
            #重新载入
            add_to_array = {
                global.current_role_array = 2
            }
            #记录当前选择角色
            set_variable = {
                currently_selected_role_set_book_manager = 0
            }
            #载入当前角色卡组
            for_each_loop = {
                array = global.selected_card_set_secretary_array_1
                value = v
                add_to_array = {
                    global.selected_card_set_secretary_array_0 = v
                }
            }
        }
        else = {
            #重新载入
            add_to_array = {
                global.current_role_array = 1
            }
        }
        #如果当前选择第二个
        if = {
            limit = {
                check_variable = {
                    current_role_array_i = 1
                }
            }
            #重新载入
            add_to_array = {
                global.current_role_array = 2
            }
            #记录当前选择角色
            set_variable = {
                currently_selected_role_set_book_manager = 1
            }
            #载入当前角色卡组
            for_each_loop = {
                array = global.selected_card_set_secretary_array_2
                value = v
                add_to_array = {
                    global.selected_card_set_secretary_array_0 = v
                }
            }
        }
        else = {
            #重新载入
            add_to_array = {
                global.current_role_array = 1
            }
        }
        #如果当前选择第三个
        if = {
            limit = {
                check_variable = {
                    current_role_array_i = 2
                }
            }
            #重新载入
            add_to_array = {
                global.current_role_array = 2
            }
            #记录当前选择角色
            set_variable = {
                currently_selected_role_set_book_manager = 2
            }
            #载入当前角色卡组
            for_each_loop = {
                array = global.selected_card_set_secretary_array_3
                value = v
                add_to_array = {
                    global.selected_card_set_secretary_array_0 = v
                }
            }
        }
        else = {
            #重新载入
            add_to_array = {
                global.current_role_array = 1
            }
        }
        #重新载入
        add_to_array = {
            global.current_role_array = 0
        }
        #重新载入
        add_to_array = {
            global.current_role_array = 0
        }
    }
}


#选择角色-来宾
PRM_select_characterset_book_manager_guest = {
    #如果是解锁的角色框（1 2 3）
    if = {
        limit = {
            OR = {
                check_variable = {
                    current_role_array_i = 0
                }
                check_variable = {
                    current_role_array_i = 1
                }
                check_variable = {
                    current_role_array_i = 2
                }
            }
        }
        #清除左侧展示框
        clear_array = global.selected_card_set_secretary_array_0_guest
        #刷新当前选择的角色框（清除重新载入）
        clear_array = global.current_role_array_guest
        #如果当前选择第一个
        if = {
            limit = {
                check_variable = {
                    current_role_array_i = 0
                }
            }
            #重新载入
            add_to_array = {
                global.current_role_array_guest = 2
            }
            #记录当前选择角色
            set_variable = {
                currently_selected_role_set_book_manager = 0
            }
            #载入当前角色卡组
            for_each_loop = {
                array = global.selected_card_set_secretary_array_1_guest
                value = v
                add_to_array = {
                    global.selected_card_set_secretary_array_0_guest = v
                }
            }
        }
        else = {
            #重新载入
            add_to_array = {
                global.current_role_array_guest = 1
            }
        }
        #如果当前选择第二个
        if = {
            limit = {
                check_variable = {
                    current_role_array_i = 1
                }
            }
            #重新载入
            add_to_array = {
                global.current_role_array_guest = 2
            }
            #记录当前选择角色
            set_variable = {
                currently_selected_role_set_book_manager = 1
            }
            #载入当前角色卡组
            for_each_loop = {
                array = global.selected_card_set_secretary_array_2_guest
                value = v
                add_to_array = {
                    global.selected_card_set_secretary_array_0_guest = v
                }
            }
        }
        else = {
            #重新载入
            add_to_array = {
                global.current_role_array_guest = 1
            }
        }
        #如果当前选择第三个
        if = {
            limit = {
                check_variable = {
                    current_role_array_i = 2
                }
            }
            #重新载入
            add_to_array = {
                global.current_role_array_guest = 2
            }
            #记录当前选择角色
            set_variable = {
                currently_selected_role_set_book_manager = 2
            }
            #载入当前角色卡组
            for_each_loop = {
                array = global.selected_card_set_secretary_array_3_guest
                value = v
                add_to_array = {
                    global.selected_card_set_secretary_array_0_guest = v
                }
            }
        }
        else = {
            #重新载入
            add_to_array = {
                global.current_role_array_guest = 1
            }
        }
        #重新载入
        add_to_array = {
            global.current_role_array_guest = 0
        }
        #重新载入
        add_to_array = {
            global.current_role_array_guest = 0
        }
    }
}

#删除当前选择书页-司书
PRM_del_book_pages_to_card_set_book_manager = {
    if = {
        limit = {
            check_variable = {
                currently_selected_role_set_book_manager = 0
            }
        }
        remove_from_array = {
            array = global.selected_card_set_secretary_array_1
            index = show_all_book_pages_array_i
        }
        remove_from_array = {
            array = global.selected_card_set_secretary_array_0
            index = show_all_book_pages_array_i
        }
    }
    if = {
        limit = {
            check_variable = {
                currently_selected_role_set_book_manager = 1
            }
        }
        remove_from_array = {
            array = global.selected_card_set_secretary_array_2
            index = show_all_book_pages_array_i
        }
        remove_from_array = {
            array = global.selected_card_set_secretary_array_0
            index = show_all_book_pages_array_i
        }
    }
    if = {
        limit = {
            check_variable = {
                currently_selected_role_set_book_manager = 2
            }
        }
        remove_from_array = {
            array = global.selected_card_set_secretary_array_3
            index = show_all_book_pages_array_i
        }
        remove_from_array = {
            array = global.selected_card_set_secretary_array_0
            index = show_all_book_pages_array_i
        }
    }
}


#删除当前选择书页-来宾
PRM_del_book_pages_to_card_set_guest = {
    if = {
        limit = {
            check_variable = {
                currently_selected_role_set_book_manager = 0
            }
        }
        remove_from_array = {
            array = global.selected_card_set_secretary_array_1_guest
            index = show_all_book_pages_array_i
        }
        remove_from_array = {
            array = global.selected_card_set_secretary_array_0_guest
            index = show_all_book_pages_array_i
        }
    }
    if = {
        limit = {
            check_variable = {
                currently_selected_role_set_book_manager = 1
            }
        }
        remove_from_array = {
            array = global.selected_card_set_secretary_array_2_guest
            index = show_all_book_pages_array_i
        }
        remove_from_array = {
            array = global.selected_card_set_secretary_array_0_guest
            index = show_all_book_pages_array_i
        }
    }
    if = {
        limit = {
            check_variable = {
                currently_selected_role_set_book_manager = 2
            }
        }
        remove_from_array = {
            array = global.selected_card_set_secretary_array_3_guest
            index = show_all_book_pages_array_i
        }
        remove_from_array = {
            array = global.selected_card_set_secretary_array_0_guest
            index = show_all_book_pages_array_i
        }
    }
}

#添加书页到卡组-司书
PRM_add_book_pages_to_card_set_book_manager = {
    if = {
        limit = {
            check_variable = {
                global.selected_card_set_secretary_array_0^num < 9
            }
        }
        add_to_array = {
            global.selected_card_set_secretary_array_0 = show_all_book_pages_array_v
        }
        #如果当前选择第一个
        if = {
            limit = {
                check_variable = {
                    currently_selected_role_set_book_manager = 0
                }
            }
            add_to_array = {
                global.selected_card_set_secretary_array_1 = show_all_book_pages_array_v
            }
        }
        #如果当前选择第二个
        if = {
            limit = {
                check_variable = {
                    currently_selected_role_set_book_manager = 1
                }
            }
            add_to_array = {
                global.selected_card_set_secretary_array_2 = show_all_book_pages_array_v
            }
        }
        #如果当前选择第三个
        if = {
            limit = {
                check_variable = {
                    currently_selected_role_set_book_manager = 2
                }
            }
            add_to_array = {
                global.selected_card_set_secretary_array_3 = show_all_book_pages_array_v
            }
        }
    }
}


#添加书页到卡组-来宾
PRM_add_book_pages_to_card_set_guest = {
    if = {
        limit = {
            check_variable = {
                global.selected_card_set_secretary_array_0_guest^num < 9
            }
        }
        add_to_array = {
            global.selected_card_set_secretary_array_0_guest = show_all_book_pages_array_v
        }
        #如果当前选择第一个
        if = {
            limit = {
                check_variable = {
                    currently_selected_role_set_book_manager = 0
                }
            }
            add_to_array = {
                global.selected_card_set_secretary_array_1_guest = show_all_book_pages_array_v
            }
        }
        #如果当前选择第二个
        if = {
            limit = {
                check_variable = {
                    currently_selected_role_set_book_manager = 1
                }
            }
            add_to_array = {
                global.selected_card_set_secretary_array_2_guest = show_all_book_pages_array_v
            }
        }
        #如果当前选择第三个
        if = {
            limit = {
                check_variable = {
                    currently_selected_role_set_book_manager = 2
                }
            }
            add_to_array = {
                global.selected_card_set_secretary_array_3_guest = show_all_book_pages_array_v
            }
        }
    }
}

#初始化对局数据
PRM_initialize_match_data = {
    #记录对战双方
    clear_array = global.PRM_facing_country_array
    every_country = {
        limit = {
            has_country_flag = PRM_invited_guests_flag
        }
        add_to_array = {
            global.PRM_facing_country_array = THIS
        }
        clr_country_flag = PRM_invited_guests_flag
    }
    every_country = {
        limit = {
            has_country_flag = PRM_becoming_guest_flag
        }
        add_to_array = {
            global.PRM_facing_country_array = THIS
        }
        clr_country_flag = PRM_becoming_guest_flag
    }

    #清除准备标记
    clr_country_flag = PRM_invited_guests_flag
    clr_country_flag = PRM_becoming_guest_flag
    clr_global_flag = GetPrmYes_flag
    clr_global_flag = GetPrmGuestYes_flag

    #开始接待
    set_global_flag = PRM_Start_reception_flag

    #生成来宾
    clear_array = global.PRM_guests_array
    add_to_array = {
        global.PRM_guests_array = 1
    }
    add_to_array = {
        global.PRM_guests_array = 2
    }
    add_to_array = {
        global.PRM_guests_array = 3
    }

    #记录骰子MIN
    clear_array = global.PRM_guests_dice_MIN_array
    add_to_array = {
        global.PRM_guests_dice_MIN_array = 1
    }
    add_to_array = {
        global.PRM_guests_dice_MIN_array = 2
    }
    add_to_array = {
        global.PRM_guests_dice_MIN_array = 1
    }

    #记录骰子MAX
    clear_array = global.PRM_guests_dice_MAX_array
    add_to_array = {
        global.PRM_guests_dice_MAX_array = 3
    }
    add_to_array = {
        global.PRM_guests_dice_MAX_array = 4
    }
    add_to_array = {
        global.PRM_guests_dice_MAX_array = 3
    }


    #先生成一些默认
    set_variable = {
        global.guests_character_health_1 = 30
    }
    set_variable = {
        global.guests_character_confusion_1 = 14
    }

    set_variable = {
        global.guests_character_health_2 = 35
    }
    set_variable = {
        global.guests_character_confusion_2 = 16
    }

    set_variable = {
        global.guests_character_health_3 = 30
    }
    set_variable = {
        global.guests_character_confusion_3 = 14
    }


    #生成司书
    clear_array = global.PRM_copyist_array
    add_to_array = {
        global.PRM_copyist_array = 1
    }
    add_to_array = {
        global.PRM_copyist_array = 2
    }
    add_to_array = {
        global.PRM_copyist_array = 3
    }

    #记录骰子MIN
    clear_array = global.PRM_copyist_dice_MIN_array
    add_to_array = {
        global.PRM_copyist_dice_MIN_array = 1
    }
    add_to_array = {
        global.PRM_copyist_dice_MIN_array = 2
    }
    add_to_array = {
        global.PRM_copyist_dice_MIN_array = 1
    }

    #记录骰子MAX
    clear_array = global.PRM_copyist_dice_MAX_array
    add_to_array = {
        global.PRM_copyist_dice_MAX_array = 3
    }
    add_to_array = {
        global.PRM_copyist_dice_MAX_array = 4
    }
    add_to_array = {
        global.PRM_copyist_dice_MAX_array = 3
    }


    #先生成一些默认
    set_variable = {
        global.copyist_character_health_1 = 30
    }
    set_variable = {
        global.copyist_character_confusion_1 = 14
    }

    set_variable = {
        global.copyist_character_health_2 = 35
    }
    set_variable = {
        global.copyist_character_confusion_2 = 16
    }

    set_variable = {
        global.copyist_character_health_3 = 30
    }
    set_variable = {
        global.copyist_character_confusion_3 = 14
    }


    #双方默认选择第一位
    set_variable = {
        global.PRM_role_selection_guests = 0
    }
    set_variable = {
        global.PRM_role_selection_copyist = 0
    }

    #双方开局4书页
    PRM_randomly_obtain_book_pages_storage = yes
    PRM_randomly_obtain_book_pages_storage = yes
    PRM_randomly_obtain_book_pages_storage = yes
    PRM_randomly_obtain_book_pages_storage = yes
}



#摇骰子
PRM_random_dice_points = {
    if = {
        limit = {
            check_variable = {
                global.guests_character_health_1 > 0 #一号角色血量
            }
            check_variable = {
                global.guests_character_confusion_1 > 0 #一号角色混乱
            }
        }
        clear_variable = global.PRM_dice_MIN_array_THIS
        clear_variable = global.PRM_dice_MAX_array_THIS

        set_variable = {
            global.PRM_dice_MIN_array_THIS = global.PRM_guests_dice_MIN_array^0
        }
        set_variable = {
            global.PRM_dice_MAX_array_THIS = global.PRM_guests_dice_MAX_array^0
        }
        PRM_random_dice_points_numerical_value = yes

        set_variable = {
            global.PRM_guests_dice_1 = global.PRM_random_dice_points_numerical_value
        }
        set_global_flag = PRM_guests_dice_1_flag
    }
    if = {
        limit = {
            check_variable = {
                global.guests_character_health_2 > 0 #一号角色血量
            }
            check_variable = {
                global.guests_character_confusion_2 > 0 #一号角色混乱
            }
        }
        clear_variable = global.PRM_dice_MIN_array_THIS
        clear_variable = global.PRM_dice_MAX_array_THIS

        set_variable = {
            global.PRM_dice_MIN_array_THIS = global.PRM_guests_dice_MIN_array^1
        }
        set_variable = {
            global.PRM_dice_MAX_array_THIS = global.PRM_guests_dice_MAX_array^1
        }
        PRM_random_dice_points_numerical_value = yes

        set_variable = {
            global.PRM_guests_dice_2 = global.PRM_random_dice_points_numerical_value
        }
        set_global_flag = PRM_guests_dice_2_flag
    }
    if = {
        limit = {
            check_variable = {
                global.guests_character_health_3 > 0 #一号角色血量
            }
            check_variable = {
                global.guests_character_confusion_3 > 0 #一号角色混乱
            }
        }
        clear_variable = global.PRM_dice_MIN_array_THIS
        clear_variable = global.PRM_dice_MAX_array_THIS

        set_variable = {
            global.PRM_dice_MIN_array_THIS = global.PRM_guests_dice_MIN_array^2
        }
        set_variable = {
            global.PRM_dice_MAX_array_THIS = global.PRM_guests_dice_MAX_array^2
        }
        PRM_random_dice_points_numerical_value = yes

        set_variable = {
            global.PRM_guests_dice_3 = global.PRM_random_dice_points_numerical_value
        }
        set_global_flag = PRM_guests_dice_3_flag
    }


    if = {
        limit = {
            check_variable = {
                global.copyist_character_health_1 > 0 #一号角色血量
            }
            check_variable = {
                global.copyist_character_confusion_1 > 0 #一号角色混乱
            }
        }
        clear_variable = global.PRM_dice_MIN_array_THIS
        clear_variable = global.PRM_dice_MAX_array_THIS

        set_variable = {
            global.PRM_dice_MIN_array_THIS = global.PRM_copyist_dice_MIN_array^0
        }
        set_variable = {
            global.PRM_dice_MAX_array_THIS = global.PRM_copyist_dice_MAX_array^0
        }
        PRM_random_dice_points_numerical_value = yes

        set_variable = {
            global.PRM_copyist_dice_1 = global.PRM_random_dice_points_numerical_value
        }
        set_global_flag = PRM_copyist_dice_1_flag
    }
    if = {
        limit = {
            check_variable = {
                global.copyist_character_health_2 > 0 #一号角色血量
            }
            check_variable = {
                global.copyist_character_confusion_2 > 0 #一号角色混乱
            }
        }
        clear_variable = global.PRM_dice_MIN_array_THIS
        clear_variable = global.PRM_dice_MAX_array_THIS

        set_variable = {
            global.PRM_dice_MIN_array_THIS = global.PRM_copyist_dice_MIN_array^1
        }
        set_variable = {
            global.PRM_dice_MAX_array_THIS = global.PRM_copyist_dice_MAX_array^1
        }
        PRM_random_dice_points_numerical_value = yes

        set_variable = {
            global.PRM_copyist_dice_2 = global.PRM_random_dice_points_numerical_value
        }
        set_global_flag = PRM_copyist_dice_2_flag
    }
    if = {
        limit = {
            check_variable = {
                global.copyist_character_health_3 > 0 #一号角色血量
            }
            check_variable = {
                global.copyist_character_confusion_3 > 0 #一号角色混乱
            }
        }
        clear_variable = global.PRM_dice_MIN_array_THIS
        clear_variable = global.PRM_dice_MAX_array_THIS

        set_variable = {
            global.PRM_dice_MIN_array_THIS = global.PRM_copyist_dice_MIN_array^2
        }
        set_variable = {
            global.PRM_dice_MAX_array_THIS = global.PRM_copyist_dice_MAX_array^2
        }
        PRM_random_dice_points_numerical_value = yes

        set_variable = {
            global.PRM_copyist_dice_3 = global.PRM_random_dice_points_numerical_value
        }
        set_global_flag = PRM_copyist_dice_3_flag
    }
}



#随机获取书页
PRM_randomly_obtain_book_pages_storage = {
    #来宾
    if = {
        limit = {
            check_variable = {
                global.guests_character_health_1 > 0
            }
            check_variable = {
                global.guests_character_confusion_1 > 0
            }
            check_variable = {
                global.PRM_display_current_card_holdings_guests_array_1^num < 9
            }
        }
        PRM_randomly_obtain_book_pages = yes
        add_to_array = {
            global.PRM_display_current_card_holdings_guests_array_1 = global.selected_card_set_secretary_array_1_guest^PRM_randomly_obtain_book_pages
        }
    }
    if = {
        limit = {
            check_variable = {
                global.guests_character_health_2 > 0
            }
            check_variable = {
                global.guests_character_confusion_2 > 0
            }
            check_variable = {
                global.PRM_display_current_card_holdings_guests_array_2^num < 9
            }
        }
        PRM_randomly_obtain_book_pages = yes
        add_to_array = {
            global.PRM_display_current_card_holdings_guests_array_2 = global.selected_card_set_secretary_array_2_guest^PRM_randomly_obtain_book_pages
        }
    }
    if = {
        limit = {
            check_variable = {
                global.guests_character_health_3 > 0
            }
            check_variable = {
                global.guests_character_confusion_3 > 0
            }
            check_variable = {
                global.PRM_display_current_card_holdings_guests_array_3^num < 9
            }
        }
        PRM_randomly_obtain_book_pages = yes
        add_to_array = {
            global.PRM_display_current_card_holdings_guests_array_3 = global.selected_card_set_secretary_array_3_guest^PRM_randomly_obtain_book_pages
        }
    }

    #司书
    if = {
        limit = {
            check_variable = {
                global.copyist_character_health_1 > 0
            }
            check_variable = {
                global.copyist_character_confusion_1 > 0
            }
            check_variable = {
                global.PRM_display_current_card_holdings_copyist_array_1^num < 9
            }
        }
        PRM_randomly_obtain_book_pages = yes
        add_to_array = {
            global.PRM_display_current_card_holdings_copyist_array_1 = global.selected_card_set_secretary_array_1^PRM_randomly_obtain_book_pages
        }
    }
    if = {
        limit = {
            check_variable = {
                global.copyist_character_health_2 > 0
            }
            check_variable = {
                global.copyist_character_confusion_2 > 0
            }
            check_variable = {
                global.PRM_display_current_card_holdings_copyist_array_2^num < 9
            }
        }
        PRM_randomly_obtain_book_pages = yes
        add_to_array = {
            global.PRM_display_current_card_holdings_copyist_array_2 = global.selected_card_set_secretary_array_2^PRM_randomly_obtain_book_pages
        }
    }
    if = {
        limit = {
            check_variable = {
                global.copyist_character_health_3 > 0
            }
            check_variable = {
                global.copyist_character_confusion_3 > 0
            }
            check_variable = {
                global.PRM_display_current_card_holdings_copyist_array_3^num < 9
            }
        }
        PRM_randomly_obtain_book_pages = yes
        add_to_array = {
            global.PRM_display_current_card_holdings_copyist_array_3 = global.selected_card_set_secretary_array_3^PRM_randomly_obtain_book_pages
        }
    }
}

#显示当前持有卡牌-来宾
PRM_display_current_card_holdings_guest = {
    clear_array = ROOT.PRM_display_current_card_holdings_array
    if = {
        limit = {
            check_variable = {
                i = 0
            }
        }
        #切换当前角色
        set_variable = {
            global.PRM_role_selection_guests = i
        }
        #载入角色卡牌
        for_each_loop = {
            array = global.PRM_display_current_card_holdings_guests_array_1
            value = v
            add_to_array = {
                ROOT.PRM_display_current_card_holdings_array = v
            }
        }
    }
    if = {
        limit = {
            check_variable = {
                i = 1
            }
        }
        set_variable = {
            global.PRM_role_selection_guests = i
        }
        for_each_loop = {
            array = global.PRM_display_current_card_holdings_guests_array_2
            value = v
            add_to_array = {
                ROOT.PRM_display_current_card_holdings_array = v
            }
        }
    }
    if = {
        limit = {
            check_variable = {
                i = 2
            }
        }
        set_variable = {
            global.PRM_role_selection_guests = i
        }
        for_each_loop = {
            array = global.PRM_display_current_card_holdings_guests_array_3
            value = v
            add_to_array = {
                ROOT.PRM_display_current_card_holdings_array = v
            }
        }
    }
}

#显示当前持有卡牌-司书
PRM_display_current_card_holdings_copyist = {
    clear_array = ROOT.PRM_display_current_card_holdings_array
    if = {
        limit = {
            check_variable = {
                i = 0
            }
        }
        #切换当前角色
        set_variable = {
            global.PRM_role_selection_copyist = i
        }
        #载入角色卡牌
        for_each_loop = {
            array = global.PRM_display_current_card_holdings_copyist_array_1
            value = v
            add_to_array = {
                ROOT.PRM_display_current_card_holdings_array = v
            }
        }
    }
    if = {
        limit = {
            check_variable = {
                i = 1
            }
        }
        set_variable = {
            global.PRM_role_selection_copyist = i
        }
        for_each_loop = {
            array = global.PRM_display_current_card_holdings_copyist_array_2
            value = v
            add_to_array = {
                ROOT.PRM_display_current_card_holdings_array = v
            }
        }
    }
    if = {
        limit = {
            check_variable = {
                i = 2
            }
        }
        set_variable = {
            global.PRM_role_selection_copyist = i
        }
        for_each_loop = {
            array = global.PRM_display_current_card_holdings_copyist_array_3
            value = v
            add_to_array = {
                ROOT.PRM_display_current_card_holdings_array = v
            }
        }
    }
}

#当前选中书页-来宾
PRM_currently_selected_book_page_guest = {
    if = {
        limit = {
            check_variable = {
                global.PRM_role_selection_guests = 0
            }
        }
        set_variable = {
            global.PRM_currently_selected_book_page_guest_1 = show_all_book_pages_array_v
        }
    }
    else_if = {
        limit = {
            check_variable = {
                global.PRM_role_selection_guests = 1
            }
        }
        set_variable = {
            global.PRM_currently_selected_book_page_guest_2 = show_all_book_pages_array_v
        }
    }
    else_if = {
        limit = {
            check_variable = {
                global.PRM_role_selection_guests = 2
            }
        }
        set_variable = {
            global.PRM_currently_selected_book_page_guest_3 = show_all_book_pages_array_v
        }
    }
}

#当前选中书页-司书
PRM_currently_selected_book_page_copyist = {
    if = {
        limit = {
            check_variable = {
                global.PRM_role_selection_copyist = 0
            }
        }
        set_variable = {
            global.PRM_currently_selected_book_page_copyist_1 = show_all_book_pages_array_v
        }
    }
    else_if = {
        limit = {
            check_variable = {
                global.PRM_role_selection_copyist = 1
            }
        }
        set_variable = {
            global.PRM_currently_selected_book_page_copyist_2 = show_all_book_pages_array_v
        }
    }
    else_if = {
        limit = {
            check_variable = {
                global.PRM_role_selection_copyist = 2
            }
        }
        set_variable = {
            global.PRM_currently_selected_book_page_copyist_3 = show_all_book_pages_array_v
        }
    }
}

#设置进攻目标-来宾
PRM_Set_attack_targets_guest = {
    if = {
        limit = {
            check_variable = {
                global.PRM_role_selection_guests = 0
            }
        }
        #记录进攻目标
        set_variable = {
            global.PRM_Set_attack_targets_guest_1 = i
        }
        add_to_variable = {
            global.PRM_Set_attack_targets_guest_1 = 1
        }
    }
    else_if = {
        limit = {
            check_variable = {
                global.PRM_role_selection_guests = 1
            }
        }
        #记录进攻目标
        set_variable = {
            global.PRM_Set_attack_targets_guest_2 = i
        }
        add_to_variable = {
            global.PRM_Set_attack_targets_guest_2 = 1
        }
    }
    else_if = {
        limit = {
            check_variable = {
                global.PRM_role_selection_guests = 2
            }
        }
        #记录进攻目标
        set_variable = {
            global.PRM_Set_attack_targets_guest_3 = i
        }
        add_to_variable = {
            global.PRM_Set_attack_targets_guest_3 = 1
        }
    }
}

#设置进攻目标-司书
PRM_Set_attack_targets_copyist = {
    if = {
        limit = {
            check_variable = {
                global.PRM_role_selection_copyist = 0
            }
        }
        #记录进攻目标
        set_variable = {
            global.PRM_Set_attack_targets_copyist_1 = i
        }
        add_to_variable = {
            global.PRM_Set_attack_targets_copyist_1 = 1
        }
    }
    else_if = {
        limit = {
            check_variable = {
                global.PRM_role_selection_copyist = 1
            }
        }
        #记录进攻目标
        set_variable = {
            global.PRM_Set_attack_targets_copyist_2 = i
        }
        add_to_variable = {
            global.PRM_Set_attack_targets_copyist_2 = 1
        }
    }
    else_if = {
        limit = {
            check_variable = {
                global.PRM_role_selection_copyist = 2
            }
        }
        #记录进攻目标
        set_variable = {
            global.PRM_Set_attack_targets_copyist_3 = i
        }
        add_to_variable = {
            global.PRM_Set_attack_targets_copyist_3 = 1
        }
    }
}


#随机获取书页-值
PRM_randomly_obtain_book_pages = {
    random_list = {
        1 = {
            set_variable = {
                PRM_randomly_obtain_book_pages = 0
            }
        }
        1 = {
            set_variable = {
                PRM_randomly_obtain_book_pages = 1
            }
        }
        1 = {
            set_variable = {
                PRM_randomly_obtain_book_pages = 2
            }
        }
        1 = {
            set_variable = {
                PRM_randomly_obtain_book_pages = 3
            }
        }
        1 = {
            set_variable = {
                PRM_randomly_obtain_book_pages = 4
            }
        }
        1 = {
            set_variable = {
                PRM_randomly_obtain_book_pages = 5
            }
        }
        1 = {
            set_variable = {
                PRM_randomly_obtain_book_pages = 6
            }
        }
        1 = {
            set_variable = {
                PRM_randomly_obtain_book_pages = 7
            }
        }
        1 = {
            set_variable = {
                PRM_randomly_obtain_book_pages = 8
            }
        }
    }
}

#P社就好似那个SB，不让随机
#随机骰子点数
PRM_random_dice_points_numerical_value = {
    #1-3
    if = {
        limit = {
            check_variable = {
                global.PRM_dice_MIN_array_THIS = 1
            }
            check_variable = {
                global.PRM_dice_MAX_array_THIS = 3
            }
        }
        random_list = {
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 1
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 2
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 3
                }
            }
        }
    }
    #1-4
    if = {
        limit = {
            check_variable = {
                global.PRM_dice_MIN_array_THIS = 1
            }
            check_variable = {
                global.PRM_dice_MAX_array_THIS = 4
            }
        }
        random_list = {
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 1
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 2
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 3
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 5
                }
            }
        }
    }
    #1-5
    if = {
        limit = {
            check_variable = {
                global.PRM_dice_MIN_array_THIS = 1
            }
            check_variable = {
                global.PRM_dice_MAX_array_THIS = 5
            }
        }
        random_list = {
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 1
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 2
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 3
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 4
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 5
                }
            }
        }
    }
    #1-6
    if = {
        limit = {
            check_variable = {
                global.PRM_dice_MIN_array_THIS = 1
            }
            check_variable = {
                global.PRM_dice_MAX_array_THIS = 6
            }
        }
        random_list = {
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 1
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 2
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 3
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 4
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 5
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 6
                }
            }
        }
    }
    #1-7
    if = {
        limit = {
            check_variable = {
                global.PRM_dice_MIN_array_THIS = 1
            }
            check_variable = {
                global.PRM_dice_MAX_array_THIS = 7
            }
        }
        random_list = {
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 1
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 2
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 3
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 4
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 5
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 6
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 7
                }
            }
        }
    }
    #1-8
    if = {
        limit = {
            check_variable = {
                global.PRM_dice_MIN_array_THIS = 1
            }
            check_variable = {
                global.PRM_dice_MAX_array_THIS = 8
            }
        }
        random_list = {
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 1
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 2
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 3
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 4
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 5
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 6
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 7
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 8
                }
            }
        }
    }
    #2-3
    if = {
        limit = {
            check_variable = {
                global.PRM_dice_MIN_array_THIS = 2
            }
            check_variable = {
                global.PRM_dice_MAX_array_THIS = 3
            }
        }
        random_list = {
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 2
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 3
                }
            }
        }
    }
    #2-4
    if = {
        limit = {
            check_variable = {
                global.PRM_dice_MIN_array_THIS = 2
            }
            check_variable = {
                global.PRM_dice_MAX_array_THIS = 4
            }
        }
        random_list = {
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 2
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 3
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 4
                }
            }
        }
    }
    #2-5
    if = {
        limit = {
            check_variable = {
                global.PRM_dice_MIN_array_THIS = 2
            }
            check_variable = {
                global.PRM_dice_MAX_array_THIS = 5
            }
        }
        random_list = {
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 2
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 3
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 4
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 5
                }
            }
        }
    }
    #2-6
    if = {
        limit = {
            check_variable = {
                global.PRM_dice_MIN_array_THIS = 2
            }
            check_variable = {
                global.PRM_dice_MAX_array_THIS = 6
            }
        }
        random_list = {
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 2
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 3
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 4
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 5
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 6
                }
            }
        }
    }
    #2-7
    if = {
        limit = {
            check_variable = {
                global.PRM_dice_MIN_array_THIS = 2
            }
            check_variable = {
                global.PRM_dice_MAX_array_THIS = 7
            }
        }
        random_list = {
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 2
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 3
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 4
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 5
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 6
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 7
                }
            }
        }
    }
    #2-8
    if = {
        limit = {
            check_variable = {
                global.PRM_dice_MIN_array_THIS = 2
            }
            check_variable = {
                global.PRM_dice_MAX_array_THIS = 8
            }
        }
        random_list = {
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 2
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 3
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 4
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 5
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 6
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 7
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 8
                }
            }
        }
    }
    #3-4
    if = {
        limit = {
            check_variable = {
                global.PRM_dice_MIN_array_THIS = 3
            }
            check_variable = {
                global.PRM_dice_MAX_array_THIS = 4
            }
        }
        random_list = {
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 3
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 4
                }
            }
        }
    }
    #3-5
    if = {
        limit = {
            check_variable = {
                global.PRM_dice_MIN_array_THIS = 3
            }
            check_variable = {
                global.PRM_dice_MAX_array_THIS = 5
            }
        }
        random_list = {
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 3
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 4
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 5
                }
            }
        }
    }
    #3-6
    if = {
        limit = {
            check_variable = {
                global.PRM_dice_MIN_array_THIS = 3
            }
            check_variable = {
                global.PRM_dice_MAX_array_THIS = 6
            }
        }
        random_list = {
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 3
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 4
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 5
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 6
                }
            }
        }
    }
    #3-7
    if = {
        limit = {
            check_variable = {
                global.PRM_dice_MIN_array_THIS = 3
            }
            check_variable = {
                global.PRM_dice_MAX_array_THIS = 7
            }
        }
        random_list = {
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 3
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 4
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 5
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 6
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 7
                }
            }
        }
    }
    #3-8
    if = {
        limit = {
            check_variable = {
                global.PRM_dice_MIN_array_THIS = 3
            }
            check_variable = {
                global.PRM_dice_MAX_array_THIS = 8
            }
        }
        random_list = {
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 3
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 4
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 5
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 6
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 7
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 8
                }
            }
        }
    }
    #4-5
    if = {
        limit = {
            check_variable = {
                global.PRM_dice_MIN_array_THIS = 4
            }
            check_variable = {
                global.PRM_dice_MAX_array_THIS = 5
            }
        }
        random_list = {
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 4
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 5
                }
            }
        }
    }
    #4-6
    if = {
        limit = {
            check_variable = {
                global.PRM_dice_MIN_array_THIS = 4
            }
            check_variable = {
                global.PRM_dice_MAX_array_THIS = 6
            }
        }
        random_list = {
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 4
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 5
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 6
                }
            }
        }
    }
    #4-7
    if = {
        limit = {
            check_variable = {
                global.PRM_dice_MIN_array_THIS = 4
            }
            check_variable = {
                global.PRM_dice_MAX_array_THIS = 7
            }
        }
        random_list = {
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 4
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 5
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 6
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 7
                }
            }
        }
    }
    #4-8
    if = {
        limit = {
            check_variable = {
                global.PRM_dice_MIN_array_THIS = 4
            }
            check_variable = {
                global.PRM_dice_MAX_array_THIS = 8
            }
        }
        random_list = {
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 4
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 5
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 6
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 7
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 8
                }
            }
        }
    }
    #5-6
    if = {
        limit = {
            check_variable = {
                global.PRM_dice_MIN_array_THIS = 5
            }
            check_variable = {
                global.PRM_dice_MAX_array_THIS = 6
            }
        }
        random_list = {
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 5
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 6
                }
            }
        }
    }
    #5-7
    if = {
        limit = {
            check_variable = {
                global.PRM_dice_MIN_array_THIS = 5
            }
            check_variable = {
                global.PRM_dice_MAX_array_THIS = 7
            }
        }
        random_list = {
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 5
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 6
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 7
                }
            }

        }
    }
    #5-8
    if = {
        limit = {
            check_variable = {
                global.PRM_dice_MIN_array_THIS = 4
            }
            check_variable = {
                global.PRM_dice_MAX_array_THIS = 8
            }
        }
        random_list = {
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 5
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 6
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 7
                }
            }
            1 = {
                set_variable = {
                    global.PRM_random_dice_points_numerical_value = 8
                }
            }
        }
    }
}