AKL_rebuild_the_empire = {
    AKL_rebuild = {
        state_target = yes
        target_root_trigger = {
            OR = {
                has_completed_focus = AKL_akari_9
                has_completed_focus = AKL_kanami_6
            }
        }
        highlight_state_targets = {
            state = FROM
        }
        target_array = AKL.destroyed_states
        target_trigger = {
            FROM = {
                is_owned_by = ROOT
                has_dynamic_modifier = {modifier = AKL_hurt_of_war scope = AKL}
            }
        }
        cost = var:AKL_rebuild_cost
        days_remove = var:AKL_rebuild_time
        complete_effect = {
            if = {
                limit = {
                    has_completed_focus = AKL_akari_5
                }
                AKL_decrease_finance_3 = yes
            }
        }
        remove_effect = {
            FROM = {
                remove_dynamic_modifier = {modifier = AKL_hurt_of_war scope = AKL}
            }
            if = {
                limit = {
                    has_completed_focus = AKL_akari_5
                }
                AKL_increase_popularity_3 = yes
            }
        }
        ai_will_do = {
            base = 1000
            modifier = {
                factor = 10
                FROM = {
                    state = 858
                }
            }
        }
    }
}
AKL_industrial_project = {
    #建设天京新港
    AKL_858_port_project = {
        icon = generic_construction
        allowed = { always = no }
		available = {
			FROM = { is_fully_controlled_by = ROOT }
		}
        state_target = yes
        highlight_states = { highlight_state_targets = { state = 858 } } 
        cost = 60
        fire_only_once = yes
        days_remove = 90
        modifier = {
            consumer_goods_factor = 0.15
        }
        complete_effect = {
            if = {
                limit = {
                    has_completed_focus = AKL_akari_5
                }
                AKL_decrease_finance_5 = yes
            }
        }
        remove_effect = {
            858 = {
                add_extra_state_shared_building_slots = 2
                add_building_construction = {
				    type = dockyard
				    level = 2
				    instant_build = yes
			    }
                add_building_construction = {
                    type = naval_base
                    level = 3
                    instant_build = yes
                    province = {
                        id = 12941
                    }
                }
            }
            set_country_flag = AKL_858_port_project_completed
        }
        ai_will_do = {
            base = 100
        }
    }
    #天京州纺织厂
    AKL_833_project = {
        icon = generic_construction
        allowed = { always = no }
		available = {
			FROM = { is_fully_controlled_by = ROOT }
		}
        state_target = yes
        highlight_states = { highlight_state_targets = { state = 833 } } 
        cost = 60
        fire_only_once = yes
        days_remove = 90
        modifier = {
            consumer_goods_factor = 0.15
        }
        complete_effect = {
            if = {
                limit = {
                    has_completed_focus = AKL_akari_5
                }
                AKL_decrease_finance_5 = yes
            }
        }
        remove_effect = {
            833 = {
                add_extra_state_shared_building_slots = 2
                add_building_construction = {
				    type = industrial_complex
				    level = 2
				    instant_build = yes
			    }
            }
        }
        ai_will_do = {
            base = 10
        }
    }
    #北海州矿业开采
    AKL_835_project = {
        icon = generic_construction
        allowed = { always = no }
		available = {
			FROM = { is_fully_controlled_by = ROOT }
		}
        state_target = yes
        highlight_states = { highlight_state_targets = { state = 835 } } 
        cost = 60
        fire_only_once = yes
        days_remove = 90
        modifier = {
            consumer_goods_factor = 0.15
        }
        complete_effect = {
            if = {
                limit = {
                    has_completed_focus = AKL_akari_5
                }
                AKL_decrease_finance_5 = yes
            }
        }
        remove_effect = {
            835 = {
                add_extra_state_shared_building_slots = 2
                add_building_construction = {
				    type = industrial_complex
				    level = 2
				    instant_build = yes
			    }
                add_resource = {
                    type = steel
                    amount = 30
                }
            }
        }
        ai_will_do = {
            base = 10
        }
    }
    #樱滨-天京工业走廊
    AKL_520_project = {
        icon = generic_construction
        allowed = { always = no }
		available = {
			FROM = { is_fully_controlled_by = ROOT }
            has_country_flag = AKL_858_port_project_completed
		}
        state_target = yes
        highlight_states = { highlight_state_targets = { state = 520 } } 
        cost = 60
        fire_only_once = yes
        days_remove = 120
        modifier = {
            consumer_goods_factor = 0.15
        }
        complete_effect = {
            if = {
                limit = {
                    has_completed_focus = AKL_akari_5
                }
                AKL_decrease_finance_5 = yes
            }
        }
        remove_effect = {
            520 = {
                add_extra_state_shared_building_slots = 2
                add_building_construction = {
				    type = industrial_complex
				    level = 2
				    instant_build = yes
			    }
            }
            833 = {
                add_extra_state_shared_building_slots = 2
                add_building_construction = {
				    type = industrial_complex
				    level = 2
				    instant_build = yes
			    }
            }
        }
        ai_will_do = {
            base = 10
        }
    }
    #建设小鸟居港
    AKL_582_port_project = {
        icon = generic_construction
        allowed = { always = no }
		available = {
			FROM = { is_fully_controlled_by = ROOT }
		}
        state_target = yes
        highlight_states = { highlight_state_targets = { state = 582 } } 
        cost = 60
        fire_only_once = yes
        days_remove = 90
        modifier = {
            consumer_goods_factor = 0.15
        }
        complete_effect = {
            if = {
                limit = {
                    has_completed_focus = AKL_akari_5
                }
                AKL_decrease_finance_5 = yes
            }
        }
        remove_effect = {
            582 = {
                add_extra_state_shared_building_slots = 2
                add_building_construction = {
				    type = dockyard
				    level = 2
				    instant_build = yes
			    }
                add_building_construction = {
                    type = naval_base
                    level = 3
                    instant_build = yes
                    province = {
                        id = 5213
                    }
                }
            }
            set_country_flag = AKL_582_port_project_completed
        }
        ai_will_do = {
            base = 100
        }
    }
    #建设沿海工业区
    AKL_582_project = {
        icon = generic_construction
        allowed = { always = no }
		available = {
			FROM = { is_fully_controlled_by = ROOT }
            has_country_flag = AKL_582_port_project_completed
		}
        state_target = yes
        highlight_states = { highlight_state_targets = { state = 582 } } 
        cost = 60
        fire_only_once = yes
        days_remove = 90
        modifier = {
            consumer_goods_factor = 0.15
        }
        complete_effect = {
            if = {
                limit = {
                    has_completed_focus = AKL_akari_5
                }
                AKL_decrease_finance_5 = yes
            }
        }
        remove_effect = {
            582 = {
                add_extra_state_shared_building_slots = 2
                add_building_construction = {
				    type = industrial_complex
				    level = 2
				    instant_build = yes
			    }
            }
            set_country_flag = AKL_582_project_completed
        }
        ai_will_do = {
            base = 100
        }
    }
    #特殊
    #北方道路工程
    AKL_northen_infra_project = {
        icon = generic_construction
        allowed = { always = no }
		available = {
			FROM = { is_fully_controlled_by = ROOT }
		}
        state_target = yes
        highlight_states = { highlight_state_targets = { state = 836 } } 
        cost = 60
        fire_only_once = yes
        days_remove = 90
        modifier = {
            consumer_goods_factor = 0.15
        }
        remove_effect = {
            836 = {
                add_extra_state_shared_building_slots = 1
                add_building_construction = {
				    type = infrastructure
				    level = 2
				    instant_build = yes
			    }
                add_building_construction = {
				    type = industrial_complex
				    level = 2
				    instant_build = yes
			    }
            }
            835 = {
                add_extra_state_shared_building_slots = 1
                add_building_construction = {
				    type = infrastructure
				    level = 2
				    instant_build = yes
			    }
            }
            488 = {
                add_extra_state_shared_building_slots = 1
                add_building_construction = {
				    type = infrastructure
				    level = 2
				    instant_build = yes
			    }
                add_resource = {
                    type = chromium
                    amount = 15
                }
            }
            if = {
                limit = {
                    has_completed_focus = AKL_akari_5
                }
                AKL_decrease_finance_8 = yes
            }
        }
        ai_will_do = {
            base = 10
        }
    }
    #建设猫村汽车城
    AKL_860_project = {
        icon = generic_construction
        allowed = { always = no }
		available = {
			FROM = { is_fully_controlled_by = ROOT }
            has_country_flag = AKL_582_port_project_completed
		}
        state_target = yes
        highlight_states = { highlight_state_targets = { state = 860 } } 
        cost = 60
        fire_only_once = yes
        days_remove = 90
        modifier = {
            consumer_goods_factor = 0.15
        }
        remove_effect = {
            if = {
                limit = {
                    has_completed_focus = AKL_akari_5
                }
                AKL_decrease_finance_8 = yes
            }
            860 = {
                add_extra_state_shared_building_slots = 2
                add_building_construction = {
				    type = industrial_complex
				    level = 1
				    instant_build = yes
			    }
                add_building_construction = {
				    type = arms_factory
				    level = 1
				    instant_build = yes
			    }
            }
            add_equipment_to_stockpile = {
                type = motorized_equipment
                amount = 500
            }
        }
        ai_will_do = {
            base = 10
        }
    }
}
#买船
AKL_purchase_ships = {
    AKL_ask_anglia = {
        available = {
            OR =  {
                UNG = {
                    exists = yes
                    has_war = no
                }
                FNG = {
                    exists = yes
                    has_war = no
                }
                STG = {
                    exists = yes
                    has_war = no
                    has_global_flag = ANGLIA_RECONCLIATION_FLAG
                }
            }
        }
        visible = {
            OR = {
                country_exists = UNG
                country_exists = FNG
                country_exists = STG
            }
        }
        cost = 75
        days_remove = 100
        fire_only_once = yes
        modifier = {
            consumer_goods_factor = 0.20
        }
        complete_effect = {
            if = {
                limit = {
                    has_completed_focus = AKL_akari_5
                }
                AKL_decrease_finance_6 = yes
            }
        }
        remove_effect = {
            create_equipment_variant = {
				name = "丰原"
				type = heavy_cruiser_2
				parent_version = 0
				allow_without_tech = yes
				modules = {
					fixed_ship_battery_slot = ship_medium_battery_2
					fixed_ship_anti_air_slot = ship_anti_air_2
					fixed_ship_fire_control_system_slot = ship_fire_control_system_2
					fixed_ship_radar_slot = ship_sonar_2
					fixed_ship_armor_slot = ship_armor_cruiser_2
					fixed_ship_engine_slot = cruiser_ship_engine_3
					fixed_ship_secondaries_slot = dp_ship_secondaries_2
					front_1_custom_slot = ship_torpedo_2
					mid_1_custom_slot = dp_ship_secondaries_2
					mid_2_custom_slot = ship_anti_air_2
					rear_1_custom_slot = ship_medium_battery_2
					rear_2_custom_slot = ship_anti_air_2
				}
			}
            add_equipment_production = {
				equipment = {
					type = heavy_cruiser_2
					creator = "AKL"
					version_name = "丰原"
				}
                name = "泽田"
				requested_factories = 1
				progress = 0.99
				amount = 1
			}
            add_equipment_production = {
				equipment = {
					type = heavy_cruiser_2
					creator = "AKL"
					version_name = "丰原"
				}
                name = "岛田"
				requested_factories = 1
				progress = 0.99
				amount = 1
			}
            add_equipment_production = {
				equipment = {
					type = heavy_cruiser_2
					creator = "AKL"
					version_name = "丰原"
				}
                name = "北海"
				requested_factories = 1
				progress = 0.60
				amount = 1
			}
            add_equipment_production = {
				equipment = {
					type = heavy_cruiser_2
					creator = "AKL"
					version_name = "丰原"
				}
                name = "南海"
				requested_factories = 1
				progress = 0.30
				amount = 1
			}
        }
        ai_will_do = {
            base = 10
            modifier = {
                add = 100
                has_political_power > 99
            }
        }
    }
    AKL_ask_OCF = {
        available = {
            OCF = {
                exists = yes
                has_war = no
            }
        }
        visible = {
            country_exists = OCF
        }
        cost = 50
        days_remove = 60
        fire_only_once = yes
        modifier = {
            consumer_goods_factor = 0.20
        }
        complete_effect = {
            if = {
                limit = {
                    has_completed_focus = AKL_akari_5
                }
                AKL_decrease_finance_6 = yes
            }
        }
        remove_effect = {
            create_equipment_variant = {
                name = "E/F/G/H Class"
                type = ship_hull_light_2
                parent_version = 0
                modules = {
                    fixed_ship_battery_slot = dp_light_battery_2
                    fixed_ship_anti_air_slot = ship_anti_air_1
                    fixed_ship_fire_control_system_slot = ship_fire_control_system_0
                    fixed_ship_radar_slot = ship_sonar_1
                    fixed_ship_engine_slot = light_ship_engine_2
                    fixed_ship_torpedo_slot = ship_torpedo_1
                    mid_1_custom_slot = ship_torpedo_1
                    rear_1_custom_slot = ship_depth_charge_1
                }
            }
            add_equipment_production = {
				equipment = {
					type = ship_hull_light_2
					creator = "AKL"
					version_name = "E/F/G/H Class"
				}
				name = "初雪"
				requested_factories = 1
				progress = 0.99
				amount = 1
			}
            add_equipment_production = {
				equipment = {
					type = ship_hull_light_2
					creator = "AKL"
					version_name = "E/F/G/H Class"
				}
				name = "红叶"
				requested_factories = 1
				progress = 0.99
				amount = 1
			}
            add_equipment_production = {
				equipment = {
					type = ship_hull_light_2
					creator = "AKL"
					version_name = "E/F/G/H Class"
				}
				name = "夏夜"
				requested_factories = 1
				progress = 0.99
				amount = 1
			}
            add_equipment_production = {
				equipment = {
					type = ship_hull_light_2
					creator = "AKL"
					version_name = "E/F/G/H Class"
				}
				name = "春希"
				requested_factories = 1
				progress = 0.99
				amount = 1
			}
            add_equipment_production = {
				equipment = {
					type = ship_hull_light_2
					creator = "AKL"
					version_name = "E/F/G/H Class"
				}
				name = "朝阳"
				requested_factories = 1
				progress = 0.99
				amount = 1
			}
            add_equipment_production = {
				equipment = {
					type = ship_hull_light_2
					creator = "AKL"
					version_name = "E/F/G/H Class"
				}
				name = "暮光"
				requested_factories = 1
				progress = 0.99
				amount = 1
			}
        }
        ai_will_do = {
            base = 10
            modifier = {
                add = 100
                has_political_power > 99
            }
        }
    }
    AKL_ask_BLA = {
        available = {
            BLA = {
                exists = yes
                has_war = no
            }
        }
        visible = {
            country_exists = BLA
        }
        cost = 80
        days_remove = 120
        fire_only_once = yes
        modifier = {
            consumer_goods_factor = 0.20
        }
        complete_effect = {
            if = {
                limit = {
                    has_completed_focus = AKL_akari_5
                }
                AKL_decrease_finance_8 = yes
            }
        }
        remove_effect = {
            create_equipment_variant = {
                name = "尼古拉皇帝级"
                type = ship_hull_heavy_1
                parent_version = 0
                allow_without_tech = yes
                modules = {
                    fixed_ship_battery_slot = ship_heavy_battery_1
                    fixed_ship_anti_air_slot = ship_anti_air_1
                    fixed_ship_fire_control_system_slot = ship_fire_control_system_1
                    fixed_ship_radar_slot = empty
                    fixed_ship_engine_slot = heavy_ship_engine_1
                    fixed_ship_secondaries_slot = ship_secondaries_1
                    fixed_ship_armor_slot = ship_armor_bb_1
                    front_1_custom_slot = ship_heavy_battery_1
                    mid_1_custom_slot = empty
                    mid_2_custom_slot = ship_secondaries_1
                    rear_1_custom_slot = ship_heavy_battery_1
                }
                obsolete = no
            }
            create_equipment_variant = {
                name = "曙光级"
                type = ship_hull_cruiser_1
                parent_version = 0
                allow_without_tech = yes
                modules = {
                    fixed_ship_battery_slot = ship_light_medium_battery_1
                    fixed_ship_anti_air_slot = ship_anti_air_1
                    fixed_ship_fire_control_system_slot = ship_fire_control_system_0
                    fixed_ship_radar_slot = empty
                    fixed_ship_engine_slot = cruiser_ship_engine_2
                    fixed_ship_armor_slot = ship_armor_cruiser_1
                    mid_1_custom_slot = ship_torpedo_1
                    mid_2_custom_slot = ship_torpedo_1
                    rear_1_custom_slot = ship_light_medium_battery_1
                }
                obsolete = no
            }
            add_equipment_production = {
				equipment = {
					type = ship_hull_heavy_1
					creator = "AKL"
					version_name = "尼古拉皇帝级"
				}
				name = "龙胆"
				requested_factories = 1
				progress = 0.99
				amount = 1
			}
            add_equipment_production = {
				equipment = {
					type = ship_hull_cruiser_1
					creator = "AKL"
					version_name = "曙光级"
				}
				name = "铃木"
				requested_factories = 1
				progress = 0.99
				amount = 1
			}
            add_equipment_production = {
				equipment = {
					type = ship_hull_cruiser_1
					creator = "AKL"
					version_name = "曙光级"
				}
				name = "佳奈"
				requested_factories = 1
				progress = 0.99
				amount = 1
			}
        }
        ai_will_do = {
            base = 10
            modifier = {
                add = 100
                has_political_power > 99
            }
        }
    }
    #购置二手军舰
    AKL_second_hand_ship = {
        cost = 80
        days_remove = 100
        fire_only_once = yes
        modifier = {
            consumer_goods_factor = 0.20
        }
        complete_effect = {
            if = {
                limit = {
                    has_completed_focus = AKL_akari_5
                }
                AKL_decrease_finance_6 = yes
            }
        }
        remove_effect = {
            create_equipment_variant = {
                name = "一般通过二手驱逐舰"
                type = ship_hull_light_1
                parent_version = 0
                allow_without_tech = yes
                modules = {
                    fixed_ship_battery_slot = ship_light_battery_1
                    fixed_ship_anti_air_slot = empty
                    fixed_ship_fire_control_system_slot = ship_fire_control_system_0
                    fixed_ship_radar_slot = ship_sonar_1
                    fixed_ship_engine_slot = light_ship_engine_2
                    fixed_ship_torpedo_slot = ship_torpedo_1
                    mid_1_custom_slot = ship_torpedo_1
                    rear_1_custom_slot = ship_depth_charge_1
                }
                obsolete = yes
            }
            create_equipment_variant = {
                name = "一般通过二手巡洋舰"
                type = ship_hull_cruiser_1
                parent_version = 0
                allow_without_tech = yes
                modules = {
                    fixed_ship_battery_slot = ship_medium_battery_2
                    fixed_ship_anti_air_slot = ship_anti_air_1
                    fixed_ship_fire_control_system_slot = ship_fire_control_system_0
                    fixed_ship_radar_slot = empty
                    fixed_ship_engine_slot = cruiser_ship_engine_1
                    fixed_ship_armor_slot = ship_armor_cruiser_1
                    mid_1_custom_slot = empty
                    mid_2_custom_slot = ship_torpedo_1
                    rear_1_custom_slot = ship_airplane_launcher_1
                }
                obsolete = yes
            }
            add_equipment_production = {
				equipment = {
					type = heavy_cruiser_1
					creator = "AKL"
					version_name = "一般通过二手巡洋舰"
				}
				requested_factories = 1
				progress = 0.99
				amount = 1
			}
            add_equipment_production = {
				equipment = {
					type = ship_hull_light_1
					creator = "AKL"
					version_name = "一般通过二手驱逐舰"
				}
				requested_factories = 1
				progress = 0.99
				amount = 1
			}
            add_equipment_production = {
				equipment = {
					type = ship_hull_light_1
					creator = "AKL"
					version_name = "一般通过二手驱逐舰"
				}
				requested_factories = 1
				progress = 0.99
				amount = 1
			}
        }
        ai_will_do = {
            base = 10
            modifier = {
                add = 100
                has_political_power > 99
            }
        }
    }
}
#皇姬调试
AKL_debug = {
    AKL_achievement = {
        complete_effect = {}
    }
    AKL_load_opening = {
        complete_effect = {
            hidden_effect = {
                clr_country_flag = AKL_akari_branch
                clr_country_flag = AKL_akari_branch_2
                clr_country_flag = AKL_elsa_branch
                clr_country_flag = AKL_kanami_branch
                clr_country_flag = AKL_kanami_elsa_branch
                clr_country_flag = AKL_akari_after_story_flag
                mark_focus_tree_layout_dirty = yes
            }
        }
    }
    AKL_load_akari_1 = {
        complete_effect = {
            hidden_effect = {
                clr_country_flag = AKL_elsa_branch
                clr_country_flag = AKL_kanami_branch
                clr_country_flag = AKL_kanami_elsa_branch
                set_country_flag = AKL_akari_branch
                clr_country_flag = AKL_akari_branch_2
                clr_country_flag = AKL_akari_after_story_flag
                mark_focus_tree_layout_dirty = yes
            }
        }
    }
    AKL_load_akari_2 = {
        complete_effect = {
            hidden_effect = {
                clr_country_flag = AKL_elsa_branch
                clr_country_flag = AKL_kanami_branch
                clr_country_flag = AKL_kanami_elsa_branch
                set_country_flag = AKL_akari_branch
                set_country_flag = AKL_akari_branch_2
                mark_focus_tree_layout_dirty = yes
            }
        }
    }
    AKL_load_akari_after_story = {
        complete_effect = {
            hidden_effect = {
                set_country_flag = AKL_akari_branch
                set_country_flag = AKL_akari_branch_2
                set_country_flag = AKL_akari_after_story_flag
                mark_focus_tree_layout_dirty = yes
            }
        }
    }
    AKL_back_to_past = {
        complete_effect = {
            custom_effect_tooltip = AKL_kandan_no_yume_tt
            set_country_flag = AKL_easter
            set_politics = {
                ruling_party = neutrality
            }
            promote_character = {
                character = AKL_Himinomikoto
                ideology = sub_enlightened_despotism
            }
            mark_focus_tree_layout_dirty  = yes
            load_focus_tree = {
                tree = AKL
                keep_completed = yes
            }
        }
    }
    AKL_load_general_dev = {
        complete_effect = {
            hidden_effect = {
                set_country_flag = AKL_new_terrtority_flag
                mark_focus_tree_layout_dirty = yes
            }
        }
    }
    AKL_load_kanami_elsa = {
        complete_effect = {
            clr_country_flag = AKL_akari_branch
            clr_country_flag = AKL_akari_branch_2
            clr_country_flag = AKL_akari_after_story_flag
            clr_country_flag = AKL_elsa_branch
            clr_country_flag = AKL_kanami_branch
            set_country_flag = AKL_kanami_elsa_branch
            mark_focus_tree_layout_dirty = yes
        }
    }
    AKL_load_kanami = {
        complete_effect = {
            clr_country_flag = AKL_akari_branch
            clr_country_flag = AKL_akari_branch_2
            clr_country_flag = AKL_akari_after_story_flag
            clr_country_flag = AKL_elsa_branch
            set_country_flag = AKL_kanami_branch
            mark_focus_tree_layout_dirty = yes
        }
    }
    AKL_load_elsa = {
        complete_effect = {
            clr_country_flag = AKL_akari_branch
            clr_country_flag = AKL_akari_branch_2
            clr_country_flag = AKL_akari_after_story_flag
            clr_country_flag = AKL_kanami_branch
            set_country_flag = AKL_elsa_branch
            mark_focus_tree_layout_dirty = yes
        }
    }
    AKL_add_authority = {
        complete_effect = {
            hidden_effect = {
                AKL = {add_to_variable = {AKL_authority = 10}}
            }
        }
    }
    AKL_reduce_authority = {
        complete_effect = {
            hidden_effect = {
                AKL = {add_to_variable = {AKL_authority = -10}}
            }
        }
    }
    AKL_add_pressure = {
        complete_effect = {
            hidden_effect = {
                AKL = {add_to_variable = {AKL_pressure = 10}}
            }
        }
    }
    AKL_reduce_pressure = {
        complete_effect = {
            hidden_effect = {
                AKL = {add_to_variable = {AKL_pressure = -10}}
            }
        }
    }
    AKL_add_finance = {
        complete_effect = {
            hidden_effect = {
                AKL = {add_to_variable = {AKL_finance = 10}}
            }
        }
    }
    AKL_reduce_finance = {
        complete_effect = {
            hidden_effect = {
                AKL = {add_to_variable = {AKL_finance = -10}}
            }
        }
    }
    AKL_add_popularity = {
        complete_effect = {
            hidden_effect = {
                AKL = {add_to_variable = {AKL_popularity = 10}}
            }
        }
    }
    AKL_reduce_popularity = {
        complete_effect = {
            hidden_effect = {
                AKL = {add_to_variable = {AKL_popularity = -10}}
            }
        }
    }
    AKL_gui_debug = {
        complete_effect = {
            if = {
                limit = {
                    NOT = {has_country_flag = AKL_gui_debug}
                }
                set_country_flag = AKL_gui_debug
            }
            else = {
                clr_country_flag = AKL_gui_debug
            }
            
        }
    }
    AKL_arisu_debug = {
        complete_effect = {
            set_country_flag = AKL_arisu_flag
        }
    }
}
AKL_war_with_USF = {
    AKL_retake_our_land = {
        icon = mission_icon
        is_good = no
        available = {
            always = no
        }
        activation = {
            always = no
        }
        cancel_trigger = {
            NOT = {
                controls_state = 554
            }
            NOT = {
                controls_state = 556
            }
            NOT = {
                controls_state = 551
            }
            NOT = {
                controls_state = 530
            }
        }
        days_mission_timeout = 180
        fire_only_once = yes
        selectable_mission = no
        complete_effect = {
        }
        timeout_effect = {
            hidden_effect = {
                news_event = {id = AKL_news.3}
                set_global_flag = show_peace_popup_alert
				set_global_flag = war_won
				AKL = {
					save_global_event_target_as = winning_country
				}
				USF = {
					save_global_event_target_as = losing_country
				}
				IRIS_peace_popup_determine_allies = yes
				add_to_variable = { global.peace_popup_dirty = 1 }
                AKL = {
                    white_peace = {
                        tag = USF
                    }
                    set_country_flag = AKL_defeated_invasion
                }
                554 = {transfer_state_to = AKL}
                556 = {transfer_state_to = AKL}
                551 = {transfer_state_to = AKL}
                530 = {transfer_state_to = AKL}
                every_country = {
                    limit = {
                        has_war_with = AKL
                    }
                    white_peace = {
                        tag = AKL
                    }
                }
            }
        }
    }
}
#皇国政府
AKL_government = {
    AKL_replace_click_sound = {
        visible = {
            NOT = {has_country_flag = AKL_replace_click_sound}
        }
        complete_effect = {
            hidden_effect = {
                set_country_flag = AKL_replace_click_sound
            }
        }
    }
    AKL_default_click_sound = {
        visible = {
            has_country_flag = AKL_replace_click_sound
        }
        complete_effect = {
            hidden_effect = {
                clr_country_flag = AKL_replace_click_sound
            }
        }
    }
    #邯郸之梦
    AKL_kandan_no_yume = {
        visible = {
            OR = {
                AND = {
                    check_variable = {AKL_himinomikoto_var > 19}
                    NOT = {
                        has_global_flag = USF_COLLAPSED_FLAG
                    }
                }
                is_debug = yes
            }
        }
        fire_only_once = yes
        complete_effect = {
            custom_effect_tooltip = AKL_kandan_no_yume_tt
            set_country_flag = AKL_easter
            set_politics = {
                ruling_party = neutrality
            }
            promote_character = {
                character = AKL_Himinomikoto
                ideology = sub_enlightened_despotism
            }
            hidden_effect = {
                mark_focus_tree_layout_dirty  = yes
                load_focus_tree = {
                    tree = AKL
                    keep_completed = yes
                }
            }
        }
        ai_will_do = {
            factor = 0
        }
    }
    #收税
    AKL_gov_collect_tax = {
        days_remove = 30
        days_re_enable = 20
        remove_effect = {
            AKL_increase_finance_6 = yes
            AKL_decrease_popularity_3 = yes
        }
        ai_will_do = {
            factor = 10
            modifier = {
                factor = 0
                check_variable = {AKL.AKL_finance > 60}
            }
        }
    }
    #请皇祖大人代班
    AKL_gov_himinomikoto = {
        available = {
            has_country_leader = {
                character = AKL_Akari
            }
        }
        days_remove = 30
        days_re_enable = 90
        cancel_trigger = {
            NOT = {
                has_country_leader = {
                    character = AKL_Akari
                }
            }
        }
        cancel_effect = {
            hidden_effect = {
                clr_country_flag = AKL_Akari_is_resting
            }
        }
        complete_effect = {
            hidden_effect = {
                if = {
                    limit = {
                        is_ai = no
                        NOT = {
                            has_country_flag = AKL_Akari_dynamic_portrait_on
                        }
                    }
                    set_country_leader_portrait = {
                        portrait = GFX_AKL_Himinomikoto
                    }
                    set_country_leader_name = {
                        name = AKL_Akari_2
                    }
                }
                set_country_flag = AKL_Akari_is_resting
            }
        }
        remove_effect = {
            AKL_decrease_authority_3 = yes
            AKL_decrease_pressure = yes
            hidden_effect = {
                add_to_variable = {AKL_himinomikoto_var = 1}
                if = {
                    limit = {
                        is_ai = no
                        NOT = {
                            has_country_flag = AKL_Akari_dynamic_portrait_on
                        }
                    }
                    if = {
                        limit = {
                            check_variable = {AKL_Akari_portrait_var = 1}
                        }
                        set_country_leader_portrait = {
                            portrait = GFX_AKL_Akari
                        }
                    }
                    if = {
                        limit = {
                            check_variable = {AKL_Akari_portrait_var = 2}
                        }
                        set_country_leader_portrait = {
                            portrait = GFX_AKL_Akari_2
                        }
                    }
                    if = {
                        limit = {
                            check_variable = {AKL_Akari_portrait_var = 3}
                        }
                        set_country_leader_portrait = {
                            portrait = GFX_AKL_Akari_3
                        }
                    }
                    if = {
                        limit = {
                            check_variable = {AKL_Akari_portrait_var = 4}
                        }
                        set_country_leader_portrait = {
                            portrait = GFX_AKL_Akari_4
                        }
                    }
                    if = {
                        limit = {
                            check_variable = {AKL_Akari_portrait_var = 5}
                        }
                        set_country_leader_portrait = {
                            portrait = GFX_AKL_Akari_5
                        }
                    }
                    if = {
                        limit = {
                            check_variable = {AKL_Akari_portrait_var = 6}
                        }
                        set_country_leader_portrait = {
                            portrait = GFX_AKL_Akari_0721
                        }
                    }
                    set_country_leader_name = {
                        name = AKL_Akari
                    }
                }
                clr_country_flag = AKL_Akari_is_resting
            }
        }
        ai_will_do = {
            factor = 10
            modifier = {
                factor = 10
                check_variable = {AKL.AKL_pressure > 60}
            }
            modifier = {
                factor = 0
                check_variable = {AKL.AKL_authority < 30}
            }
        }
    }
    #向国民讲话
    AKL_gov_speech = {
        visible = {
            has_completed_focus = AKL_akari_7
        }
        days_remove = 14
        days_re_enable = 30
        remove_effect = {
            AKL_increase_pressure = yes
            AKL_increase_popularity_6 = yes
            add_political_power = 25
        }
        ai_will_do = {
            factor = 10
            modifier = {
                factor = 0
                check_variable = {AKL.AKL_pressure > 70}
            }
        }
    }
    #视察地方
    AKL_gov_inspect = {
        visible = {
            has_completed_focus = AKL_akari_24
        }
        days_remove = 30
        days_re_enable = 60
        remove_effect = {
            AKL_increase_pressure = yes
            AKL_increase_popularity_6 = yes
            add_political_power = 40
        }
        ai_will_do = {
            factor = 10
            modifier = {
                factor = 0
                check_variable = {AKL.AKL_pressure > 70}
            }
            modifier = {
                factor = 0
                check_variable = {AKL.AKL_finance < 30}
            }
        }
    }
    #化解臣下分歧
    AKL_gov_negotiation = {
        visible = {
            has_completed_focus = AKL_akari_8
        }
        days_remove = 40
        days_re_enable = 60
        remove_effect = {
            AKL_increase_pressure = yes
            AKL_decrease_authority_6 = yes
            add_political_power = 50
        }
        ai_will_do = {
            factor = 10
            modifier = {
                factor = 0
                check_variable = {AKL.AKL_pressure > 70}
            }
            modifier = {
                factor = 0
                check_variable = {AKL.AKL_authority < 30}
            }
        }
    }
    #发放救济
    AKL_gov_welfare = {
        visible = {
            has_completed_focus = AKL_akari_9
        }
        days_remove = 40
        days_re_enable = 60
        remove_effect = {
            AKL_increase_popularity_6 = yes
            AKL_decrease_finance_5 = yes
            add_political_power = 20
        }
        ai_will_do = {
            factor = 10
            modifier = {
                factor = 0
                check_variable = {AKL.AKL_pressure > 70}
            }
            modifier = {
                factor = 0
                check_variable = {AKL.AKL_popularity > 60}
            }
            modifier = {
                factor = 1000
                check_variable = {AKL.AKL_popularity < 30}
            }
            modifier = {
                factor = 0
                check_variable = {AKL.AKL_finance < 30}
            }
        }
    }
    #召见斋巫女
    AKL_gov_meet_kotone = {
        visible = {
            has_completed_focus = AKL_akari_10
        }
        days_remove = 20
        days_re_enable = 60
        remove_effect = {
            AKL_increase_pressure = yes
            AKL_increase_authority_5 = yes
        }
        ai_will_do = {
            factor = 10
            modifier = {
                factor = 0
                check_variable = {AKL.AKL_pressure > 70}
            }
            modifier = {
                factor = 0
                check_variable = {AKL.AKL_authority > 60}
            }
            modifier = {
                factor = 1000
                check_variable = {AKL.AKL_authority < 30}
            }
            modifier = {
                factor = 0
                check_variable = {AKL.AKL_finance < 30}
            }
        }
    }
    #向大御神祈祷
    AKL_gov_pray = {
        visible = {
            has_completed_focus = AKL_akari_11
        }
        days_remove = 40
        days_re_enable = 60
        remove_effect = {
            AKL_increase_authority_6 = yes
            AKL_increase_popularity_3 = yes
            AKL_decrease_finance_5 = yes
        }
        ai_will_do = {
            factor = 10
            modifier = {
                factor = 0
                check_variable = {AKL.AKL_authority > 60}
            }
            modifier = {
                factor = 1000
                check_variable = {AKL.AKL_authority < 30}
            }
            modifier = {
                factor = 0
                check_variable = {AKL.AKL_finance < 30}
            }
        }
    }
    #会见外交官
    AKL_gov_meet_ambassdor = {
        visible = {
            has_completed_focus = AKL_akari_26
        }
        days_remove = 20
        days_re_enable = 60
        remove_effect = {
            AKL_increase_pressure = yes
            AKL_increase_finance_6 = yes
        }
        ai_will_do = {
            factor = 10
            modifier = {
                factor = 0
                check_variable = {AKL.AKL_authority > 60}
            }
            modifier = {
                factor = 1000
                check_variable = {AKL.AKL_authority < 30}
            }
            modifier = {
                factor = 0
                check_variable = {AKL.AKL_finance < 30}
            }
        }
    }
    #支付补贴
    AKL_gov_subsidy = {
        available = {
            custom_trigger_tooltip = {
                tooltip = AKL_has_8_finance
                check_variable = {AKL.AKL_finance > 7}
            }
        }
        visible = {
            OR = {
                has_completed_focus = AKL_akari_18
                has_completed_focus = AKL_akari_19
            }
        }
        days_remove = 60
        days_re_enable = 60
        complete_effect = {
            AKL_decrease_finance_8 = yes
        }
        modifier = {
            consumer_goods_factor = -0.15
            industrial_capacity_factory = 0.10
            industrial_capacity_dockyard = 0.10
        }
        ai_will_do = {
            factor = 10
            modifier = {
                factor = 0
                check_variable = {AKL.AKL_finance < 30}
            }
        }
    }
    #动员国民
    AKL_gov_mobalise = {
        available = {
            custom_trigger_tooltip = {
                tooltip = AKL_has_8_popularity
                check_variable = {AKL.AKL_popularity > 7}
            }
        }
        visible = {
            has_completed_focus = AKL_akari_20
        }
        days_remove = 40
        days_re_enable = 60
        complete_effect = {
            AKL_decrease_popularity_8 = yes
        }
        remove_effect = {
            add_manpower = 20000
        }
        ai_will_do = {
            factor = 10
            modifier = {
                factor = 0
                check_variable = {AKL.AKL_popularity < 30}
            }
        }
    }
}
#鬼畜同盟
AKL_government_2 = {
#奏海
    AKL_Elsa_is_working = {
        icon = mission_icon
        is_good = yes
        available = {
            always = no
        }
        activation = {
            always = no
        }
        cancel_trigger = {
            has_completed_focus = AKL_elsa_sub_5
        }
        days_mission_timeout = 42
        selectable_mission = no
        complete_effect = {
        }
        timeout_effect = {
            activate_mission = AKL_Elsa_is_working
            AKL_elsa_work_on_focus_end = yes
            AKL_elsa_work_on_focus_start = yes
        }
    }
    #邀请同萌维和部队
    AKL_ask_BA_for_help = {
        available = {
            has_war = no
            NOT = {
                has_war_with = RLN
                has_war_with = SOR
            }
            RLN = {
                is_faction_leader = yes
                is_in_faction_with = SOR
            }
        }
        visible = {
            has_completed_focus = AKL_kanami_26
        }
        fire_only_once = yes
        days_remove = 7
        remove_effect = {
            every_country = {
                limit = {
                    OR = {
                        tag = RLN
                        is_in_faction_with = RLN
                    }
                }
                give_guarantee = AKL
                add_ai_strategy = {
					type = alliance
					id = AKL
					value = 200
				}
                give_military_access = AKL
                AKL = {
                    give_military_access = PREV
                }
            }
            news_event = {id = AKL_news.10 days = 3}
        }
        ai_will_do = {
            factor = 1000
        }
    }
    #重启御前会议
    AKL_royal_council = {
        visible = {
            has_country_flag = AKL_kanami_branch
        }   
        fire_only_once = yes
        cost = 30
        days_remove = 7
        remove_effect = {
            set_temp_variable = {
                AKL_kanami_var_temp = 8
            }
            AKL_increase_kanami_var = yes
            set_country_flag = AKL_royal_council_flag
        }
        ai_will_do = {
            factor = 100
        }
    }
    #听取汇报
    AKL_listen_to_report = {
        available = {
            check_variable = {AKL.AKL_kanami_var < 100}
        }
        visible = {
            has_completed_focus = AKL_kanami_21
        }   
        days_remove = 30
        days_remove = 60
        modifier = {
            political_power_gain = 0.1
        }
        remove_effect = {
            set_temp_variable = {
                AKL_kanami_var_temp = 2
            }
            AKL_increase_kanami_var = yes
        }
        ai_will_do = {
            factor = 100
        }
    }
    #打造媒体形象
    AKL_use_the_press = {
        available = {
            check_variable = {AKL.AKL_kanami_var < 100}
        }
        visible = {
            has_completed_focus = AKL_kanami_21
        }   
        cost = 20
        days_remove = 30
        days_remove = 60
        remove_effect = {
            set_temp_variable = {
                AKL_kanami_var_temp = 3
            }
            AKL_increase_kanami_var = yes
        }
        ai_will_do = {
            factor = 100
        }
    }
    #出巡地方
    AKL_pay_a_visit = {
        available = {
            check_variable = {AKL.AKL_kanami_var < 100}
        }
        visible = {
            has_completed_focus = AKL_kanami_22
        }   
        cost = 15
        days_remove = 30
        days_remove = 80
        remove_effect = {
            set_temp_variable = {
                AKL_kanami_var_temp = 5
            }
            AKL_increase_kanami_var = yes
        }
        ai_will_do = {
            factor = 100
        }
    }
    #视察国会
    AKL_a_speech_in_congress = {
        available = {
            has_completed_focus = AKL_kanami_12
            check_variable = {AKL.AKL_kanami_var < 100}
        }
        visible = {
            has_completed_focus = AKL_kanami_23
        }   
        days_remove = 3
        days_remove = 80
        remove_effect = {
            add_political_power = 20
            set_temp_variable = {
                AKL_kanami_var_temp = 3
            }
            AKL_increase_kanami_var = yes
        }
        ai_will_do = {
            factor = 100
        }
    }
    #主持御前会议
    AKL_routine_meeting = {
        available = {
            check_variable = {AKL.AKL_kanami_var < 100}
        }
        visible = {
            has_completed_focus = AKL_kanami_24
        }   
        days_remove = 10
        days_remove = 80
        remove_effect = {
            set_temp_variable = {
                AKL_kanami_var_temp = 5
            }
            AKL_increase_kanami_var = yes
        }
        ai_will_do = {
            factor = 100
        }
    }
    AKL_upgrade_akari_trait = {
        available = {
            custom_trigger_tooltip = {
                tooltip = AKL_kanami_var_50_tt
                check_variable = {AKL.AKL_kanami_var > 49}
            }
            has_completed_focus = AKL_kanami_14
        }
        visible = {
            has_completed_focus = AKL_kanami_23
        }
        fire_only_once = yes
        cost = 50
        days_remove = 100
        remove_effect = {
            AKL_Akari = {
                remove_trait = {
                    slot = political_advisor
                    trait = TRAIT_AKL_SHINJIN
                }
                add_trait = {
                    slot = political_advisor
                    trait = TRAIT_AKL_TSUKISOMENOKOUKI
                }
            }
        }
        ai_will_do = {
            factor = 10
        }
    }
    AKL_upgrade_shino_trait = {
        available = {
            custom_trigger_tooltip = {
                tooltip = AKL_kanami_var_50_tt
                check_variable = {AKL.AKL_kanami_var > 49}
            }
            has_completed_focus = AKL_kanami_15
        }
        visible = {
            has_completed_focus = AKL_kanami_23
        }
        fire_only_once = yes
        cost = 50
        days_remove = 100
        remove_effect = {
            AKL_Shino = {
                remove_trait = {
                    slot = political_advisor
                    trait = TRAIT_AKL_ZAIBOTSU
                }
                add_trait = {
                    slot = political_advisor
                    trait = TRAIT_AKL_ZAIBOTSU_2
                }
            }
        }
        ai_will_do = {
            factor = 10
        }
    }
    AKL_upgrade_hotori_trait = {
        available = {
            custom_trigger_tooltip = {
                tooltip = AKL_kanami_var_50_tt
                check_variable = {AKL.AKL_kanami_var > 49}
            }
            has_completed_focus = AKL_kanami_15
        }
        visible = {
            has_completed_focus = AKL_kanami_23
        }
        fire_only_once = yes
        cost = 50
        days_remove = 100
        remove_effect = {
            AKL_Hotori = {
                add_trait = {
                    slot = army_chief
                    trait = TRAIT_AKL_INO_2
                }
            }
        }
        ai_will_do = {
            factor = 10
        }
    }
    AKL_upgrade_sojin_trait = {
        available = {
            custom_trigger_tooltip = {
                tooltip = AKL_kanami_var_50_tt
                check_variable = {AKL.AKL_kanami_var > 49}
            }
            has_completed_focus = AKL_kanami_15
        }
        visible = {
            has_completed_focus = AKL_kanami_23
        }
        fire_only_once = yes
        cost = 50
        days_remove = 100
        remove_effect = {
            AKL_Sojin = {
                add_trait = {
                    slot = theorist
                    trait = TRAIT_AKL_ONIISAN
                }
            }
        }
        ai_will_do = {
            factor = 10
        }
    }
    AKL_elsa_mission_research = {
        visible = {
            has_completed_focus = AKL_elsa_sub_5
        }
        cost = var:AKL_elsa_mission_research_cost
        days_remove = 180
        days_re_enable = 180
        complete_effect = {
            add_research_slot = 1
        }
        remove_effect = {
            add_research_slot = -1
            if = {
                limit = {
                    check_variable = {AKL_elsa_mission_research_cost < 126}
                }
                custom_effect_tooltip = AKL_mission_cost_increase_20
                add_to_variable = {AKL_elsa_mission_research_cost = 20}
                clamp_variable = {
                    var = AKL_elsa_mission_research_cost
                    max = 125
                }
            }
        }
        modifier = {
            research_speed_factor = 0.05
        }
    }
    AKL_elsa_mission_military = {
        visible = {
            has_completed_focus = AKL_elsa_sub_5
        }
        cost = var:AKL_elsa_mission_military_cost
        days_remove = 180
        days_re_enable = 180
        remove_effect = {
            if = {
                limit = {
                    check_variable = {AKL_elsa_mission_military_cost < 126}
                }
                custom_effect_tooltip = AKL_mission_cost_increase_20
                add_to_variable = {AKL_elsa_mission_military_cost = 20}
                clamp_variable = {
                    var = AKL_elsa_mission_military_cost
                    max = 125
                }
            }
        }
        modifier = {
            weekly_manpower = 600
            training_time_army_factor = -0.25
            experience_gain_army = 0.3
            experience_gain_navy = 0.3
            experience_gain_air = 0.3
        }
    }
    AKL_elsa_mission_industry = {
        visible = {
            has_completed_focus = AKL_elsa_sub_5
        }
        cost = var:AKL_elsa_mission_industry_cost
        days_remove = 180
        days_re_enable = 180
        remove_effect = {
            if = {
                limit = {
                    check_variable = {AKL_elsa_mission_industry_cost < 126}
                }
                custom_effect_tooltip = AKL_mission_cost_increase_20
                add_to_variable = {AKL_elsa_mission_industry_cost = 20}
                clamp_variable = {
                    var = AKL_elsa_mission_industry_cost
                    max = 125
                }
            }
        }
        modifier = {
            consumer_goods_factor = -0.1
            industrial_capacity_factory = 0.1
            industrial_capacity_dockyard = 0.1
            production_factory_efficiency_gain_factor = 0.1
        }
    }
    AKL_elsa_mission_command = {
        available = {
            has_war = yes
        }
        visible = {
            has_completed_focus = AKL_elsa_sub_5
        }
        cost = var:AKL_elsa_mission_command_cost
        days_remove = 180
        days_re_enable = 180
        complete_effect = {
            add_command_power = 40
        }
        remove_effect = {
            if = {
                limit = {
                    check_variable = {AKL_elsa_mission_command_cost < 126}
                }
                custom_effect_tooltip = AKL_mission_cost_increase_20
                add_to_variable = {AKL_elsa_mission_command_cost = 20}
                clamp_variable = {
                    var = AKL_elsa_mission_command_cost
                    max = 125
                }
            }
        }
        modifier = {
            army_attack_factor = 0.08
            army_defence_factor = 0.1
            max_planning_factor = 0.1
            planning_speed = 0.125
            pocket_penalty = -0.1
        }
    }
#艾尔莎
    AKL_Kanami_is_working = {
        icon = mission_icon
        is_good = yes
        available = {
            always = no
        }
        activation = {
            always = no
        }
        cancel_trigger = {
            has_completed_focus = AKL_kanami_sub_4
        }
        days_mission_timeout = 42
        selectable_mission = no
        complete_effect = {
        }
        timeout_effect = {
            activate_mission = AKL_Kanami_is_working 
            AKL_kanami_work_on_focus_end = yes
            AKL_kanami_work_on_focus_start = yes
        }
    }
    #改革政府机构
    AKL_gov_reform = {
        visible = {
            has_completed_focus = AKL_elsa_2
        }
        cost = 30
        days_remove = 30
        days_re_enable = 60
        remove_effect = {
            set_temp_variable = {
                AKL_elsa_var_temp = 2
            }
            AKL_increase_elsa_var = yes
            add_stability = -0.02
        }
        ai_will_do = {
            factor = 100
        }
    }
    #学习皇国文化
    AKL_learn_local_culture = {
        visible = {
            has_completed_focus = AKL_elsa_2
        }
        cost = 20
        days_remove = 40
        days_re_enable = 80
        remove_effect = {
            set_temp_variable = {
                AKL_elsa_var_temp = 2
            }
            AKL_increase_elsa_var = yes
        }
        ai_will_do = {
            factor = 100
        }
    }
    #礼仪改革
    AKL_ritual_reform = {
        visible = {
            has_completed_focus = AKL_elsa_3
        }
        cost = 40
        days_remove = 30
        days_re_enable = 80
        remove_effect = {
            set_temp_variable = {
                AKL_elsa_var_temp = 3
            }
            AKL_increase_elsa_var = yes
            add_stability = -0.03
        }
        ai_will_do = {
            factor = 100
        }
    }
    #破除旧等级制度
    AKL_abolish_aristoracy = {
        visible = {
            has_completed_focus = AKL_elsa_3
        }
        cost = 100
        fire_only_once = yes
        days_remove = 100
        remove_effect = {
            set_temp_variable = {
                AKL_elsa_var_temp = 15
            }
            AKL_increase_elsa_var = yes
            add_stability = -0.20
            add_popularity = {
                ideology = democratic
                popularity = 0.05
            }
            set_country_flag = AKL_abolish_aristoracy_flag
        }
        ai_will_do = {
            factor = 100
        }
    }
    #皇帝的演讲
    AKL_kanami_kawai = {
        visible = {
            has_completed_focus = AKL_elsa_5
        }
        cost = 20
        days_remove = 30
        days_re_enable = 100
        remove_effect = {
            add_stability = 0.03
        }
        ai_will_do = {
            factor = 100
        }
    }
    #提拔有能官员
    AKL_fresh_blood = {
        visible = {
            has_completed_focus = AKL_elsa_5
        }
        cost = 40
        days_remove = 40
        days_re_enable = 90
        remove_effect = {
            add_popularity = {
                ideology = democratic
                popularity = 0.01
            }
            set_temp_variable = {
                AKL_elsa_var_temp = 3
            }
            AKL_increase_elsa_var = yes
        }
        ai_will_do = {
            factor = 100
        }
    }
    #强化基层政府
    AKL_strengthen_local_gov = {
        visible = {
            has_completed_focus = AKL_elsa_6
        }
        cost = 60
        days_remove = 40
        days_re_enable = 90
        remove_effect = {
            add_popularity = {
                ideology = democratic
                popularity = 0.01
            }
            add_stability = 0.01
            set_temp_variable = {
                AKL_elsa_var_temp = 3
            }
            AKL_increase_elsa_var = yes
            if = {
                limit = {
                    check_variable = {AKL.AKL_extra_slot < 9}
                }
                random_owned_controlled_state = {
                    add_extra_state_shared_building_slots = 1
                }
                add_to_variable = {AKL.AKL_extra_slot = 1}
            }
        }
        ai_will_do = {
            factor = 100
        }
    }
}
#次世代国防计划
AKL_elsa_project = {
    #铃木计划
    AKL_suzuki_project_1 = {
        available = {
            NOT = {has_country_flag = AKL_project_in_progress}
        }
        fire_only_once = yes
        cost = 80
        days_remove = 100
        modifier = {
            consumer_goods_factor = 0.25
        }
        complete_effect = {
            set_country_flag = AKL_project_in_progress
        }
        remove_effect = {
            clr_country_flag = AKL_project_in_progress
            add_tech_bonus = {
                category = infantry_weapons
                bonus = 1.0
                uses = 1
                ahead_reduction = 1
            }
            add_tech_bonus = {
                category = artillery
                bonus = 1.0
                uses = 1
                ahead_reduction = 1
            }
            effect_tooltip = {
                swap_ideas = {
                    remove_idea = AKL_elsa_army_modifier_dummy
                    add_idea = AKL_elsa_army_modifier_1
                }
            }
            add_to_variable = {AKL_army_infantry_attack_factor = 0.06}
            add_to_variable = {AKL_army_infantry_defence_factor = 0.06}
            add_to_variable = {AKL_suzuki_project = 1}
        }
    }
    #成立参谋部
    AKL_suzuki_project_2_planning = {
        available = {
            has_army_experience > 49
            NOT = {has_country_flag = AKL_project_in_progress}
        }
        visible = {
            check_variable = {AKL_suzuki_project > 0}
        }
        fire_only_once = yes
        days_remove = 80
        modifier = {
            consumer_goods_factor = 0.25
        }
        complete_effect = {
            army_experience = -50
            set_country_flag = AKL_project_in_progress
        }
        remove_effect = {
            clr_country_flag = AKL_project_in_progress
            effect_tooltip = {
                swap_ideas = {
                    remove_idea = AKL_elsa_army_modifier_dummy
                    add_idea = AKL_elsa_army_modifier_2
                }
            }
            add_to_variable = {AKL_max_planning_factor = 0.1}
            add_to_variable = {AKL_planning_speed = 0.125}
        }
    }
    #职业化培训
    AKL_suzuki_project_2_org = {
        available = {
            has_army_experience > 49
            NOT = {has_country_flag = AKL_project_in_progress}
            NOT = {has_country_flag = AKL_suzuki_project_2_manpower_flag}
        }
        visible = {
            check_variable = {AKL_suzuki_project > 0}
        }
        fire_only_once = yes
        days_remove = 120
        modifier = {
            consumer_goods_factor = 0.25
        }
        complete_effect = {
            army_experience = -50
            set_country_flag = AKL_project_in_progress
            set_country_flag = AKL_suzuki_project_2_org_flag 
        }
        remove_effect = {
            clr_country_flag = AKL_project_in_progress
            effect_tooltip = {
                swap_ideas = {
                    remove_idea = AKL_elsa_army_modifier_dummy
                    add_idea = AKL_elsa_army_modifier_3
                }
            }
            add_to_variable = {AKL_army_strength_factor = 0.05}
            add_to_variable = {AKL_army_org_factor = 0.08}
            add_to_variable = {AKL_training_time_army_factor = 0.1}
        }
    }
    #大规模动员
    AKL_suzuki_project_2_manpower = {
        available = {
            has_army_experience > 49
            NOT = {has_country_flag = AKL_project_in_progress}
            NOT = {has_country_flag = AKL_suzuki_project_2_org_flag}
        }
        visible = {
            check_variable = {AKL_suzuki_project > 0}
        }
        fire_only_once = yes
        days_remove = 100
        modifier = {
            consumer_goods_factor = 0.25
        }
        complete_effect = {
            army_experience = -50
            set_country_flag = AKL_project_in_progress
            set_country_flag = AKL_suzuki_project_2_manpower_flag 
        }
        remove_effect = {
            clr_country_flag = AKL_project_in_progress
            effect_tooltip = {
                swap_ideas = {
                    remove_idea = AKL_elsa_army_modifier_dummy
                    add_idea = AKL_elsa_army_modifier_4
                }
            }
            add_to_variable = {AKL_conscription_factor = 0.2}
            add_to_variable = {AKL_army_org_factor = -0.05}
            add_to_variable = {AKL_army_infantry_attack_factor = 0.04}
            add_to_variable = {AKL_training_time_army_factor = -0.1}
        }
    }
    #莉西亚计划
    AKL_licia_project_1 = {
        available = {
            NOT = {has_country_flag = AKL_project_in_progress}
        }
        fire_only_once = yes
        cost = 80
        days_remove = 100
        complete_effect = {
            set_country_flag = AKL_project_in_progress
        }
        modifier = {
            consumer_goods_factor = 0.25
        }
        remove_effect = {
            clr_country_flag = AKL_project_in_progress
            833 = {
                add_building_construction = {
                    type = bunker
                    level = 2
                    instant_build = yes
                    province = 12941
                }
            }
            520 = {
                add_building_construction = {
                    type = bunker
                    level = 2
                    instant_build = yes
                    province = 2451
                }
            }
            859 = {
                add_building_construction = {
                    type = bunker
                    level = 2
                    instant_build = yes
                    province = 12868
                }
            }
            834 = {
                add_building_construction = {
                    type = bunker
                    level = 2
                    instant_build = yes
                    province = 2390
                }
            }
            835 = {
                add_building_construction = {
                    type = bunker
                    level = 2
                    instant_build = yes
                    province = 12655
                }
            }
            582 = {
                add_building_construction = {
                    type = bunker
                    level = 2
                    instant_build = yes
                    province = 5213
                }
            }
            effect_tooltip = {
                swap_ideas = {
                    remove_idea = AKL_elsa_army_modifier_dummy
                    add_idea = AKL_elsa_army_modifier_5
                }
            }
            add_to_variable = {AKL_production_speed_bunker_factor = 0.25}
            add_to_variable = {AKL_licia_project = 1}
        }
    }
    #先进咒术武器项目
    AKL_licia_project_2 = {
        available = {
            has_army_experience > 99
            NOT = {has_country_flag = AKL_project_in_progress}
            has_completed_focus = AKL_mil_12
        }
        visible = {
            check_variable = {AKL_licia_project > 0}
        }
        fire_only_once = yes
        cost = 150
        days_remove = 100
        complete_effect = {
            army_experience = -100
            set_country_flag = AKL_project_in_progress
        }
        modifier = {
            consumer_goods_factor = 0.25
        }
        remove_effect = {
            clr_country_flag = AKL_project_in_progress
            add_tech_bonus = {
                category = mana_tech
                bonus = 1.0
                uses = 1
                ahead_reduction = 1
            }
            set_technology = {AKL_advanced_jyusou_tech = 1 popup = no}
            custom_effect_tooltip = tech_effect|AKL_advanced_jyusou_tech
        }
    }
}
#皇姬的衣柜
AKL_Akari_portrait = {
    AKL_Akari_dynamic_portrait_on = {
        visible = {
            NOT = {
                has_country_flag = AKL_Akari_dynamic_portrait_on
            }
        }
        complete_effect = {
            clr_country_flag = AKL_Akari_dynamic_portrait_off
            set_country_flag = AKL_Akari_dynamic_portrait_on
        }
    }
    AKL_Akari_dynamic_portrait_off = {
        visible = {
            NOT = {
                has_country_flag = AKL_Akari_dynamic_portrait_off
            }
        }
        complete_effect = {
            clr_country_flag = AKL_Akari_dynamic_portrait_on
            set_country_flag = AKL_Akari_dynamic_portrait_off
        }
    }
    AKL_Akari_portrait_1 = {
        available = {
            NOT = {
                has_country_flag = AKL_Akari_is_resting
            }
        }
        visible = {
            NOT = {
                check_variable = {AKL_Akari_portrait_var = 1}
            }
            NOT = {
                has_country_flag = AKL_Akari_dynamic_portrait_on
            }
        }
        complete_effect = {
            set_variable = {AKL_Akari_portrait_var = 1}
            custom_effect_tooltip = AKL_Akari_portrait_1_effect
            hidden_effect = {
                set_country_leader_portrait = {
                    portrait = GFX_AKL_Akari
                }
            }
        }
    }
    AKL_Akari_portrait_2 = {
        available = {
            NOT = {
                has_country_flag = AKL_Akari_is_resting
            }
        }
        visible = {
            NOT = {
                check_variable = {AKL_Akari_portrait_var = 2}
            }
            NOT = {
                has_country_flag = AKL_Akari_dynamic_portrait_on
            }
        }
        complete_effect = {
            set_variable = {AKL_Akari_portrait_var = 2}
            custom_effect_tooltip = AKL_Akari_portrait_2_effect
            hidden_effect = {
                set_country_leader_portrait = {
                    portrait = GFX_AKL_Akari_2
                }
            }
        }
    }
    AKL_Akari_portrait_3 = {
        available = {
            NOT = {
                has_country_flag = AKL_Akari_is_resting
            }
        }
        visible = {
            NOT = {
                check_variable = {AKL_Akari_portrait_var = 3}
            }
            NOT = {
                has_country_flag = AKL_Akari_dynamic_portrait_on
            }
        }
        complete_effect = {
            set_variable = {AKL_Akari_portrait_var = 3}
            custom_effect_tooltip = AKL_Akari_portrait_3_effect
            hidden_effect = {
                set_country_leader_portrait = {
                    portrait = GFX_AKL_Akari_3
                }
            }
        }
    }
    AKL_Akari_portrait_4 = {
        available = {
            NOT = {
                has_country_flag = AKL_Akari_is_resting
            }
        }
        visible = {
            NOT = {
                check_variable = {AKL_Akari_portrait_var = 4}
            }
            NOT = {
                has_country_flag = AKL_Akari_dynamic_portrait_on
            }
        }
        complete_effect = {
            set_variable = {AKL_Akari_portrait_var = 4}
            custom_effect_tooltip = AKL_Akari_portrait_4_effect
            hidden_effect = {
                set_country_leader_portrait = {
                    portrait = GFX_AKL_Akari_4
                }
            }
        }
    }
    AKL_Akari_portrait_5 = {
        available = {
            NOT = {
                has_country_flag = AKL_Akari_is_resting
            }
        }
        visible = {
            NOT = {
                check_variable = {AKL_Akari_portrait_var = 5}
            }
            NOT = {
                has_country_flag = AKL_Akari_dynamic_portrait_on
            }
        }
        complete_effect = {
            set_variable = {AKL_Akari_portrait_var = 5}
            custom_effect_tooltip = AKL_Akari_portrait_5_effect
            hidden_effect = {
                set_country_leader_portrait = {
                    portrait = GFX_AKL_Akari_5
                }
            }
        }
    }
    AKL_Akari_portrait_0721 = {
        available = {
            NOT = {
                has_country_flag = AKL_Akari_is_resting
            }
        }
        visible = {
            is_debug = yes
            NOT = {
                check_variable = {AKL_Akari_portrait_var = 6}
            }
            NOT = {
                has_country_flag = AKL_Akari_dynamic_portrait_on
            }
        }
        complete_effect = {
            set_variable = {AKL_Akari_portrait_var = 6}
            custom_effect_tooltip = AKL_Akari_portrait_0721_effect
            hidden_effect = {
                set_country_leader_portrait = {
                    portrait = GFX_AKL_Akari_0721
                }
            }
        }
    }
}
#我的妹妹真可爱
AKL_Kanami_portrait = {
    AKL_Kanami_portrait_1 = {
        visible = {
            NOT = {
                check_variable = {AKL_Kanami_portrait_var = 1}
            }
        }
        complete_effect = {
            set_variable = {AKL_Kanami_portrait_var = 1}
            custom_effect_tooltip = AKL_Kanami_portrait_1_effect
            hidden_effect = {
                if = {
                    limit = {
                        has_country_leader = {
                            character = AKL_Kanami
                        }
                    }
                    set_country_leader_portrait = {
                        portrait = GFX_AKL_Kanami
                    }
                }
            }
        }
    }
    AKL_Kanami_portrait_2 = {
        visible = {
            NOT = {
                check_variable = {AKL_Kanami_portrait_var = 2}
            }
        }
        complete_effect = {
            set_variable = {AKL_Kanami_portrait_var = 2}
            custom_effect_tooltip = AKL_Kanami_portrait_2_effect
            hidden_effect = {
                if = {
                    limit = {
                        has_country_leader = {
                            character = AKL_Kanami
                        }
                    }
                    set_country_leader_portrait = {
                        portrait = GFX_AKL_Kanami_2
                    }
                }
            }
        }
    }
    AKL_Kanami_portrait_3 = {
        visible = {
            NOT = {
                check_variable = {AKL_Kanami_portrait_var = 3}
            }
        }
        complete_effect = {
            set_variable = {AKL_Kanami_portrait_var = 3}
            custom_effect_tooltip = AKL_Kanami_portrait_3_effect
            hidden_effect = {
                if = {
                    limit = {
                        has_country_leader = {
                            character = AKL_Kanami
                        }
                    }
                    set_country_leader_portrait = {
                        portrait = GFX_AKL_Kanami_3
                    }
                }
            }
        }
    }
    AKL_Kanami_portrait_4 = {
        visible = {
            NOT = {
                check_variable = {AKL_Kanami_portrait_var = 4}
            }
        }
        complete_effect = {
            set_variable = {AKL_Kanami_portrait_var = 4}
            custom_effect_tooltip = AKL_Kanami_portrait_4_effect
            hidden_effect = {
                if = {
                    limit = {
                        has_country_leader = {
                            character = AKL_Kanami
                        }
                    }
                    set_country_leader_portrait = {
                        portrait = GFX_AKL_Kanami_4
                    }
                }
            }
        }
    }
    AKL_Kanami_portrait_0721 = {
        visible = {
            is_debug = yes
            NOT = {
                check_variable = {AKL_Kanami_portrait_var = 5}
            }
        }
        complete_effect = {
            set_variable = {AKL_Kanami_portrait_var = 5}
            custom_effect_tooltip = AKL_Kanami_portrait_0721_effect
            hidden_effect = {
                if = {
                    limit = {
                        has_country_leader = {
                            character = AKL_Kanami
                        }
                    }
                    set_country_leader_portrait = {
                        portrait = GFX_AKL_Kanami_0721
                    }
                }
            }
        }
    }
}
#百变艾尔莎
AKL_Elsa_portrait = {
    AKL_Elsa_portrait_1 = {
        visible = {
            NOT = {
                check_variable = {AKL_Elsa_portrait_var = 1}
            }
        }
        complete_effect = {
            set_variable = {AKL_Elsa_portrait_var = 1}
            custom_effect_tooltip = AKL_Elsa_portrait_1_effect
            hidden_effect = {
                if = {
                    limit = {
                        has_country_leader = {
                            character = AKL_Elsa
                        }
                    }
                    set_country_leader_portrait = {
                        portrait = GFX_AKL_Elsa
                    }
                }
            }
        }
    }
    AKL_Elsa_portrait_2 = {
        visible = {
            NOT = {
                check_variable = {AKL_Elsa_portrait_var = 2}
            }
        }
        complete_effect = {
            set_variable = {AKL_Elsa_portrait_var = 2}
            custom_effect_tooltip = AKL_Elsa_portrait_2_effect
            hidden_effect = {
                if = {
                    limit = {
                        has_country_leader = {
                            character = AKL_Elsa
                        }
                    }
                    set_country_leader_portrait = {
                        portrait = GFX_AKL_Elsa_2
                    }
                }
            }
        }
    }
    AKL_Elsa_portrait_3 = {
        visible = {
            NOT = {
                check_variable = {AKL_Elsa_portrait_var = 3}
            }
        }
        complete_effect = {
            set_variable = {AKL_Elsa_portrait_var = 3}
            custom_effect_tooltip = AKL_Elsa_portrait_3_effect
            hidden_effect = {
                if = {
                    limit = {
                        has_country_leader = {
                            character = AKL_Elsa
                        }
                    }
                    set_country_leader_portrait = {
                        portrait = GFX_AKL_Elsa_3
                    }
                }
            }
        }
    }
    AKL_Elsa_portrait_4 = {
        visible = {
            NOT = {
                check_variable = {AKL_Elsa_portrait_var = 4}
            }
        }
        complete_effect = {
            set_variable = {AKL_Elsa_portrait_var = 4}
            custom_effect_tooltip = AKL_Elsa_portrait_4_effect
            hidden_effect = {
                if = {
                    limit = {
                        has_country_leader = {
                            character = AKL_Elsa
                        }
                    }
                    set_country_leader_portrait = {
                        portrait = GFX_AKL_Elsa_4
                    }
                }
            }
        }
    }
    AKL_Elsa_portrait_5 = {
        visible = {
            NOT = {
                check_variable = {AKL_Elsa_portrait_var = 5}
            }
        }
        complete_effect = {
            set_variable = {AKL_Elsa_portrait_var = 5}
            custom_effect_tooltip = AKL_Elsa_portrait_5_effect
            hidden_effect = {
                if = {
                    limit = {
                        has_country_leader = {
                            character = AKL_Elsa
                        }
                    }
                    set_country_leader_portrait = {
                        portrait = GFX_AKL_Elsa_5
                    }
                }
            }
        }
    }

    AKL_Elsa_portrait_0721 = {
        visible = {
            is_debug = yes
            NOT = {
                check_variable = {AKL_Elsa_portrait_var = 6}
            }
        }
        complete_effect = {
            set_variable = {AKL_Elsa_portrait_var = 6}
            custom_effect_tooltip = AKL_Elsa_portrait_0721_effect
            hidden_effect = {
                if = {
                    limit = {
                        has_country_leader = {
                            character = AKL_Elsa
                        }
                    }
                    set_country_leader_portrait = {
                        portrait = GFX_AKL_Elsa_0721
                    }
                }
            }
        }
    }
}
AKL_question_of_treaty = {
    #跟你爆了
    AKL_break_treaty_of_kinitani = {
        available = {
            has_idea = AKL_treaty_of_kiritani
        }
        cost = 250
        days_remove = 15
        remove_effect = {
            remove_ideas = AKL_treaty_of_kiritani
            add_named_threat = {
                threat = 10
                name = AKL_treaty_of_kiritani_broken
            }
            create_wargoal = {
                target = SKR
                type = annex_everything
            }
            create_wargoal = {
                target = TPP
                type = annex_everything
            }
            create_wargoal = {
                target = TEB
                type = annex_everything
            }
            custom_effect_tooltip = AKL_will_cause_problem
            hidden_effect = {
                USF = {
                    country_event = {id = AKL.36 days = 3}
                }
            }
        }
        ai_will_do = {
            factor = 0
        }
    }
}