scripted_gui = {
    USF_congress_window = {
        context_type = decision_category
        window_name = "USF_congress_window"

        properties = {
            USF_ruling_party_icon = {
                image = "[USF_ruling_party_icon_scripted_loc]"
            }
            USF_opposite_party_icon = {
                image = "[USF_opposite_party_icon_scripted_loc]"
            }
        }

        triggers = {
            USF_civ_war_layer_visible = {
                has_global_flag = USF_CIV_WAR_STARTED
            }
        }
    }

    USF_econ_window = {
        context_type = decision_category
        # context_type = player_context
        window_name = "USF_econ_window"

        dynamic_lists = {
			USF_broken_line = {
				array = USF_economic_discount_y_label
				change_scope = no
				entry_container = USF_broken_line_segment
				index = idx
			}
		}

        triggers = {
            segment_visible = {
                check_variable = { idx > 0 }
            }
            USF_stable_line_chart_expectation_visible = {
                check_variable = { USF_stable_line_chart_expectation_y < 75 }
                check_variable = { USF_stable_line_chart_expectation_y > 5 }
            }
        }

        properties = {
            USF_inflation_icon = {
                image = "[USF_inflation_icon_scripted_loc]"
            }
            USF_unemployment_progress_bar = {
                frame = USF.USF_unemployment
            }
            USF_stable_line_chart_expectation = {
				y = USF_stable_line_chart_expectation_y
			}
            segment = {
				y = USF_economic_discount_y_label^idx
				frame = USF_economic_discount_frame_label^idx
			}
        }
    }

    USF_kays_ambition_window = {
        context_type = decision_category
        window_name = "USF_kays_ambition_window"

        triggers = {
            USF_AF_alert_icon_visible = {
                NOT = {
                    has_global_flag = USF_CIV_WAR_STARTED
                }
            }
            USF_ADP_power_icon_visible = {
                NOT = {
                    has_global_flag = USF_CIV_WAR_STARTED
                }
            }
            USF_civ_war_icon_visible = {
                has_global_flag = USF_CIV_WAR_STARTED
                NOT = {has_global_flag = USF_CIV_WAR_ENDED}
            }
            USF_congress_window_background_visible = {
                has_global_flag = USF_CIV_WAR_STARTED
                NOT = {has_global_flag = USF_CIV_WAR_ENDED}
            }
        }

        properties = {
            USF_AF_alert_icon = {
                image = "[USF_AF_alert_icon_scripted_loc]"
            }
            USF_ADP_power_icon = {
                image = "[USF_ADP_power_icon_scripted_loc]"
            }
        }
    }
    USF_econ_sphere_icon_window = {
        context_type = player_context
		parent_window_token = top_bar
        window_name = "USF_econ_sphere_icon_window"

        visible = {
			tag = USF
            has_country_flag = USF_unlock_econ_sphere_gui_flag
		}

        effects = {
            USF_econ_sphere_icon_click = {
                if = {
                    limit = {
                        check_variable = {USF_gui_window = 0}
                    }
                    set_variable = {USF_gui_window = 1}
                }
                else = {
                    set_variable = {USF_gui_window = 0}
                }
            }
        }

    }

    USF_econ_sphere_window = {
        context_type = player_context
		parent_window_token = top_bar
        window_name = "USF_econ_sphere_window"

        visible = {
			tag = USF
            check_variable = {USF_gui_window = 1}
		}

        properties = {
            USF_econ_sphere_chess_1 = {
                image = "[USF_econ_sphere_chess_1_get_image]"
            }
            USF_econ_sphere_chess_2 = {
                image = "[USF_econ_sphere_chess_2_get_image]"
            }
            USF_econ_sphere_chess_3 = {
                image = "[USF_econ_sphere_chess_3_get_image]"
            }
            USF_econ_sphere_chess_4 = {
                image = "[USF_econ_sphere_chess_4_get_image]"
            }
            USF_econ_sphere_chess_5 = {
                image = "[USF_econ_sphere_chess_5_get_image]"
            }
            USF_econ_sphere_chess_6 = {
                image = "[USF_econ_sphere_chess_6_get_image]"
            }
            USF_econ_sphere_chess_7 = {
                image = "[USF_econ_sphere_chess_7_get_image]"
            }
            USF_econ_sphere_chess_8 = {
                image = "[USF_econ_sphere_chess_8_get_image]"
            }
            USF_econ_sphere_chess_9 = {
                image = "[USF_econ_sphere_chess_9_get_image]"
            }
        }

        effects = {
            USF_econ_sphere_close_button_click = {
                set_variable = {USF_gui_window = 0}
            }
            USF_econ_sphere_button_1_click = {
                USF_econ_sphere_button_1_click_effect = yes
            }
            USF_econ_sphere_button_2_click = {
                USF_econ_sphere_button_2_click_effect = yes
            }
            USF_econ_sphere_button_3_click = {
                USF_econ_sphere_button_3_click_effect = yes
            }
            USF_econ_sphere_button_4_click = {
                USF_econ_sphere_button_4_click_effect = yes
            }
            USF_econ_sphere_chess_1_click = {
                set_variable = {USF_econ_sphere_target = token:USF_city_01}
                set_variable = {USF_city = 1}
                USF_econ_sphere_city_selection_effect = yes
            }
            USF_econ_sphere_chess_2_click = {
                set_variable = {USF_econ_sphere_target = token:USF_city_02}
                set_variable = {USF_city = 2}
                USF_econ_sphere_city_selection_effect = yes
            }
            USF_econ_sphere_chess_3_click = {
                set_variable = {USF_econ_sphere_target = token:USF_city_03}
                set_variable = {USF_city = 3}
                USF_econ_sphere_city_selection_effect = yes
            }
            USF_econ_sphere_chess_4_click = {
                set_variable = {USF_econ_sphere_target = token:USF_city_04}
                set_variable = {USF_city = 4}
                USF_econ_sphere_city_selection_effect = yes
            }
            USF_econ_sphere_chess_5_click = {
                set_variable = {USF_econ_sphere_target = token:USF_city_05}
                set_variable = {USF_city = 5}
                USF_econ_sphere_city_selection_effect = yes
            }
            USF_econ_sphere_chess_6_click = {
                set_variable = {USF_econ_sphere_target = token:USF_city_06}
                set_variable = {USF_city = 6}
                USF_econ_sphere_city_selection_effect = yes
            }
            USF_econ_sphere_chess_7_click = {
                set_variable = {USF_econ_sphere_target = token:USF_city_07}
                set_variable = {USF_city = 7}
                USF_econ_sphere_city_selection_effect = yes
            }
            USF_econ_sphere_chess_8_click = {
                set_variable = {USF_econ_sphere_target = token:USF_city_08}
                set_variable = {USF_city = 8}
                USF_econ_sphere_city_selection_effect = yes
            }
            USF_econ_sphere_chess_9_click = {
                set_variable = {USF_econ_sphere_target = token:USF_city_09}
                set_variable = {USF_city = 9}
                USF_econ_sphere_city_selection_effect = yes
            }
        }

        triggers = {
            USF_econ_sphere_close_button_visible = {
                always = yes
            }
            USF_econ_sphere_button_1_visible = {
                always = yes
            }
            USF_econ_sphere_button_2_visible = {
                always = yes
            }
            USF_econ_sphere_button_3_visible = {
                always = yes
            }
            USF_econ_sphere_button_4_visible = {
                always = yes
            }
            USF_econ_sphere_chess_1_visible = {#莲门
                always = yes
            }
            USF_econ_sphere_chess_2_visible = {#煌口
                always = yes
            }
            USF_econ_sphere_chess_3_visible = {#科斯坦丁
                always = yes
            }
            USF_econ_sphere_chess_4_visible = {#纳巴莱特
                always = yes
            }
            USF_econ_sphere_chess_5_visible = {#樱滨
                has_country_flag = USF_econ_sphere_chess_5_visible_flag
            }
            USF_econ_sphere_chess_6_visible = {#边岛
                has_country_flag = USF_econ_sphere_chess_6_visible_flag
            }
            USF_econ_sphere_chess_7_visible = {#南阿西娅诸国
                has_country_flag = USF_econ_sphere_chess_7_visible_flag
            }
            USF_econ_sphere_chess_8_visible = {#博林克尼亚
                always = yes
            }
            USF_econ_sphere_chess_9_visible = {#东美乐蒂
                has_country_flag = USF_econ_sphere_chess_9_visible_flag
            }

            USF_econ_sphere_chess_1_h_visible = {
                check_variable = {USF_econ_sphere_target = token:USF_city_01}
            }
            USF_econ_sphere_chess_2_h_visible = {
                check_variable = {USF_econ_sphere_target = token:USF_city_02}
            }
            USF_econ_sphere_chess_3_h_visible = {
                check_variable = {USF_econ_sphere_target = token:USF_city_03}
            }
            USF_econ_sphere_chess_4_h_visible = {
                check_variable = {USF_econ_sphere_target = token:USF_city_04}
            }
            USF_econ_sphere_chess_5_h_visible = {
                check_variable = {USF_econ_sphere_target = token:USF_city_05}
            }
            USF_econ_sphere_chess_6_h_visible = {
                check_variable = {USF_econ_sphere_target = token:USF_city_06}
            }
            USF_econ_sphere_chess_7_h_visible = {
                check_variable = {USF_econ_sphere_target = token:USF_city_07}
            }
            USF_econ_sphere_chess_8_h_visible = {
                check_variable = {USF_econ_sphere_target = token:USF_city_08}
            }
            USF_econ_sphere_chess_9_h_visible = {
                check_variable = {USF_econ_sphere_target = token:USF_city_09}
            }
            USF_lines_01_icon_visible = {
                306 = {
                    controller = {
                        USF_not_has_war_or_embargo_trigger = yes
                    }
                }
            }
            USF_lines_01_02_icon_visible = {
                306 = {
                    controller = {
                        USF_not_has_war_or_embargo_trigger = yes
                    }
                }
                685 = {
                    controller = {
                        USF_not_has_war_or_embargo_trigger = yes
                    }
                }
            }
            USF_lines_03_icon_visible = {
                827 = {
                    controller = {
                        USF_not_has_war_or_embargo_trigger = yes
                    }
                }
            }
            USF_lines_04_icon_visible = {
                284 = {
                    controller = {
                        USF_not_has_war_or_embargo_trigger = yes
                    }
                }
            }
            USF_lines_02_03_04_icon_visible = {
                685 = {
                    controller = {
                        USF_not_has_war_or_embargo_trigger = yes
                    }
                }
                827 = {
                    controller = {
                        USF_not_has_war_or_embargo_trigger = yes
                    }
                }
                284 = {
                    controller = {
                        USF_not_has_war_or_embargo_trigger = yes
                    }
                }
            }
            USF_lines_05_icon_visible = {
                has_country_flag = USF_econ_sphere_chess_5_visible_flag
                520 = {
                    controller = {
                        USF_not_has_war_or_embargo_trigger = yes
                    }
                }
            }
            USF_lines_06_icon_visible = {
                has_country_flag = USF_econ_sphere_chess_6_visible_flag
                393 = {
                    controller = {
                        USF_not_has_war_or_embargo_trigger = yes
                    }
                }
            }
            USF_lines_05_06_icon_visible = {
                has_country_flag = USF_econ_sphere_chess_5_visible_flag
                has_country_flag = USF_econ_sphere_chess_6_visible_flag
                520 = {
                    controller = {
                        USF_not_has_war_or_embargo_trigger = yes
                    }
                }
                393 = {
                    controller = {
                        USF_not_has_war_or_embargo_trigger = yes
                    }
                }
            }
            USF_lines_07_icon_visible = {
                has_country_flag = USF_econ_sphere_chess_7_visible_flag
                668 = {
                    controller = {
                        USF_not_has_war_or_embargo_trigger = yes
                    }
                }
            }
            USF_lines_08_icon_visible = {
                825 = {
                    controller = {
                        USF_not_has_war_or_embargo_trigger = yes
                    }
                }
            }
            USF_lines_09_icon_visible = {
                has_country_flag = USF_econ_sphere_chess_9_visible_flag
                374 = {
                    controller = {
                        USF_not_has_war_or_embargo_trigger = yes
                    }
                }
            }
            
            USF_econ_sphere_chess_1_click_enabled = {
                306 = {
                    controller = {
                        USF_not_has_war_or_embargo_trigger = yes
                    }
                }
            }
            USF_econ_sphere_chess_2_click_enabled = {
                685 = {
                    controller = {
                        USF_not_has_war_or_embargo_trigger = yes
                    }
                }
            }
            USF_econ_sphere_chess_3_click_enabled = {
                827 = {
                    controller = {
                        USF_not_has_war_or_embargo_trigger = yes
                    }
                }
            }
            USF_econ_sphere_chess_4_click_enabled = {
                284 = {
                    controller = {
                        USF_not_has_war_or_embargo_trigger = yes
                    }
                }
            }
            USF_econ_sphere_chess_5_click_enabled = {
                520 = {
                    controller = {
                        USF_not_has_war_or_embargo_trigger = yes
                    }
                }
            }
            USF_econ_sphere_chess_6_click_enabled = {
                393 = {
                    controller = {
                        USF_not_has_war_or_embargo_trigger = yes
                    }
                }
            }
            USF_econ_sphere_chess_7_click_enabled = {
                668 = {
                    controller = {
                        USF_not_has_war_or_embargo_trigger = yes
                    }
                }
            }
            USF_econ_sphere_chess_8_click_enabled = {
                825 = {
                    controller = {
                        USF_not_has_war_or_embargo_trigger = yes
                    }
                }
            }
            USF_econ_sphere_chess_9_click_enabled = {
                374 = {
                    controller = {
                        USF_not_has_war_or_embargo_trigger = yes
                    }
                }
            }

            USF_econ_sphere_button_1_click_enabled = {
                USF_econ_sphere_available_points_trigger = yes
                custom_trigger_tooltip = {
                    tooltip = USF_action_cooldown_desc_1
                    NOT = {check_variable = {USF_econ_sphere_target = 0}}
                    meta_trigger = {
                        text = {
                            NOT = {
                                has_country_flag = [CITY]_action_1_flag
                            }
                        }
                        CITY = "[?USF_econ_sphere_target.GetTokenKey]"
                    }
                }
            }
            USF_econ_sphere_button_2_click_enabled = {
                USF_econ_sphere_available_points_trigger = yes
                custom_trigger_tooltip = {
                    tooltip = USF_action_cooldown_desc_2
                    NOT = {check_variable = {USF_econ_sphere_target = 0}}
                    meta_trigger = {
                        text = {
                            NOT = {
                                has_country_flag = [CITY]_action_2_flag
                            }
                        }
                        CITY = "[?USF_econ_sphere_target.GetTokenKey]"
                    }
                }
            }
            USF_econ_sphere_button_3_click_enabled = {
                USF_econ_sphere_available_points_trigger = yes
                custom_trigger_tooltip = {
                    tooltip = USF_action_cooldown_desc_3
                    NOT = {check_variable = {USF_econ_sphere_target = 0}}
                    meta_trigger = {
                        text = {
                            NOT = {
                                has_country_flag = [CITY]_action_3_flag
                            }
                        }
                        CITY = "[?USF_econ_sphere_target.GetTokenKey]"
                    }
                }
            }
            USF_econ_sphere_button_4_click_enabled = {
                USF_econ_sphere_available_points_trigger = yes
                custom_trigger_tooltip = {
                    tooltip = USF_action_cooldown_desc_4
                    NOT = {check_variable = {USF_econ_sphere_target = 0}}
                    meta_trigger = {
                        text = {
                            NOT = {
                                has_country_flag = [CITY]_action_4_flag
                            }
                        }
                        CITY = "[?USF_econ_sphere_target.GetTokenKey]"
                    }
                }
            }
        }
    }
}