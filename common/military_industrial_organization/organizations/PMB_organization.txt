PMB_henschel_stahlkrieger_organization = {
	include = generic_heavy_tank_organization
	icon = GFX_idea_PMB_Stahlkrieger
	
	allowed = {	
		OR = {
			tag = RZT
			tag = USR
			tag = RHB
			tag = BGT
			tag = KST
			tag = PMB
		}
	}

	available = {
		FROM = {
			controls_state = 155
		}
	}

	available = {
		# When in a Foreign MIO, countries need to be at peace with original country
		IF = {
			limit = {
				FROM = { NOT = { original_tag = GER } }
			}
			FROM = { NOT = { has_war_with = GER } }
		}

		IF = {
			limit = {
				FROM = { original_tag = MEX }
			}
			FROM = { is_in_faction_with = GER }
		}
		IF = {
			limit = {
				FROM = { original_tag = NOR }
			}
			FROM = { has_completed_focus = NOR_invite_german_engineers }
		}
	}

	tree_header_text = {
		text = mio_header_engine_and_drive_system
		x = 0.5
	}

	tree_header_text = {
		text = mio_header_chassis
		x = 4
	}

	tree_header_text = {
		text = mio_header_guns_and_turret
		x = 7
	}

	override_trait = {
		token = generic_mio_trait_wide_tracks
		
		position = { x=0 y=0 }
	}

	override_trait = {
		token = generic_mio_trait_one_piece_hull_side_coverings
		
		position = { x=3 y=0 }
	}

	override_trait = {
		token = generic_mio_trait_improved_crew_ergonomics

		position = { x=0 y=2 }
	}

	override_trait = {
		token = generic_mio_trait_fully_cast_turret

		position = { x=4 y=0 }
	}

	add_trait = {
		token = GER_mio_trait_hoesch_facilities
		name = GER_mio_trait_hoesch_facilities
		icon = GFX_generic_mio_trait_icon_production_capacity
		special_trait_background = yes

		position = { x=@tank_hoesch_X y=@tank_hoesch_Y }

		visible = {
			FROM = { original_tag = GER }
		}

		available = {
			FROM = {
				NOT = { has_country_flag = GER_hoesch_facilities_trait_taken_flag }
			}
		}

		on_complete = {
			custom_effect_tooltip = generic_trait_will_not_be_available_in_other_organizations
			FROM = {
				set_country_flag = GER_hoesch_facilities_trait_taken_flag
			}
		}

		production_bonus = {
			production_capacity_factor = 0.05
		}

		ai_will_do = {
			base = 2
		}
	}

	add_trait = {
		token = GER_mio_trait_involve_porsche_in_special_projects
		name = GER_mio_trait_involve_porsche_in_special_projects
		icon = GFX_generic_mio_department_icon_facilities
		special_trait_background = yes

		position = { x=0 y=1 }
		relative_position_id = GER_mio_trait_hoesch_facilities

		visible = {
			FROM = { original_tag = GER }
		}

		available = {
			has_mio_size > 4
		}

		on_complete = {
			custom_effect_tooltip = {
				localization_key = available_scientist_one_line_tt
				CHARACTER = GER_ferdinand_porsche
			}
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.05
		}

		ai_will_do = {
			base = 2
		}
	}

	add_trait = {
		token = GER_mio_trait_multi_role_tanks
		name = GER_mio_trait_multi_role_tanks
		icon = GFX_generic_mio_department_icon_tank_heavy_tank_aa
		special_trait_background = yes

		position = { x=2 y=0 }
		relative_position_id = generic_mio_trait_one_piece_hull_side_coverings

		visible = {
			FROM = { original_tag = GER }
		}

		available = {
		}

		equipment_bonus = {
			soft_attack = 0.05
			air_attack = 0.05
		}

		ai_will_do = {
			base = 2
		}
	}

	add_trait = {
		token = GER_mio_trait_anti_tank_specialization
		name = GER_mio_trait_anti_tank_specialization
		icon = GFX_generic_mio_department_icon_tank_heavy_tank_at
		special_trait_background = yes

		all_parents = {
            generic_mio_trait_one_piece_hull_side_coverings
            GER_mio_trait_multi_role_tanks
        }

		position = { x=1 y=1 }
		relative_position_id = generic_mio_trait_one_piece_hull_side_coverings

		visible = {
			FROM = { original_tag = GER }
		}

		available = {
		}

		equipment_bonus = {
			hard_attack = 0.05
			ap_attack = 0.05
		}

		ai_will_do = {
			base = 2
		}
	}

	add_trait = {
		token = GER_mio_trait_unorthodox_transmission_design
		name = GER_mio_trait_unorthodox_transmission_design
		icon = GFX_generic_mio_department_icon_tank_heavy_tank_engine
		special_trait_background = yes

		all_parents = {
            generic_mio_trait_simplified_transmission_system
        }

		position = { x=-1 y=1 }
		relative_position_id = generic_mio_trait_simplified_transmission_system

		visible = {
			FROM = { original_tag = GER }
		}

		available = {
			
		}

		limit_to_equipment_type = { 
			armor
		}

		equipment_bonus = {
			maximum_speed = 0.05
			reliability = -0.02
		}

		ai_will_do = {
			base = 2
		}
	}
}